!function webpackUniversalModuleDefinition(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.bot=e():t.bot=e()}(global,(function(){return function(t){var e={};function __webpack_require__(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,r){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)__webpack_require__.d(r,n,function(e){return t[e]}.bind(null,n));return r},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=92)}([function(t,e,r){"use strict";t.exports=r(50)},function(t,e,r){t.exports=r(53)},function(t,e){t.exports=function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e){function _extends(){return t.exports=_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_extends.apply(this,arguments)}t.exports=_extends},function(t,e){t.exports=function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}},function(t,e,r){"use strict";var n=r(31),i=r(55),s=Object.prototype.toString;function isArray(t){return"[object Array]"===s.call(t)}function isObject(t){return null!==t&&"object"==typeof t}function isFunction(t){return"[object Function]"===s.call(t)}function forEach(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),isArray(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:isArray,isArrayBuffer:function isArrayBuffer(t){return"[object ArrayBuffer]"===s.call(t)},isBuffer:i,isFormData:function isFormData(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function isArrayBufferView(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function isString(t){return"string"==typeof t},isNumber:function isNumber(t){return"number"==typeof t},isObject:isObject,isUndefined:function isUndefined(t){return void 0===t},isDate:function isDate(t){return"[object Date]"===s.call(t)},isFile:function isFile(t){return"[object File]"===s.call(t)},isBlob:function isBlob(t){return"[object Blob]"===s.call(t)},isFunction:isFunction,isStream:function isStream(t){return isObject(t)&&isFunction(t.pipe)},isURLSearchParams:function isURLSearchParams(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:forEach,merge:function merge(){var t={};function assignValue(e,r){"object"==typeof t[r]&&"object"==typeof e?t[r]=merge(t[r],e):t[r]=e}for(var e=0,r=arguments.length;e<r;e++)forEach(arguments[e],assignValue);return t},deepMerge:function deepMerge(){var t={};function assignValue(e,r){"object"==typeof t[r]&&"object"==typeof e?t[r]=deepMerge(t[r],e):t[r]="object"==typeof e?deepMerge({},e):e}for(var e=0,r=arguments.length;e<r;e++)forEach(arguments[e],assignValue);return t},extend:function extend(t,e,r){return forEach(e,(function assignValue(e,i){t[i]=r&&"function"==typeof e?n(e,r):e})),t},trim:function trim(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,r){var n=r(25),i=r(51),s=r(26);t.exports=function _slicedToArray(t,e){return n(t)||i(t,e)||s()}},function(t,e,r){var n=r(80),i=r(30),s=r(81);t.exports=function _toConsumableArray(t){return n(t)||i(t)||s()}},function(t,e,r){t.exports=r(54)},function(t,e,r){var n=r(21),i=r(48);t.exports=function _possibleConstructorReturn(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?i(t):e}},function(t,e){function _getPrototypeOf(e){return t.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(e)}t.exports=_getPrototypeOf},function(t,e,r){var n=r(49);t.exports=function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e){t.exports=require("url")},function(t,e){t.exports=require("http")},function(t,e){var r={userAgent:!1},i={};
/*!
Copyright (c) 2011, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.9.0
*/
if(void 0===s)var s={};s.lang={extend:function(t,n,i){if(!n||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var d=function(){};if(d.prototype=n.prototype,t.prototype=new d,t.prototype.constructor=t,t.superclass=n.prototype,n.prototype.constructor==Object.prototype.constructor&&(n.prototype.constructor=n),i){var s;for(s in i)t.prototype[s]=i[s];var e=function(){},o=["toString","valueOf"];try{/MSIE/.test(r.userAgent)&&(e=function(t,e){for(s=0;s<o.length;s+=1){var r=o[s],n=e[r];"function"==typeof n&&n!=Object.prototype[r]&&(t[r]=n)}})}catch(t){}e(t.prototype,i)}}};
/*! CryptoJS v3.1.2 core-fix.js
 * code.google.com/p/crypto-js
 * (c) 2009-2013 by Jeff Mott. All rights reserved.
 * code.google.com/p/crypto-js/wiki/License
 * THIS IS FIX of 'core.js' to fix Hmac issue.
 * https://code.google.com/p/crypto-js/issues/detail?id=84
 * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
 */
var o,c,u,f,p,d,g,y,v,m,b,S=S||(o=Math,u=(c={}).lib={},f=u.Base=function(){function n(){}return{extend:function(t){n.prototype=this;var e=new n;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),p=u.WordArray=f.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||g).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,i=t.sigBytes;if(this.clamp(),n%4)for(var s=0;s<i;s++){var o=r[s>>>2]>>>24-s%4*8&255;e[n+s>>>2]|=o<<24-(n+s)%4*8}else for(s=0;s<i;s+=4)e[n+s>>>2]=r[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=o.ceil(e/4)},clone:function(){var t=f.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(4294967296*o.random()|0);return new p.init(e,t)}}),d=c.enc={},g=d.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var s=e[i>>>2]>>>24-i%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new p.init(r,e/2)}},y=d.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var s=e[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new p.init(r,e)}},v=d.Utf8={stringify:function(t){try{return decodeURIComponent(escape(y.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return y.parse(unescape(encodeURIComponent(t)))}},m=u.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=v.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,r=e.words,n=e.sigBytes,i=this.blockSize,s=n/(4*i),a=(s=t?o.ceil(s):o.max((0|s)-this._minBufferSize,0))*i,c=o.min(4*a,n);if(a){for(var u=0;u<a;u+=i)this._doProcessBlock(r,u);var h=r.splice(0,a);e.sigBytes-=c}return new p.init(h,c)},clone:function(){var t=f.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),u.Hasher=m.extend({cfg:f.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new b.HMAC.init(t,r).finalize(e)}}}),b=c.algo={},c);!function(t){var e,r=(e=S).lib,n=r.Base,i=r.WordArray;(e=e.x64={}).Word=n.extend({init:function(t,e){this.high=t,this.low=e}}),e.WordArray=n.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,r=[],n=0;n<e;n++){var s=t[n];r.push(s.high),r.push(s.low)}return i.create(r,this.sigBytes)},clone:function(){for(var t=n.clone.call(this),e=t.words=this.words.slice(0),r=e.length,i=0;i<r;i++)e[i]=e[i].clone();return t}})}(),S.lib.Cipher||function(e){var r=(p=S).lib,n=r.Base,i=r.WordArray,s=r.BufferedBlockAlgorithm,o=p.enc.Base64,a=p.algo.EvpKDF,c=r.Cipher=s.extend({cfg:n.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,r,n){return("string"==typeof r?d:f).encrypt(t,e,r,n)},decrypt:function(e,r,n){return("string"==typeof r?d:f).decrypt(t,e,r,n)}}}});r.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=p.mode={},t=function(t,e,r){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var i=0;i<r;i++)t[e+i]^=n[i]},h=(r.BlockCipherMode=n.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();h.Encryptor=h.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize;t.call(this,e,r,i),n.encryptBlock(e,r),this._prevBlock=e.slice(r,r+i)}}),h.Decryptor=h.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize,s=e.slice(r,r+i);n.decryptBlock(e,r),t.call(this,e,r,i),this._prevBlock=s}}),u=u.CBC=h,h=(p.pad={}).Pkcs7={pad:function(t,e){for(var r,n=(r=(r=4*e)-t.sigBytes%r)<<24|r<<16|r<<8|r,s=[],o=0;o<r;o+=4)s.push(n);r=i.create(s,r),t.concat(r)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},r.BlockCipher=c.extend({cfg:c.cfg.extend({mode:u,padding:h}),reset:function(){c.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=e.createEncryptor;else r=e.createDecryptor,this._minBufferSize=1;this._mode=r.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var l=r.CipherParams=n.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),f=(u=(p.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?i.create([1398893684,1701076831]).concat(t).concat(e):e).toString(o)},parse:function(t){var e=(t=o.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var r=i.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return l.create({ciphertext:t,salt:r})}},r.SerializableCipher=n.extend({cfg:n.extend({format:u}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var i=t.createEncryptor(r,n);return e=i.finalize(e),i=i.cfg,l.create({ciphertext:e,key:r,iv:i.iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(r,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),p=(p.kdf={}).OpenSSL={execute:function(t,e,r,n){return n||(n=i.random(8)),t=a.create({keySize:e+r}).compute(t,n),r=i.create(t.words.slice(e),4*r),t.sigBytes=4*e,l.create({key:t,iv:r,salt:n})}},d=r.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:p}),encrypt:function(t,e,r,n){return r=(n=this.cfg.extend(n)).kdf.execute(r,t.keySize,t.ivSize),n.iv=r.iv,(t=f.encrypt.call(this,t,e,r.key,n)).mixIn(r),t},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),r=n.kdf.execute(r,t.keySize,t.ivSize,e.salt),n.iv=r.iv,f.decrypt.call(this,t,e,r.key,n)}})}(),function(){for(var t=S,e=t.lib.BlockCipher,r=t.algo,n=[],i=[],s=[],o=[],a=[],c=[],u=[],h=[],l=[],f=[],p=[],d=0;256>d;d++)p[d]=128>d?d<<1:d<<1^283;var g=0,y=0;for(d=0;256>d;d++){var v=(v=y^y<<1^y<<2^y<<3^y<<4)>>>8^255&v^99;n[g]=v,i[v]=g;var m=p[g],b=p[m],x=p[b],w=257*p[v]^16843008*v;s[g]=w<<24|w>>>8,o[g]=w<<16|w>>>16,a[g]=w<<8|w>>>24,c[g]=w,w=16843009*x^65537*b^257*m^16843008*g,u[v]=w<<24|w>>>8,h[v]=w<<16|w>>>16,l[v]=w<<8|w>>>24,f[v]=w,g?(g=m^p[p[p[x^m]]],y^=p[p[y]]):g=y=1}var E=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=e.extend({_doReset:function(){for(var t=(r=this._key).words,e=r.sigBytes/4,r=4*((this._nRounds=e+6)+1),i=this._keySchedule=[],s=0;s<r;s++)if(s<e)i[s]=t[s];else{var o=i[s-1];s%e?6<e&&4==s%e&&(o=n[o>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o]):(o=n[(o=o<<8|o>>>24)>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o],o^=E[s/e|0]<<24),i[s]=i[s-e]^o}for(t=this._invKeySchedule=[],e=0;e<r;e++)s=r-e,o=e%4?i[s]:i[s-4],t[e]=4>e||4>=s?o:u[n[o>>>24]]^h[n[o>>>16&255]]^l[n[o>>>8&255]]^f[n[255&o]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,o,a,c,n)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,u,h,l,f,i),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,n,i,s,o,a){for(var c=this._nRounds,u=t[e]^r[0],h=t[e+1]^r[1],l=t[e+2]^r[2],f=t[e+3]^r[3],p=4,d=1;d<c;d++){var g=n[u>>>24]^i[h>>>16&255]^s[l>>>8&255]^o[255&f]^r[p++],y=n[h>>>24]^i[l>>>16&255]^s[f>>>8&255]^o[255&u]^r[p++],v=n[l>>>24]^i[f>>>16&255]^s[u>>>8&255]^o[255&h]^r[p++];f=n[f>>>24]^i[u>>>16&255]^s[h>>>8&255]^o[255&l]^r[p++],u=g,h=y,l=v}g=(a[u>>>24]<<24|a[h>>>16&255]<<16|a[l>>>8&255]<<8|a[255&f])^r[p++],y=(a[h>>>24]<<24|a[l>>>16&255]<<16|a[f>>>8&255]<<8|a[255&u])^r[p++],v=(a[l>>>24]<<24|a[f>>>16&255]<<16|a[u>>>8&255]<<8|a[255&h])^r[p++],f=(a[f>>>24]<<24|a[u>>>16&255]<<16|a[h>>>8&255]<<8|a[255&l])^r[p++],t[e]=g,t[e+1]=y,t[e+2]=v,t[e+3]=f},keySize:8});t.AES=e._createHelper(r)}(),function(){function j(t,e){var r=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=r,this._lBlock^=r<<t}function l(t,e){var r=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=r,this._rBlock^=r<<t}var t=S,e=(r=t.lib).WordArray,r=r.BlockCipher,n=t.algo,i=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],o=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],a=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],u=n.DES=r.extend({_doReset:function(){for(var t=this._key.words,e=[],r=0;56>r;r++){var n=i[r]-1;e[r]=t[n>>>5]>>>31-n%32&1}for(t=this._subKeys=[],n=0;16>n;n++){var a=t[n]=[],c=o[n];for(r=0;24>r;r++)a[r/6|0]|=e[(s[r]-1+c)%28]<<31-r%6,a[4+(r/6|0)]|=e[28+(s[r+24]-1+c)%28]<<31-r%6;for(a[0]=a[0]<<1|a[0]>>>31,r=1;7>r;r++)a[r]>>>=4*(r-1)+3;a[7]=a[7]<<5|a[7]>>>27}for(e=this._invSubKeys=[],r=0;16>r;r++)e[r]=t[15-r]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,r){this._lBlock=t[e],this._rBlock=t[e+1],j.call(this,4,252645135),j.call(this,16,65535),l.call(this,2,858993459),l.call(this,8,16711935),j.call(this,1,1431655765);for(var n=0;16>n;n++){for(var i=r[n],s=this._lBlock,o=this._rBlock,u=0,h=0;8>h;h++)u|=a[h][((o^i[h])&c[h])>>>0];this._lBlock=o,this._rBlock=s^u}r=this._lBlock,this._lBlock=this._rBlock,this._rBlock=r,j.call(this,1,1431655765),l.call(this,8,16711935),l.call(this,2,858993459),j.call(this,16,65535),j.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});t.DES=r._createHelper(u),n=n.TripleDES=r.extend({_doReset:function(){var t=this._key.words;this._des1=u.createEncryptor(e.create(t.slice(0,2))),this._des2=u.createEncryptor(e.create(t.slice(2,4))),this._des3=u.createEncryptor(e.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2}),t.TripleDES=r._createHelper(n)}(),function(){var t=S,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp(),t=[];for(var i=0;i<r;i+=3)for(var s=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;4>o&&i+.75*o<r;o++)t.push(n.charAt(s>>>6*(3-o)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var r=t.length,n=this._map;(i=n.charAt(64))&&(-1!=(i=t.indexOf(i))&&(r=i));for(var i=[],s=0,o=0;o<r;o++)if(o%4){var a=n.indexOf(t.charAt(o-1))<<o%4*2,c=n.indexOf(t.charAt(o))>>>6-o%4*2;i[s>>>2]|=(a|c)<<24-s%4*8,s++}return e.create(i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function h(t,e,r,n,i,s,o){return((t=t+(e&r|~e&n)+i+o)<<s|t>>>32-s)+e}function k(t,e,r,n,i,s,o){return((t=t+(e&n|r&~n)+i+o)<<s|t>>>32-s)+e}function l(t,e,r,n,i,s,o){return((t=t+(e^r^n)+i+o)<<s|t>>>32-s)+e}function n(t,e,r,n,i,s,o){return((t=t+(r^(e|~n))+i+o)<<s|t>>>32-s)+e}for(var e=S,r=(s=e.lib).WordArray,i=s.Hasher,s=e.algo,o=[],a=0;64>a;a++)o[a]=4294967296*t.abs(t.sin(a+1))|0;s=s.MD5=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var r=0;16>r;r++){var i=t[s=e+r];t[s]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}r=this._hash.words;var s=t[e+0],a=(i=t[e+1],t[e+2]),c=t[e+3],u=t[e+4],f=t[e+5],p=t[e+6],d=t[e+7],g=t[e+8],y=t[e+9],v=t[e+10],m=t[e+11],b=t[e+12],S=t[e+13],x=t[e+14],w=t[e+15],E=h(E=r[0],A=r[1],F=r[2],_=r[3],s,7,o[0]),_=h(_,E,A,F,i,12,o[1]),F=h(F,_,E,A,a,17,o[2]),A=h(A,F,_,E,c,22,o[3]);E=h(E,A,F,_,u,7,o[4]),_=h(_,E,A,F,f,12,o[5]),F=h(F,_,E,A,p,17,o[6]),A=h(A,F,_,E,d,22,o[7]),E=h(E,A,F,_,g,7,o[8]),_=h(_,E,A,F,y,12,o[9]),F=h(F,_,E,A,v,17,o[10]),A=h(A,F,_,E,m,22,o[11]),E=h(E,A,F,_,b,7,o[12]),_=h(_,E,A,F,S,12,o[13]),F=h(F,_,E,A,x,17,o[14]),E=k(E,A=h(A,F,_,E,w,22,o[15]),F,_,i,5,o[16]),_=k(_,E,A,F,p,9,o[17]),F=k(F,_,E,A,m,14,o[18]),A=k(A,F,_,E,s,20,o[19]),E=k(E,A,F,_,f,5,o[20]),_=k(_,E,A,F,v,9,o[21]),F=k(F,_,E,A,w,14,o[22]),A=k(A,F,_,E,u,20,o[23]),E=k(E,A,F,_,y,5,o[24]),_=k(_,E,A,F,x,9,o[25]),F=k(F,_,E,A,c,14,o[26]),A=k(A,F,_,E,g,20,o[27]),E=k(E,A,F,_,S,5,o[28]),_=k(_,E,A,F,a,9,o[29]),F=k(F,_,E,A,d,14,o[30]),E=l(E,A=k(A,F,_,E,b,20,o[31]),F,_,f,4,o[32]),_=l(_,E,A,F,g,11,o[33]),F=l(F,_,E,A,m,16,o[34]),A=l(A,F,_,E,x,23,o[35]),E=l(E,A,F,_,i,4,o[36]),_=l(_,E,A,F,u,11,o[37]),F=l(F,_,E,A,d,16,o[38]),A=l(A,F,_,E,v,23,o[39]),E=l(E,A,F,_,S,4,o[40]),_=l(_,E,A,F,s,11,o[41]),F=l(F,_,E,A,c,16,o[42]),A=l(A,F,_,E,p,23,o[43]),E=l(E,A,F,_,y,4,o[44]),_=l(_,E,A,F,b,11,o[45]),F=l(F,_,E,A,w,16,o[46]),E=n(E,A=l(A,F,_,E,a,23,o[47]),F,_,s,6,o[48]),_=n(_,E,A,F,d,10,o[49]),F=n(F,_,E,A,x,15,o[50]),A=n(A,F,_,E,f,21,o[51]),E=n(E,A,F,_,b,6,o[52]),_=n(_,E,A,F,c,10,o[53]),F=n(F,_,E,A,v,15,o[54]),A=n(A,F,_,E,i,21,o[55]),E=n(E,A,F,_,g,6,o[56]),_=n(_,E,A,F,w,10,o[57]),F=n(F,_,E,A,p,15,o[58]),A=n(A,F,_,E,S,21,o[59]),E=n(E,A,F,_,u,6,o[60]),_=n(_,E,A,F,m,10,o[61]),F=n(F,_,E,A,a,15,o[62]),A=n(A,F,_,E,y,21,o[63]);r[0]=r[0]+E|0,r[1]=r[1]+A|0,r[2]=r[2]+F|0,r[3]=r[3]+_|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var s=t.floor(n/4294967296);for(r[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(r.length+1),this._process(),r=(e=this._hash).words,n=0;4>n;n++)i=r[n],r[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}}),e.MD5=i._createHelper(s),e.HmacMD5=i._createHmacHelper(s)}(Math),function(){var t=S,e=(i=t.lib).WordArray,r=i.Hasher,n=[],i=t.algo.SHA1=r.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,i=r[0],s=r[1],o=r[2],a=r[3],c=r[4],u=0;80>u;u++){if(16>u)n[u]=0|t[e+u];else{var h=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=h<<1|h>>>31}h=(i<<5|i>>>27)+c+n[u],h=20>u?h+(1518500249+(s&o|~s&a)):40>u?h+(1859775393+(s^o^a)):60>u?h+((s&o|s&a|o&a)-1894007588):h+((s^o^a)-899497514),c=a,a=o,o=s<<30|s>>>2,s=i,i=h}r[0]=r[0]+i|0,r[1]=r[1]+s|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),e[15+(n+64>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=r._createHelper(i),t.HmacSHA1=r._createHmacHelper(i)}(),function(t){for(var e=S,r=(i=e.lib).WordArray,n=i.Hasher,i=e.algo,s=[],o=[],u=function(t){return 4294967296*(t-(0|t))|0},a=2,c=0;64>c;){var h;t:{h=a;for(var l=t.sqrt(h),f=2;f<=l;f++)if(!(h%f)){h=!1;break t}h=!0}h&&(8>c&&(s[c]=u(t.pow(a,.5))),o[c]=u(t.pow(a,1/3)),c++),a++}var p=[];i=i.SHA256=n.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],a=r[3],c=r[4],u=r[5],h=r[6],l=r[7],f=0;64>f;f++){if(16>f)p[f]=0|t[e+f];else{var d=p[f-15],g=p[f-2];p[f]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+p[f-16]}d=l+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&h)+o[f]+p[f],g=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&i^n&s^i&s),l=h,h=u,u=c,c=a+d|0,a=s,s=i,i=n,n=d+g|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+a|0,r[4]=r[4]+c|0,r[5]=r[5]+u|0,r[6]=r[6]+h|0,r[7]=r[7]+l|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=t.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=n._createHelper(i),e.HmacSHA256=n._createHmacHelper(i)}(Math),function(){var t=S,e=t.lib.WordArray,r=(n=t.algo).SHA256,n=n.SHA224=r.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=r._doFinalize.call(this);return t.sigBytes-=4,t}});t.SHA224=r._createHelper(n),t.HmacSHA224=r._createHmacHelper(n)}(),function(){function a(){return r.create.apply(r,arguments)}for(var t=S,e=t.lib.Hasher,r=(i=t.x64).Word,n=i.WordArray,i=t.algo,s=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],o=[],c=0;80>c;c++)o[c]=a();i=i.SHA512=e.extend({_doReset:function(){this._hash=new n.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var r=(l=this._hash.words)[0],n=l[1],i=l[2],a=l[3],c=l[4],u=l[5],h=l[6],l=l[7],f=r.high,p=r.low,d=n.high,g=n.low,y=i.high,v=i.low,m=a.high,b=a.low,S=c.high,x=c.low,w=u.high,E=u.low,_=h.high,F=h.low,A=l.high,C=l.low,T=f,P=p,I=d,R=g,O=y,B=v,k=m,D=b,H=S,N=x,j=w,L=E,M=_,U=F,q=A,V=C,K=0;80>K;K++){var z=o[K];if(16>K)var G=z.high=0|t[e+2*K],W=z.low=0|t[e+2*K+1];else{G=((W=(G=o[K-15]).high)>>>1|(J=G.low)<<31)^(W>>>8|J<<24)^W>>>7;var J=(J>>>1|W<<31)^(J>>>8|W<<24)^(J>>>7|W<<25),Y=((W=(Y=o[K-2]).high)>>>19|(X=Y.low)<<13)^(W<<3|X>>>29)^W>>>6,X=(X>>>19|W<<13)^(X<<3|W>>>29)^(X>>>6|W<<26),$=(W=o[K-7]).high,Z=(Q=o[K-16]).high,Q=Q.low;G=(G=(G=G+$+((W=J+W.low)>>>0<J>>>0?1:0))+Y+((W=W+X)>>>0<X>>>0?1:0))+Z+((W=W+Q)>>>0<Q>>>0?1:0);z.high=G,z.low=W}$=H&j^~H&M,Q=N&L^~N&U,z=T&I^T&O^I&O;var tt=P&R^P&B^R&B,et=(J=(T>>>28|P<<4)^(T<<30|P>>>2)^(T<<25|P>>>7),Y=(P>>>28|T<<4)^(P<<30|T>>>2)^(P<<25|T>>>7),(X=s[K]).high),rt=X.low;Z=q+((H>>>14|N<<18)^(H>>>18|N<<14)^(H<<23|N>>>9))+((X=V+((N>>>14|H<<18)^(N>>>18|H<<14)^(N<<23|H>>>9)))>>>0<V>>>0?1:0),q=M,V=U,M=j,U=L,j=H,L=N,H=k+(Z=(Z=(Z=Z+$+((X=X+Q)>>>0<Q>>>0?1:0))+et+((X=X+rt)>>>0<rt>>>0?1:0))+G+((X=X+W)>>>0<W>>>0?1:0))+((N=D+X|0)>>>0<D>>>0?1:0)|0,k=O,D=B,O=I,B=R,I=T,R=P,T=Z+(z=J+z+((W=Y+tt)>>>0<Y>>>0?1:0))+((P=X+W|0)>>>0<X>>>0?1:0)|0}p=r.low=p+P,r.high=f+T+(p>>>0<P>>>0?1:0),g=n.low=g+R,n.high=d+I+(g>>>0<R>>>0?1:0),v=i.low=v+B,i.high=y+O+(v>>>0<B>>>0?1:0),b=a.low=b+D,a.high=m+k+(b>>>0<D>>>0?1:0),x=c.low=x+N,c.high=S+H+(x>>>0<N>>>0?1:0),E=u.low=E+L,u.high=w+j+(E>>>0<L>>>0?1:0),F=h.low=F+U,h.high=_+M+(F>>>0<U>>>0?1:0),C=l.low=C+V,l.high=A+q+(C>>>0<V>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),e[31+(n+128>>>10<<5)]=r,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32}),t.SHA512=e._createHelper(i),t.HmacSHA512=e._createHmacHelper(i)}(),function(){var t=S,e=(i=t.x64).Word,r=i.WordArray,n=(i=t.algo).SHA512,i=i.SHA384=n.extend({_doReset:function(){this._hash=new r.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function(){var t=n._doFinalize.call(this);return t.sigBytes-=16,t}});t.SHA384=n._createHelper(i),t.HmacSHA384=n._createHmacHelper(i)}(),function(){var t=S,e=(n=t.lib).WordArray,r=n.Hasher,n=t.algo,i=e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=e.create([0,1518500249,1859775393,2400959708,2840853838]),u=e.create([1352829926,1548603684,1836072691,2053994217,0]);n=n.RIPEMD160=r.extend({_doReset:function(){this._hash=e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=0;16>r;r++){var n=t[S=e+r];t[S]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var h,l,f,p,d,g,y,v,m,b,S=this._hash.words,x=(n=c.words,u.words),w=i.words,E=s.words,_=o.words,F=a.words;g=h=S[0],y=l=S[1],v=f=S[2],m=p=S[3],b=d=S[4];var A;for(r=0;80>r;r+=1)A=h+t[e+w[r]]|0,A=16>r?A+((l^f^p)+n[0]):32>r?A+((l&f|~l&p)+n[1]):48>r?A+(((l|~f)^p)+n[2]):64>r?A+((l&p|f&~p)+n[3]):A+((l^(f|~p))+n[4]),A=(A=(A|=0)<<_[r]|A>>>32-_[r])+d|0,h=d,d=p,p=f<<10|f>>>22,f=l,l=A,A=g+t[e+E[r]]|0,A=16>r?A+((y^(v|~m))+x[0]):32>r?A+((y&m|v&~m)+x[1]):48>r?A+(((y|~v)^m)+x[2]):64>r?A+((y&v|~y&m)+x[3]):A+((y^v^m)+x[4]),A=(A=(A|=0)<<F[r]|A>>>32-F[r])+b|0,g=b,b=m,m=v<<10|v>>>22,v=y,y=A;A=S[1]+f+m|0,S[1]=S[2]+p+b|0,S[2]=S[3]+d+g|0,S[3]=S[4]+h+y|0,S[4]=S[0]+l+v|0,S[0]=A},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;for(e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(e.length+1),this._process(),e=(t=this._hash).words,r=0;5>r;r++)n=e[r],e[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return t},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});t.RIPEMD160=r._createHelper(n),t.HmacRIPEMD160=r._createHmacHelper(n)}(Math),function(){var t=S,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,r){t=this._hasher=new t.init,"string"==typeof r&&(r=e.parse(r));var n=t.blockSize,i=4*n;r.sigBytes>i&&(r=t.finalize(r)),r.clamp();for(var s=this._oKey=r.clone(),o=this._iKey=r.clone(),a=s.words,c=o.words,u=0;u<n;u++)a[u]^=1549556828,c[u]^=909522486;s.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t,e=S,r=(t=e.lib).Base,n=t.WordArray,i=(t=e.algo).HMAC,s=t.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){var r=this.cfg,s=i.create(r.hasher,t),o=n.create(),a=n.create([1]),c=o.words,u=a.words,h=r.keySize;for(r=r.iterations;c.length<h;){var l=s.update(e).finalize(a);s.reset();for(var f=l.words,p=f.length,d=l,g=1;g<r;g++){d=s.finalize(d),s.reset();for(var y=d.words,v=0;v<p;v++)f[v]^=y[v]}o.concat(l),u[0]++}return o.sigBytes=4*h,o}});e.PBKDF2=function(t,e,r){return s.create(r).compute(t,e)}}();
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
var w,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_="=";function hex2b64(t){var e,r,n="";for(e=0;e+3<=t.length;e+=3)r=parseInt(t.substring(e,e+3),16),n+=E.charAt(r>>6)+E.charAt(63&r);if(e+1==t.length?(r=parseInt(t.substring(e,e+1),16),n+=E.charAt(r<<2)):e+2==t.length&&(r=parseInt(t.substring(e,e+2),16),n+=E.charAt(r>>2)+E.charAt((3&r)<<4)),_)for(;(3&n.length)>0;)n+=_;return n}function b64tohex(t){var e,r,n,i="",s=0;for(e=0;e<t.length&&t.charAt(e)!=_;++e)(n=E.indexOf(t.charAt(e)))<0||(0==s?(i+=int2char(n>>2),r=3&n,s=1):1==s?(i+=int2char(r<<2|n>>4),r=15&n,s=2):2==s?(i+=int2char(r),i+=int2char(n>>2),r=3&n,s=3):(i+=int2char(r<<2|n>>4),i+=int2char(15&n),s=0));return 1==s&&(i+=int2char(r<<2)),i}function b64toBA(t){var e,r=b64tohex(t),n=new Array;for(e=0;2*e<r.length;++e)n[e]=parseInt(r.substring(2*e,2*e+2),16);return n}function BigInteger(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function nbi(){return new BigInteger(null)}"Microsoft Internet Explorer"==r.appName?(BigInteger.prototype.am=function am2(t,e,r,n,i,s){for(var o=32767&e,a=e>>15;--s>=0;){var c=32767&this[t],u=this[t++]>>15,h=a*c+u*o;i=((c=o*c+((32767&h)<<15)+r[n]+(1073741823&i))>>>30)+(h>>>15)+a*u+(i>>>30),r[n++]=1073741823&c}return i},w=30):"Netscape"!=r.appName?(BigInteger.prototype.am=function am1(t,e,r,n,i,s){for(;--s>=0;){var o=e*this[t++]+r[n]+i;i=Math.floor(o/67108864),r[n++]=67108863&o}return i},w=26):(BigInteger.prototype.am=function am3(t,e,r,n,i,s){for(var o=16383&e,a=e>>14;--s>=0;){var c=16383&this[t],u=this[t++]>>14,h=a*c+u*o;i=((c=o*c+((16383&h)<<14)+r[n]+i)>>28)+(h>>14)+a*u,r[n++]=268435455&c}return i},w=28),BigInteger.prototype.DB=w,BigInteger.prototype.DM=(1<<w)-1,BigInteger.prototype.DV=1<<w;BigInteger.prototype.FV=Math.pow(2,52),BigInteger.prototype.F1=52-w,BigInteger.prototype.F2=2*w-52;var F,C,T="0123456789abcdefghijklmnopqrstuvwxyz",P=new Array;for(F="0".charCodeAt(0),C=0;C<=9;++C)P[F++]=C;for(F="a".charCodeAt(0),C=10;C<36;++C)P[F++]=C;for(F="A".charCodeAt(0),C=10;C<36;++C)P[F++]=C;function int2char(t){return T.charAt(t)}function intAt(t,e){var r=P[t.charCodeAt(e)];return null==r?-1:r}function nbv(t){var e=nbi();return e.fromInt(t),e}function nbits(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function Classic(t){this.m=t}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function op_and(t,e){return t&e}function op_or(t,e){return t|e}function op_xor(t,e){return t^e}function op_andnot(t,e){return t&~e}function lbit(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function cbit(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function NullExp(){}function nNop(t){return t}function Barrett(t){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}Classic.prototype.convert=function cConvert(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},Classic.prototype.revert=function cRevert(t){return t},Classic.prototype.reduce=function cReduce(t){t.divRemTo(this.m,null,t)},Classic.prototype.mulTo=function cMulTo(t,e,r){t.multiplyTo(e,r),this.reduce(r)},Classic.prototype.sqrTo=function cSqrTo(t,e){t.squareTo(e),this.reduce(e)},Montgomery.prototype.convert=function montConvert(t){var e=nbi();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(BigInteger.ZERO)>0&&this.m.subTo(e,e),e},Montgomery.prototype.revert=function montRevert(t){var e=nbi();return t.copyTo(e),this.reduce(e),e},Montgomery.prototype.reduce=function montReduce(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[r=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},Montgomery.prototype.mulTo=function montMulTo(t,e,r){t.multiplyTo(e,r),this.reduce(r)},Montgomery.prototype.sqrTo=function montSqrTo(t,e){t.squareTo(e),this.reduce(e)},BigInteger.prototype.copyTo=function bnpCopyTo(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},BigInteger.prototype.fromInt=function bnpFromInt(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},BigInteger.prototype.fromString=function bnpFromString(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var n=t.length,i=!1,s=0;--n>=0;){var o=8==r?255&t[n]:intAt(t,n);o<0?"-"==t.charAt(n)&&(i=!0):(i=!1,0==s?this[this.t++]=o:s+r>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&BigInteger.ZERO.subTo(this,this)},BigInteger.prototype.clamp=function bnpClamp(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},BigInteger.prototype.dlShiftTo=function bnpDLShiftTo(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s},BigInteger.prototype.drShiftTo=function bnpDRShiftTo(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s},BigInteger.prototype.lShiftTo=function bnpLShiftTo(t,e){var r,n=t%this.DB,i=this.DB-n,s=(1<<i)-1,o=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e[r+o+1]=this[r]>>i|a,a=(this[r]&s)<<n;for(r=o-1;r>=0;--r)e[r]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()},BigInteger.prototype.rShiftTo=function bnpRShiftTo(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e[0]=this[r]>>n;for(var o=r+1;o<this.t;++o)e[o-r-1]|=(this[o]&s)<<i,e[o-r]=this[o]>>n;n>0&&(e[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}},BigInteger.prototype.subTo=function bnpSubTo(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()},BigInteger.prototype.multiplyTo=function bnpMultiplyTo(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e[i]=0;for(i=0;i<n.t;++i)e[i+r.t]=r.am(0,n[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&BigInteger.ZERO.subTo(e,e)},BigInteger.prototype.squareTo=function bnpSquareTo(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()},BigInteger.prototype.divRemTo=function bnpDivRemTo(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=nbi());var s=nbi(),o=this.s,a=t.s,c=this.DB-nbits(n[n.t-1]);c>0?(n.lShiftTo(c,s),i.lShiftTo(c,r)):(n.copyTo(s),i.copyTo(r));var u=s.t,h=s[u-1];if(0!=h){var l=h*(1<<this.F1)+(u>1?s[u-2]>>this.F2:0),f=this.FV/l,p=(1<<this.F1)/l,d=1<<this.F2,g=r.t,y=g-u,v=null==e?nbi():e;for(s.dlShiftTo(y,v),r.compareTo(v)>=0&&(r[r.t++]=1,r.subTo(v,r)),BigInteger.ONE.dlShiftTo(u,v),v.subTo(s,s);s.t<u;)s[s.t++]=0;for(;--y>=0;){var m=r[--g]==h?this.DM:Math.floor(r[g]*f+(r[g-1]+d)*p);if((r[g]+=s.am(0,m,r,y,0,u))<m)for(s.dlShiftTo(y,v),r.subTo(v,r);r[g]<--m;)r.subTo(v,r)}null!=e&&(r.drShiftTo(u,e),o!=a&&BigInteger.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),o<0&&BigInteger.ZERO.subTo(r,r)}}},BigInteger.prototype.invDigit=function bnpInvDigit(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},BigInteger.prototype.isEven=function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)},BigInteger.prototype.exp=function bnpExp(t,e){if(t>4294967295||t<1)return BigInteger.ONE;var r=nbi(),n=nbi(),i=e.convert(this),s=nbits(t)-1;for(i.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,i,r);else{var o=r;r=n,n=o}return e.revert(r)},BigInteger.prototype.toString=function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(r=this[o]>>a)>0&&(i=!0,s=int2char(r));o>=0;)a<e?(r=(this[o]&(1<<a)-1)<<e-a,r|=this[--o]>>(a+=this.DB-e)):(r=this[o]>>(a-=e)&n,a<=0&&(a+=this.DB,--o)),r>0&&(i=!0),i&&(s+=int2char(r));return i?s:"0"},BigInteger.prototype.negate=function bnNegate(){var t=nbi();return BigInteger.ZERO.subTo(this,t),t},BigInteger.prototype.abs=function bnAbs(){return this.s<0?this.negate():this},BigInteger.prototype.compareTo=function bnCompareTo(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this[r]-t[r]))return e;return 0},BigInteger.prototype.bitLength=function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)},BigInteger.prototype.mod=function bnMod(t){var e=nbi();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(BigInteger.ZERO)>0&&t.subTo(e,e),e},BigInteger.prototype.modPowInt=function bnModPowInt(t,e){var r;return r=t<256||e.isEven()?new Classic(e):new Montgomery(e),this.exp(t,r)},BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=function nMulTo(t,e,r){t.multiplyTo(e,r)},NullExp.prototype.sqrTo=function nSqrTo(t,e){t.squareTo(e)},Barrett.prototype.convert=function barrettConvert(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=nbi();return t.copyTo(e),this.reduce(e),e},Barrett.prototype.revert=function barrettRevert(t){return t},Barrett.prototype.reduce=function barrettReduce(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},Barrett.prototype.mulTo=function barrettMulTo(t,e,r){t.multiplyTo(e,r),this.reduce(r)},Barrett.prototype.sqrTo=function barrettSqrTo(t,e){t.squareTo(e),this.reduce(e)};var I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],R=(1<<26)/I[I.length-1];
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function Arcfour(){this.i=0,this.j=0,this.S=new Array}BigInteger.prototype.chunkSize=function bnpChunkSize(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},BigInteger.prototype.toRadix=function bnpToRadix(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=nbv(r),i=nbi(),s=nbi(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(t).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(t)+o},BigInteger.prototype.fromRadix=function bnpFromRadix(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,o=0,a=0;a<t.length;++a){var c=intAt(t,a);c<0?"-"==t.charAt(a)&&0==this.signum()&&(i=!0):(o=e*o+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&BigInteger.ZERO.subTo(this,this)},BigInteger.prototype.fromNumber=function bnpFromNumber(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(t-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(BigInteger.ONE.shiftLeft(t-1),this);else{var n=new Array,i=7&t;n.length=1+(t>>3),e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},BigInteger.prototype.bitwiseTo=function bnpBitwiseTo(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r[n]=e(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r[n]=e(i,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},BigInteger.prototype.changeBit=function bnpChangeBit(t,e){var r=BigInteger.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},BigInteger.prototype.addTo=function bnpAddTo(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()},BigInteger.prototype.dMultiply=function bnpDMultiply(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},BigInteger.prototype.dAddOffset=function bnpDAddOffset(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},BigInteger.prototype.multiplyLowerTo=function bnpMultiplyLowerTo(t,e,r){var n,i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,t[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t[i],r,i,0,e-i);r.clamp()},BigInteger.prototype.multiplyUpperTo=function bnpMultiplyUpperTo(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},BigInteger.prototype.modInt=function bnpModInt(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r},BigInteger.prototype.millerRabin=function bnpMillerRabin(t){var e=this.subtract(BigInteger.ONE),r=e.getLowestSetBit();if(r<=0)return!1;var n=e.shiftRight(r);(t=t+1>>1)>I.length&&(t=I.length);for(var i=nbi(),s=0;s<t;++s){i.fromInt(I[Math.floor(Math.random()*I.length)]);var o=i.modPow(n,this);if(0!=o.compareTo(BigInteger.ONE)&&0!=o.compareTo(e)){for(var a=1;a++<r&&0!=o.compareTo(e);)if(0==(o=o.modPowInt(2,this)).compareTo(BigInteger.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0},BigInteger.prototype.clone=
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function bnClone(){var t=nbi();return this.copyTo(t),t},BigInteger.prototype.intValue=function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},BigInteger.prototype.byteValue=function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24},BigInteger.prototype.shortValue=function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16},BigInteger.prototype.signum=function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},BigInteger.prototype.toByteArray=function bnToByteArray(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this[t]&(1<<n)-1)<<8-n,r|=this[--t]>>(n+=this.DB-8)):(r=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e},BigInteger.prototype.equals=function bnEquals(t){return 0==this.compareTo(t)},BigInteger.prototype.min=function bnMin(t){return this.compareTo(t)<0?this:t},BigInteger.prototype.max=function bnMax(t){return this.compareTo(t)>0?this:t},BigInteger.prototype.and=function bnAnd(t){var e=nbi();return this.bitwiseTo(t,op_and,e),e},BigInteger.prototype.or=function bnOr(t){var e=nbi();return this.bitwiseTo(t,op_or,e),e},BigInteger.prototype.xor=function bnXor(t){var e=nbi();return this.bitwiseTo(t,op_xor,e),e},BigInteger.prototype.andNot=function bnAndNot(t){var e=nbi();return this.bitwiseTo(t,op_andnot,e),e},BigInteger.prototype.not=function bnNot(){for(var t=nbi(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},BigInteger.prototype.shiftLeft=function bnShiftLeft(t){var e=nbi();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},BigInteger.prototype.shiftRight=function bnShiftRight(t){var e=nbi();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},BigInteger.prototype.getLowestSetBit=function bnGetLowestSetBit(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+lbit(this[t]);return this.s<0?this.t*this.DB:-1},BigInteger.prototype.bitCount=function bnBitCount(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=cbit(this[r]^e);return t},BigInteger.prototype.testBit=function bnTestBit(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},BigInteger.prototype.setBit=function bnSetBit(t){return this.changeBit(t,op_or)},BigInteger.prototype.clearBit=function bnClearBit(t){return this.changeBit(t,op_andnot)},BigInteger.prototype.flipBit=function bnFlipBit(t){return this.changeBit(t,op_xor)},BigInteger.prototype.add=function bnAdd(t){var e=nbi();return this.addTo(t,e),e},BigInteger.prototype.subtract=function bnSubtract(t){var e=nbi();return this.subTo(t,e),e},BigInteger.prototype.multiply=function bnMultiply(t){var e=nbi();return this.multiplyTo(t,e),e},BigInteger.prototype.divide=function bnDivide(t){var e=nbi();return this.divRemTo(t,e,null),e},BigInteger.prototype.remainder=function bnRemainder(t){var e=nbi();return this.divRemTo(t,null,e),e},BigInteger.prototype.divideAndRemainder=function bnDivideAndRemainder(t){var e=nbi(),r=nbi();return this.divRemTo(t,e,r),new Array(e,r)},BigInteger.prototype.modPow=function bnModPow(t,e){var r,n,i=t.bitLength(),s=nbv(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new Classic(e):e.isEven()?new Barrett(e):new Montgomery(e);var o=new Array,a=3,c=r-1,u=(1<<r)-1;if(o[1]=n.convert(this),r>1){var h=nbi();for(n.sqrTo(o[1],h);a<=u;)o[a]=nbi(),n.mulTo(h,o[a-2],o[a]),a+=2}var l,f,p=t.t-1,d=!0,g=nbi();for(i=nbits(t[p])-1;p>=0;){for(i>=c?l=t[p]>>i-c&u:(l=(t[p]&(1<<i+1)-1)<<c-i,p>0&&(l|=t[p-1]>>this.DB+i-c)),a=r;0==(1&l);)l>>=1,--a;if((i-=a)<0&&(i+=this.DB,--p),d)o[l].copyTo(s),d=!1;else{for(;a>1;)n.sqrTo(s,g),n.sqrTo(g,s),a-=2;a>0?n.sqrTo(s,g):(f=s,s=g,g=f),n.mulTo(g,o[l],s)}for(;p>=0&&0==(t[p]&1<<i);)n.sqrTo(s,g),f=s,s=g,g=f,--i<0&&(i=this.DB-1,--p)}return n.revert(s)},BigInteger.prototype.modInverse=function bnModInverse(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return BigInteger.ZERO;for(var r=t.clone(),n=this.clone(),i=nbv(1),s=nbv(0),o=nbv(0),a=nbv(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),e&&o.subTo(i,o),a.subTo(s,a))}return 0!=n.compareTo(BigInteger.ONE)?BigInteger.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a},BigInteger.prototype.pow=function bnPow(t){return this.exp(t,new NullExp)},BigInteger.prototype.gcd=function bnGCD(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},BigInteger.prototype.isProbablePrime=function bnIsProbablePrime(t){var e,r=this.abs();if(1==r.t&&r[0]<=I[I.length-1]){for(e=0;e<I.length;++e)if(r[0]==I[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<I.length;){for(var n=I[e],i=e+1;i<I.length&&n<R;)n*=I[i++];for(n=r.modInt(n);e<i;)if(n%I[e++]==0)return!1}return r.millerRabin(t)},BigInteger.prototype.square=function bnSquare(){var t=nbi();return this.squareTo(t),t},Arcfour.prototype.init=function ARC4init(t){var e,r,n;for(e=0;e<256;++e)this.S[e]=e;for(r=0,e=0;e<256;++e)r=r+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[r],this.S[r]=n;this.i=0,this.j=0},Arcfour.prototype.next=function ARC4next(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var O,D,H,N=256;
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function rng_seed_time(){!function rng_seed_int(t){D[H++]^=255&t,D[H++]^=t>>8&255,D[H++]^=t>>16&255,D[H++]^=t>>24&255,H>=N&&(H-=N)}((new Date).getTime())}if(null==D){var L;if(D=new Array,H=0,void 0!==i&&(void 0!==i.crypto||void 0!==i.msCrypto)){var M=i.crypto||i.msCrypto;if(M.getRandomValues){var U=new Uint8Array(32);for(M.getRandomValues(U),L=0;L<32;++L)D[H++]=U[L]}else if("Netscape"==r.appName&&r.appVersion<"5"){var q=i.crypto.random(32);for(L=0;L<q.length;++L)D[H++]=255&q.charCodeAt(L)}}for(;H<N;)L=Math.floor(65536*Math.random()),D[H++]=L>>>8,D[H++]=255&L;H=0,rng_seed_time()}function rng_get_byte(){if(null==O){for(rng_seed_time(),(O=function prng_newstate(){return new Arcfour}()).init(D),H=0;H<D.length;++H)D[H]=0;H=0}return O.next()}function SecureRandom(){}
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function parseBigInt(t,e){return new BigInteger(t,e)}function oaep_mgf1_arr(t,e,r){for(var n="",i=0;n.length<e;)n+=r(String.fromCharCode.apply(String,t.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return n}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function oaep_mgf1_str(t,e,r){for(var n="",i=0;n.length<e;)n+=r(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])),i+=1;return n}
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function ECFieldElementFp(t,e){this.x=e,this.q=t}function ECPointFp(t,e,r,n){this.curve=t,this.x=e,this.y=r,this.z=null==n?BigInteger.ONE:n,this.zinv=null}function ECCurveFp(t,e,r){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(r),this.infinity=new ECPointFp(this,null,null)}SecureRandom.prototype.nextBytes=function rng_get_bytes(t){var e;for(e=0;e<t.length;++e)t[e]=rng_get_byte()},RSAKey.prototype.doPublic=function RSADoPublic(t){return t.modPowInt(this.e,this.n)},RSAKey.prototype.setPublic=function RSASetPublic(t,e){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof t)this.n=t,this.e=e;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA public key";this.n=parseBigInt(t,16),this.e=parseInt(e,16)}},RSAKey.prototype.encrypt=function RSAEncrypt(t){var e=function pkcs1pad2(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var r=new Array,n=t.length-1;n>=0&&e>0;){var i=t.charCodeAt(n--);i<128?r[--e]=i:i>127&&i<2048?(r[--e]=63&i|128,r[--e]=i>>6|192):(r[--e]=63&i|128,r[--e]=i>>6&63|128,r[--e]=i>>12|224)}r[--e]=0;for(var s=new SecureRandom,o=new Array;e>2;){for(o[0]=0;0==o[0];)s.nextBytes(o);r[--e]=o[0]}return r[--e]=2,r[--e]=0,new BigInteger(r)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var r=this.doPublic(e);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n},RSAKey.prototype.encryptOAEP=function RSAEncryptOAEP(t,e,r){var n=function oaep_pad(t,e,r,n){var i=K.crypto.MessageDigest,s=K.crypto.Util,o=null;if(r||(r="sha1"),"string"==typeof r&&(o=i.getCanonicalAlgName(r),n=i.getHashLength(o),r=function(t){return hextorstr(s.hashHex(rstrtohex(t),o))}),t.length+2*n+2>e)throw"Message too long for RSA";var a,c="";for(a=0;a<e-t.length-2*n-2;a+=1)c+="\0";var u=r("")+c+""+t,h=new Array(n);(new SecureRandom).nextBytes(h);var l=oaep_mgf1_arr(h,u.length,r),f=[];for(a=0;a<u.length;a+=1)f[a]=u.charCodeAt(a)^l.charCodeAt(a);var p=oaep_mgf1_arr(f,h.length,r),d=[0];for(a=0;a<h.length;a+=1)d[a+1]=h[a]^p.charCodeAt(a);return new BigInteger(d.concat(f))}(t,this.n.bitLength()+7>>3,e,r);if(null==n)return null;var i=this.doPublic(n);if(null==i)return null;var s=i.toString(16);return 0==(1&s.length)?s:"0"+s},RSAKey.prototype.type="RSA",RSAKey.prototype.doPrivate=function RSADoPrivate(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),r=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(r)<0;)e=e.add(this.p);return e.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},RSAKey.prototype.setPrivate=function RSASetPrivate(t,e,r){if(this.isPrivate=!0,"string"!=typeof t)this.n=t,this.e=e,this.d=r;else{if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA private key";this.n=parseBigInt(t,16),this.e=parseInt(e,16),this.d=parseBigInt(r,16)}},RSAKey.prototype.setPrivateEx=function RSASetPrivateEx(t,e,r,n,i,s,o,a){if(this.isPrivate=!0,this.isPublic=!1,null==t)throw"RSASetPrivateEx N == null";if(null==e)throw"RSASetPrivateEx E == null";if(0==t.length)throw"RSASetPrivateEx N.length == 0";if(0==e.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=parseBigInt(t,16),this.e=parseInt(e,16),this.d=parseBigInt(r,16),this.p=parseBigInt(n,16),this.q=parseBigInt(i,16),this.dmp1=parseBigInt(s,16),this.dmq1=parseBigInt(o,16),this.coeff=parseBigInt(a,16)},RSAKey.prototype.generate=function RSAGenerate(t,e){var r=new SecureRandom,n=t>>1;this.e=parseInt(e,16);for(var i=new BigInteger(e,16);;){for(;this.p=new BigInteger(t-n,1,r),0!=this.p.subtract(BigInteger.ONE).gcd(i).compareTo(BigInteger.ONE)||!this.p.isProbablePrime(10););for(;this.q=new BigInteger(n,1,r),0!=this.q.subtract(BigInteger.ONE).gcd(i).compareTo(BigInteger.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract(BigInteger.ONE),a=this.q.subtract(BigInteger.ONE),c=o.multiply(a);if(0==c.gcd(i).compareTo(BigInteger.ONE)){this.n=this.p.multiply(this.q),this.d=i.modInverse(c),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},RSAKey.prototype.decrypt=function RSADecrypt(t){var e=parseBigInt(t,16),r=this.doPrivate(e);return null==r?null:
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function pkcs1unpad2(t,e){for(var r=t.toByteArray(),n=0;n<r.length&&0==r[n];)++n;if(r.length-n!=e-1||2!=r[n])return null;for(++n;0!=r[n];)if(++n>=r.length)return null;for(var i="";++n<r.length;){var s=255&r[n];s<128?i+=String.fromCharCode(s):s>191&&s<224?(i+=String.fromCharCode((31&s)<<6|63&r[n+1]),++n):(i+=String.fromCharCode((15&s)<<12|(63&r[n+1])<<6|63&r[n+2]),n+=2)}return i}(r,this.n.bitLength()+7>>3)},RSAKey.prototype.decryptOAEP=function RSADecryptOAEP(t,e,r){var n=parseBigInt(t,16),i=this.doPrivate(n);return null==i?null:function oaep_unpad(t,e,r,n){var i=K.crypto.MessageDigest,s=K.crypto.Util,o=null;for(r||(r="sha1"),"string"==typeof r&&(o=i.getCanonicalAlgName(r),n=i.getHashLength(o),r=function(t){return hextorstr(s.hashHex(rstrtohex(t),o))}),t=t.toByteArray(),a=0;a<t.length;a+=1)t[a]&=255;for(;t.length<e;)t.unshift(0);if((t=String.fromCharCode.apply(String,t)).length<2*n+2)throw"Cipher too short";var a,c=t.substr(1,n),u=t.substr(n+1),h=oaep_mgf1_str(u,n,r),l=[];for(a=0;a<c.length;a+=1)l[a]=c.charCodeAt(a)^h.charCodeAt(a);var f=oaep_mgf1_str(String.fromCharCode.apply(String,l),t.length-n,r),p=[];for(a=0;a<u.length;a+=1)p[a]=u.charCodeAt(a)^f.charCodeAt(a);if((p=String.fromCharCode.apply(String,p)).substr(0,n)!==r(""))throw"Hash mismatch";var d=(p=p.substr(n)).indexOf("");if((-1!=d?p.substr(0,d).lastIndexOf("\0"):-1)+1!=d)throw"Malformed data";return p.substr(d+1)}(i,this.n.bitLength()+7>>3,e,r)},ECFieldElementFp.prototype.equals=function feFpEquals(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)},ECFieldElementFp.prototype.toBigInteger=function feFpToBigInteger(){return this.x},ECFieldElementFp.prototype.negate=function feFpNegate(){return new ECFieldElementFp(this.q,this.x.negate().mod(this.q))},ECFieldElementFp.prototype.add=function feFpAdd(t){return new ECFieldElementFp(this.q,this.x.add(t.toBigInteger()).mod(this.q))},ECFieldElementFp.prototype.subtract=function feFpSubtract(t){return new ECFieldElementFp(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))},ECFieldElementFp.prototype.multiply=function feFpMultiply(t){return new ECFieldElementFp(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))},ECFieldElementFp.prototype.square=function feFpSquare(){return new ECFieldElementFp(this.q,this.x.square().mod(this.q))},ECFieldElementFp.prototype.divide=function feFpDivide(t){return new ECFieldElementFp(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))},ECPointFp.prototype.getX=function pointFpGetX(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ECPointFp.prototype.getY=function pointFpGetY(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},ECPointFp.prototype.equals=function pointFpEquals(t){return t==this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(BigInteger.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(BigInteger.ZERO))},ECPointFp.prototype.isInfinity=function pointFpIsInfinity(){return null==this.x&&null==this.y||this.z.equals(BigInteger.ZERO)&&!this.y.toBigInteger().equals(BigInteger.ZERO)},ECPointFp.prototype.negate=function pointFpNegate(){return new ECPointFp(this.curve,this.x,this.y.negate(),this.z)},ECPointFp.prototype.add=function pointFpAdd(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),r=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(BigInteger.ZERO.equals(r))return BigInteger.ZERO.equals(e)?this.twice():this.curve.getInfinity();var n=new BigInteger("3"),i=this.x.toBigInteger(),s=this.y.toBigInteger(),o=(t.x.toBigInteger(),t.y.toBigInteger(),r.square()),a=o.multiply(r),c=i.multiply(o),u=e.square().multiply(this.z),h=u.subtract(c.shiftLeft(1)).multiply(t.z).subtract(a).multiply(r).mod(this.curve.q),l=c.multiply(n).multiply(e).subtract(s.multiply(a)).subtract(u.multiply(e)).multiply(t.z).add(e.multiply(a)).mod(this.curve.q),f=a.multiply(this.z).multiply(t.z).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(h),this.curve.fromBigInteger(l),f)},ECPointFp.prototype.twice=function pointFpTwice(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new BigInteger("3"),e=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.q),s=this.curve.a.toBigInteger(),o=e.square().multiply(t);BigInteger.ZERO.equals(s)||(o=o.add(this.z.square().multiply(s)));var a=(o=o.mod(this.curve.q)).square().subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.q),c=o.multiply(t).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.square().multiply(o)).mod(this.curve.q),u=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(c),u)},ECPointFp.prototype.multiply=function pointFpMultiply(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,r=t,n=r.multiply(new BigInteger("3")),i=this.negate(),s=this;for(e=n.bitLength()-2;e>0;--e){s=s.twice();var o=n.testBit(e);o!=r.testBit(e)&&(s=s.add(o?this:i))}return s},ECPointFp.prototype.multiplyTwo=function pointFpMultiplyTwo(t,e,r){var n;n=t.bitLength()>r.bitLength()?t.bitLength()-1:r.bitLength()-1;for(var i=this.curve.getInfinity(),s=this.add(e);n>=0;)i=i.twice(),t.testBit(n)?i=r.testBit(n)?i.add(s):i.add(this):r.testBit(n)&&(i=i.add(e)),--n;return i},ECCurveFp.prototype.getQ=function curveFpGetQ(){return this.q},ECCurveFp.prototype.getA=function curveFpGetA(){return this.a},ECCurveFp.prototype.getB=function curveFpGetB(){return this.b},ECCurveFp.prototype.equals=function curveFpEquals(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)},ECCurveFp.prototype.getInfinity=function curveFpGetInfinity(){return this.infinity},ECCurveFp.prototype.fromBigInteger=function curveFpFromBigInteger(t){return new ECFieldElementFp(this.q,t)},ECCurveFp.prototype.decodePointHex=function curveFpDecodePointHex(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,r=t.substr(2,e),n=t.substr(e+2,e);return new ECPointFp(this,this.fromBigInteger(new BigInteger(r,16)),this.fromBigInteger(new BigInteger(n,16)));default:return null}},
/*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
 */
ECFieldElementFp.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},ECPointFp.prototype.getEncoded=function(t){var d=function(t,e){var r=t.toByteArrayUnsigned();if(e<r.length)r=r.slice(r.length-e);else for(;e>r.length;)r.unshift(0);return r},e=this.getX().toBigInteger(),r=this.getY().toBigInteger(),n=d(e,32);return t?r.isEven()?n.unshift(2):n.unshift(3):(n.unshift(4),n=n.concat(d(r,32))),n},ECPointFp.decodeFrom=function(t,e){e[0];var r=e.length-1,n=e.slice(1,1+r/2),i=e.slice(1+r/2,1+r);n.unshift(0),i.unshift(0);var s=new BigInteger(n),o=new BigInteger(i);return new ECPointFp(t,t.fromBigInteger(s),t.fromBigInteger(o))},ECPointFp.decodeFromHex=function(t,e){e.substr(0,2);var r=e.length-2,n=e.substr(2,r/2),i=e.substr(2+r/2,r/2),s=new BigInteger(n,16),o=new BigInteger(i,16);return new ECPointFp(t,t.fromBigInteger(s),t.fromBigInteger(o))},ECPointFp.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),r=t.y.subtract(this.y).divide(e),n=r.square().subtract(this.x).subtract(t.x),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new ECPointFp(this.curve,n,i)},ECPointFp.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger(BigInteger.valueOf(2)),e=this.curve.fromBigInteger(BigInteger.valueOf(3)),r=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),n=r.square().subtract(this.x.multiply(t)),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new ECPointFp(this.curve,n,i)},ECPointFp.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,r=t,n=r.multiply(new BigInteger("3")),i=this.negate(),s=this;for(e=n.bitLength()-2;e>0;--e){s=s.twice();var o=n.testBit(e);o!=r.testBit(e)&&(s=s.add2D(o?this:i))}return s},ECPointFp.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),i=this.curve.getQ(),s=e.multiply(e).mod(i),o=t.multiply(t).multiply(t).add(r.multiply(t)).add(n).mod(i);return s.equals(o)},ECPointFp.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},ECPointFp.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(e.compareTo(BigInteger.ONE)<0||e.compareTo(t.subtract(BigInteger.ONE))>0)throw new Error("x coordinate out of bounds");if(r.compareTo(BigInteger.ONE)<0||r.compareTo(t.subtract(BigInteger.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};
/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */
var V=function(){var t=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),e=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),r={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function h(t,e,n){return e?r[e]:String.fromCharCode(parseInt(n,16))}var n=new String(""),i=Object.hasOwnProperty;return function(r,o){var a,c,u=r.match(t),l=u[0],f=!1;"{"===l?a={}:"["===l?a=[]:(a=[],f=!0);for(var p=[a],d=1-f,g=u.length;d<g;++d){var y;switch((l=u[d]).charCodeAt(0)){default:(y=p[0])[c||y.length]=+l,c=void 0;break;case 34:if(-1!==(l=l.substring(1,l.length-1)).indexOf("\\")&&(l=l.replace(e,h)),y=p[0],!c){if(!(y instanceof Array)){c=l||n;break}c=y.length}y[c]=l,c=void 0;break;case 91:y=p[0],p.unshift(y[c||y.length]=[]),c=void 0;break;case 93:p.shift();break;case 102:(y=p[0])[c||y.length]=!1,c=void 0;break;case 110:(y=p[0])[c||y.length]=null,c=void 0;break;case 116:(y=p[0])[c||y.length]=!0,c=void 0;break;case 123:y=p[0],p.unshift(y[c||y.length]={}),c=void 0;break;case 125:p.shift()}}if(f){if(1!==p.length)throw new Error;a=a[0]}else if(p.length)throw new Error;if(o){var s=function(t,e){var r=t[e];if(r&&"object"==typeof r){var n=null;for(var a in r)if(i.call(r,a)&&r!==t){var c=s(r,a);void 0!==c?r[a]=c:(n||(n=[]),n.push(a))}if(n)for(var u=n.length;--u>=0;)delete r[n[u]]}return o.call(t,e,r)};a=s({"":a},"")}return a}}();void 0!==K&&K||(K={}),void 0!==K.asn1&&K.asn1||(K.asn1={}),K.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var r=e.substr(1).length;r%2==1?r+=1:e.match(/^[0-7]/)||(r+=2);for(var n="",i=0;i<r;i++)n+="f";e=new BigInteger(n,16).xor(t).add(BigInteger.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return hextopem(t,e)},this.newObject=function(t){var e=K.asn1,r=e.DERBoolean,n=e.DERInteger,i=e.DERBitString,s=e.DEROctetString,o=e.DERNull,a=e.DERObjectIdentifier,c=e.DEREnumerated,u=e.DERUTF8String,h=e.DERNumericString,l=e.DERPrintableString,f=e.DERTeletexString,p=e.DERIA5String,d=e.DERUTCTime,g=e.DERGeneralizedTime,y=e.DERSequence,v=e.DERSet,m=e.DERTaggedObject,b=e.ASN1Util.newObject,S=Object.keys(t);if(1!=S.length)throw"key of param shall be only one.";var x=S[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+x+":"))throw"undefined key: "+x;if("bool"==x)return new r(t[x]);if("int"==x)return new n(t[x]);if("bitstr"==x)return new i(t[x]);if("octstr"==x)return new s(t[x]);if("null"==x)return new o(t[x]);if("oid"==x)return new a(t[x]);if("enum"==x)return new c(t[x]);if("utf8str"==x)return new u(t[x]);if("numstr"==x)return new h(t[x]);if("prnstr"==x)return new l(t[x]);if("telstr"==x)return new f(t[x]);if("ia5str"==x)return new p(t[x]);if("utctime"==x)return new d(t[x]);if("gentime"==x)return new g(t[x]);if("seq"==x){for(var w=t[x],E=[],_=0;_<w.length;_++){var F=b(w[_]);E.push(F)}return new y({array:E})}if("set"==x){for(w=t[x],E=[],_=0;_<w.length;_++){F=b(w[_]);E.push(F)}return new v({array:E})}if("tag"==x){var A=t[x];if("[object Array]"===Object.prototype.toString.call(A)&&3==A.length){var C=b(A[2]);return new m({tag:A[0],explicit:A[1],obj:C})}var T={};if(void 0!==A.explicit&&(T.explicit=A.explicit),void 0!==A.tag&&(T.tag=A.tag),void 0===A.obj)throw"obj shall be specified for 'tag'.";return T.obj=b(A.obj),new m(T)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},K.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",r=parseInt(t.substr(0,2),16),n=(e=Math.floor(r/40)+"."+r%40,""),i=2;i<t.length;i+=2){var s=("00000000"+parseInt(t.substr(i,2),16).toString(2)).slice(-8);if(n+=s.substr(1,7),"0"==s.substr(0,1))e=e+"."+new BigInteger(n,2).toString(10),n=""}return e},K.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},d=function(t){var r="",n=new BigInteger(t,10).toString(2),i=7-n.length%7;7==i&&(i=0);for(var s="",o=0;o<i;o++)s+="0";n=s+n;for(o=0;o<n.length-1;o+=7){var a=n.substr(o,7);o!=n.length-7&&(a="1"+a),r+=e(parseInt(a,2))}return r};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",n=t.split("."),i=40*parseInt(n[0])+parseInt(n[1]);r+=e(i),n.splice(0,2);for(var s=0;s<n.length;s++)r+=d(n[s]);return r},K.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var r=e.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+r).toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},K.asn1.DERAbstractString=function(t){K.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=utf8tohex(this.s).toLowerCase()},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},s.lang.extend(K.asn1.DERAbstractString,K.asn1.ASN1Object),K.asn1.DERAbstractTime=function(t){K.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.formatDate=function(t,e,r){var n=this.zeroPadding,i=this.localDateToUTC(t),s=String(i.getFullYear());"utc"==e&&(s=s.substr(2,2));var o=s+n(String(i.getMonth()+1),2)+n(String(i.getDate()),2)+n(String(i.getHours()),2)+n(String(i.getMinutes()),2)+n(String(i.getSeconds()),2);if(!0===r){var a=i.getMilliseconds();if(0!=a){var c=n(String(a),3);o=o+"."+(c=c.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(t)},this.setByDateValue=function(t,e,r,n,i,s){var o=new Date(Date.UTC(t,e-1,r,n,i,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},s.lang.extend(K.asn1.DERAbstractTime,K.asn1.ASN1Object),K.asn1.DERAbstractStructured=function(t){K.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},s.lang.extend(K.asn1.DERAbstractStructured,K.asn1.ASN1Object),K.asn1.DERBoolean=function(){K.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},s.lang.extend(K.asn1.DERBoolean,K.asn1.ASN1Object),K.asn1.DERInteger=function(t){K.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=K.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new BigInteger(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},s.lang.extend(K.asn1.DERInteger,K.asn1.ASN1Object),K.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=K.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}K.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var r="0"+t;this.hTLV=null,this.isModified=!0,this.hV=r+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var r=0;r<=e;r++)t+="0";var n="";for(r=0;r<t.length-1;r+=8){var i=t.substr(r,8),s=parseInt(i,2).toString(16);1==s.length&&(s="0"+s),n+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+e+n},this.setByBooleanArray=function(t){for(var e="",r=0;r<t.length;r++)1==t[r]?e+="1":e+="0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},s.lang.extend(K.asn1.DERBitString,K.asn1.ASN1Object),K.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=K.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}K.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},s.lang.extend(K.asn1.DEROctetString,K.asn1.DERAbstractString),K.asn1.DERNull=function(){K.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},s.lang.extend(K.asn1.DERNull,K.asn1.ASN1Object),K.asn1.DERObjectIdentifier=function(t){var b=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},a=function(t){var e="",r=new BigInteger(t,10).toString(2),n=7-r.length%7;7==n&&(n=0);for(var i="",s=0;s<n;s++)i+="0";r=i+r;for(s=0;s<r.length-1;s+=7){var o=r.substr(s,7);s!=r.length-7&&(o="1"+o),e+=b(parseInt(o,2))}return e};K.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var e="",r=t.split("."),n=40*parseInt(r[0])+parseInt(r[1]);e+=b(n),r.splice(0,2);for(var i=0;i<r.length;i++)e+=a(r[i]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueName=function(t){var e=K.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},s.lang.extend(K.asn1.DERObjectIdentifier,K.asn1.ASN1Object),K.asn1.DEREnumerated=function(t){K.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=K.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new BigInteger(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},s.lang.extend(K.asn1.DEREnumerated,K.asn1.ASN1Object),K.asn1.DERUTF8String=function(t){K.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},s.lang.extend(K.asn1.DERUTF8String,K.asn1.DERAbstractString),K.asn1.DERNumericString=function(t){K.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},s.lang.extend(K.asn1.DERNumericString,K.asn1.DERAbstractString),K.asn1.DERPrintableString=function(t){K.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},s.lang.extend(K.asn1.DERPrintableString,K.asn1.DERAbstractString),K.asn1.DERTeletexString=function(t){K.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},s.lang.extend(K.asn1.DERTeletexString,K.asn1.DERAbstractString),K.asn1.DERIA5String=function(t){K.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},s.lang.extend(K.asn1.DERIA5String,K.asn1.DERAbstractString),K.asn1.DERUTCTime=function(t){K.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},s.lang.extend(K.asn1.DERUTCTime,K.asn1.DERAbstractTime),K.asn1.DERGeneralizedTime=function(t){K.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},s.lang.extend(K.asn1.DERGeneralizedTime,K.asn1.DERAbstractTime),K.asn1.DERSequence=function(t){K.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++){t+=this.asn1Array[e].getEncodedHex()}return this.hV=t,this.hV}},s.lang.extend(K.asn1.DERSequence,K.asn1.DERAbstractStructured),K.asn1.DERSet=function(t){K.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var r=this.asn1Array[e];t.push(r.getEncodedHex())}return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},s.lang.extend(K.asn1.DERSet,K.asn1.DERAbstractStructured),K.asn1.DERTaggedObject=function(t){K.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,r){this.hT=e,this.isExplicit=t,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.tag&&(this.hT=t.tag),void 0!==t.explicit&&(this.isExplicit=t.explicit),void 0!==t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},s.lang.extend(K.asn1.DERTaggedObject,K.asn1.ASN1Object);var K,z,G,W=new function(){};function stoBA(t){for(var e=new Array,r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function BAtos(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}function BAtohex(t){for(var e="",r=0;r<t.length;r++){var n=t[r].toString(16);1==n.length&&(n="0"+n),e+=n}return e}function stohex(t){return BAtohex(stoBA(t))}function b64tob64u(t){return t=(t=(t=t.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function b64utob64(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),t=(t=t.replace(/-/g,"+")).replace(/_/g,"/")}function hextob64u(t){return t.length%2==1&&(t="0"+t),b64tob64u(hex2b64(t))}function b64utohex(t){return b64tohex(b64utob64(t))}function utf8tohex(t){return uricmptohex(encodeURIComponentAll(t))}function hextoutf8(t){return decodeURIComponent(hextouricmp(t))}function hextorstr(t){for(var e="",r=0;r<t.length-1;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e}function rstrtohex(t){for(var e="",r=0;r<t.length;r++)e+=("0"+t.charCodeAt(r).toString(16)).slice(-2);return e}function hextob64(t){return hex2b64(t)}function hextob64nl(t){var e=hextob64(t).replace(/(.{64})/g,"$1\r\n");return e=e.replace(/\r\n$/,"")}function b64nltohex(t){return b64tohex(t.replace(/[^0-9A-Za-z\/+=]*/g,""))}function hextopem(t,e){return"-----BEGIN "+e+"-----\r\n"+hextob64nl(t)+"\r\n-----END "+e+"-----\r\n"}function pemtohex(t,e){if(-1==t.indexOf("-----BEGIN "))throw"can't find PEM header: "+e;return b64nltohex(t=void 0!==e?(t=t.replace("-----BEGIN "+e+"-----","")).replace("-----END "+e+"-----",""):(t=t.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function zulutomsec(t){var e,r,n,i,s,o,a,c,u,h,l;if(l=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return c=l[1],e=parseInt(c),2===c.length&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),r=parseInt(l[2])-1,n=parseInt(l[3]),i=parseInt(l[4]),s=parseInt(l[5]),o=parseInt(l[6]),a=0,""!==(u=l[7])&&(h=(u.substr(1)+"00").substr(0,3),a=parseInt(h)),Date.UTC(e,r,n,i,s,o,a);throw"unsupported zulu format: "+t}function zulutosec(t){return~~(zulutomsec(t)/1e3)}function uricmptohex(t){return t.replace(/%/g,"")}function hextouricmp(t){return t.replace(/(..)/g,"%$1")}function ipv6tohex(t){var e="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw e;var r=(t=t.toLowerCase()).split(":").length-1;if(r<2)throw e;var n=":".repeat(7-r+2),i=(t=t.replace("::",n)).split(":");if(8!=i.length)throw e;for(var s=0;s<8;s++)i[s]=("0000"+i[s]).slice(-4);return i.join("")}function hextoipv6(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var e=(t=t.toLowerCase()).match(/.{1,4}/g),r=0;r<8;r++)e[r]=e[r].replace(/^0+/,""),""==e[r]&&(e[r]="0");var n=(t=":"+e.join(":")+":").match(/:(0:){2,}/g);if(null===n)return t.slice(1,-1);var i="";for(r=0;r<n.length;r++)n[r].length>i.length&&(i=n[r]);return(t=t.replace(i,"::")).slice(1,-1)}function hextoip(t){var e="malformed hex value";if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw e;if(8!=t.length)return 32==t.length?hextoipv6(t):t;try{return parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16)}catch(t){throw e}}function encodeURIComponentAll(t){for(var e=encodeURIComponent(t),r="",n=0;n<e.length;n++)"%"==e[n]?(r+=e.substr(n,3),n+=2):r=r+"%"+stohex(e[n]);return r}function hextoposhex(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}function intarystrtohex(t){t=(t=(t=t.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return t.split(/,/).map((function(t,e,r){var n=parseInt(t);if(n<0||255<n)throw"integer not in range 0-255";return("00"+n.toString(16)).slice(-2)})).join("")}catch(t){throw"malformed integer array string: "+t}}W.getLblen=function(t,e){if("8"!=t.substr(e+2,1))return 1;var r=parseInt(t.substr(e+3,1));return 0==r?-1:0<r&&r<10?r+1:-2},W.getL=function(t,e){var r=W.getLblen(t,e);return r<1?"":t.substr(e+2,2*r)},W.getVblen=function(t,e){var r;return""==(r=W.getL(t,e))?-1:("8"===r.substr(0,1)?new BigInteger(r.substr(2),16):new BigInteger(r,16)).intValue()},W.getVidx=function(t,e){var r=W.getLblen(t,e);return r<0?r:e+2*(r+1)},W.getV=function(t,e){var r=W.getVidx(t,e),n=W.getVblen(t,e);return t.substr(r,2*n)},W.getTLV=function(t,e){return t.substr(e,2)+W.getL(t,e)+W.getV(t,e)},W.getNextSiblingIdx=function(t,e){return W.getVidx(t,e)+2*W.getVblen(t,e)},W.getChildIdx=function(t,e){var r=W,n=new Array,i=r.getVidx(t,e);"03"==t.substr(e,2)?n.push(i+2):n.push(i);for(var s=r.getVblen(t,e),o=i,a=0;;){var c=r.getNextSiblingIdx(t,o);if(null==c||c-i>=2*s)break;if(a>=200)break;n.push(c),o=c,a++}return n},W.getNthChildIdx=function(t,e,r){return W.getChildIdx(t,e)[r]},W.getIdxbyList=function(t,e,r,n){var i,s,o=W;if(0==r.length){if(void 0!==n&&t.substr(e,2)!==n)throw"checking tag doesn't match: "+t.substr(e,2)+"!="+n;return e}return i=r.shift(),s=o.getChildIdx(t,e),o.getIdxbyList(t,s[i],r,n)},W.getTLVbyList=function(t,e,r,n){var i=W,s=i.getIdxbyList(t,e,r);if(void 0===s)throw"can't find nthList object";if(void 0!==n&&t.substr(s,2)!=n)throw"checking tag doesn't match: "+t.substr(s,2)+"!="+n;return i.getTLV(t,s)},W.getVbyList=function(t,e,r,n,i){var s,o,a=W;if(void 0===(s=a.getIdxbyList(t,e,r,n)))throw"can't find nthList object";return o=a.getV(t,s),!0===i&&(o=o.substr(2)),o},W.hextooidstr=function(t){var h=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},e=[],r=t.substr(0,2),n=parseInt(r,16);e[0]=new String(Math.floor(n/40)),e[1]=new String(n%40);for(var i=t.substr(2),s=[],o=0;o<i.length/2;o++)s.push(parseInt(i.substr(2*o,2),16));var a=[],c="";for(o=0;o<s.length;o++)128&s[o]?c+=h((127&s[o]).toString(2),7):(c+=h((127&s[o]).toString(2),7),a.push(new String(parseInt(c,2))),c="");var u=e.join(".");return a.length>0&&(u=u+"."+a.join(".")),u},W.dump=function(t,e,r,n){var i=W,s=i.getV,o=i.dump,a=i.getChildIdx,c=t;t instanceof K.asn1.ASN1Object&&(c=t.getEncodedHex());var q=function(t,e){return t.length<=2*e?t:t.substr(0,e)+"..(total "+t.length/2+"bytes).."+t.substr(t.length-e,e)};void 0===e&&(e={ommit_long_octet:32}),void 0===r&&(r=0),void 0===n&&(n="");var u=e.ommit_long_octet;if("01"==c.substr(r,2))return"00"==(h=s(c,r))?n+"BOOLEAN FALSE\n":n+"BOOLEAN TRUE\n";if("02"==c.substr(r,2))return n+"INTEGER "+q(h=s(c,r),u)+"\n";if("03"==c.substr(r,2))return n+"BITSTRING "+q(h=s(c,r),u)+"\n";if("04"==c.substr(r,2)){var h=s(c,r);if(i.isASN1HEX(h)){var l=n+"OCTETSTRING, encapsulates\n";return l+=o(h,e,0,n+"  ")}return n+"OCTETSTRING "+q(h,u)+"\n"}if("05"==c.substr(r,2))return n+"NULL\n";if("06"==c.substr(r,2)){var f=s(c,r),p=K.asn1.ASN1Util.oidHexToInt(f),d=K.asn1.x509.OID.oid2name(p),g=p.replace(/\./g," ");return""!=d?n+"ObjectIdentifier "+d+" ("+g+")\n":n+"ObjectIdentifier ("+g+")\n"}if("0c"==c.substr(r,2))return n+"UTF8String '"+hextoutf8(s(c,r))+"'\n";if("13"==c.substr(r,2))return n+"PrintableString '"+hextoutf8(s(c,r))+"'\n";if("14"==c.substr(r,2))return n+"TeletexString '"+hextoutf8(s(c,r))+"'\n";if("16"==c.substr(r,2))return n+"IA5String '"+hextoutf8(s(c,r))+"'\n";if("17"==c.substr(r,2))return n+"UTCTime "+hextoutf8(s(c,r))+"\n";if("18"==c.substr(r,2))return n+"GeneralizedTime "+hextoutf8(s(c,r))+"\n";if("30"==c.substr(r,2)){if("3000"==c.substr(r,4))return n+"SEQUENCE {}\n";l=n+"SEQUENCE\n";var y=e;if((2==(b=a(c,r)).length||3==b.length)&&"06"==c.substr(b[0],2)&&"04"==c.substr(b[b.length-1],2)){d=i.oidname(s(c,b[0]));var v=JSON.parse(JSON.stringify(e));v.x509ExtName=d,y=v}for(var m=0;m<b.length;m++)l+=o(c,y,b[m],n+"  ");return l}if("31"==c.substr(r,2)){l=n+"SET\n";var b=a(c,r);for(m=0;m<b.length;m++)l+=o(c,e,b[m],n+"  ");return l}var S=parseInt(c.substr(r,2),16);if(0!=(128&S)){var x=31&S;if(0!=(32&S)){var l=n+"["+x+"]\n";for(b=a(c,r),m=0;m<b.length;m++)l+=o(c,e,b[m],n+"  ");return l}return"68747470"==(h=s(c,r)).substr(0,8)&&(h=hextoutf8(h)),"subjectAltName"===e.x509ExtName&&2==x&&(h=hextoutf8(h)),l=n+"["+x+"] "+h+"\n"}return n+"UNKNOWN("+c.substr(r,2)+") "+s(c,r)+"\n"},W.isASN1HEX=function(t){var e=W;if(t.length%2==1)return!1;var r=e.getVblen(t,0),n=t.substr(0,2),i=e.getL(t,0);return t.length-n.length-i.length==2*r},W.oidname=function(t){var e=K.asn1;K.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var r=e.x509.OID.oid2name(t);return""===r&&(r=t),r},void 0!==K&&K||(K={}),void 0!==K.asn1&&K.asn1||(K.asn1={}),void 0!==K.asn1.x509&&K.asn1.x509||(K.asn1.x509={}),K.asn1.x509.Certificate=function(t){K.asn1.x509.Certificate.superclass.constructor.call(this);var e=K,r=(e.crypto,e.asn1),n=r.DERSequence,i=r.DERBitString;this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;var t=new K.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg});t.init(this.prvKey),t.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=t.sign(),this.asn1Sig=new i({hex:"00"+this.hexSig});var e=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(t){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=t,this.asn1Sig=new i({hex:"00"+this.hexSig});var e=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN CERTIFICATE-----\r\n"+hextob64nl(this.getEncodedHex())+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==t&&(void 0!==t.tbscertobj&&(this.asn1TBSCert=t.tbscertobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},s.lang.extend(K.asn1.x509.Certificate,K.asn1.ASN1Object),K.asn1.x509.TBSCertificate=function(t){K.asn1.x509.TBSCertificate.superclass.constructor.call(this);var e=K.asn1,r=e.DERSequence,n=e.DERInteger,i=e.DERTaggedObject,s=e.x509,o=s.Time,a=s.X500Name,c=s.SubjectPublicKeyInfo;this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new i({obj:new n({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(t){this.asn1SerialNumber=new n(t)},this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new s.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new a(t)},this.setNotBeforeByParam=function(t){this.asn1NotBefore=new o(t)},this.setNotAfterByParam=function(t){this.asn1NotAfter=new o(t)},this.setSubjectByParam=function(t){this.asn1Subject=new a(t)},this.setSubjectPublicKey=function(t){this.asn1SubjPKey=new c(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=J.getKey(t);this.asn1SubjPKey=new c(e)},this.appendExtension=function(t){this.extensionsArray.push(t)},this.appendExtensionByName=function(t,e){K.asn1.x509.Extension.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var t=new r({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(t),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var e=new r({array:this.extensionsArray}),n=new i({explicit:!0,tag:"a3",obj:e});this.asn1Array.push(n)}var s=new r({array:this.asn1Array});return this.hTLV=s.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},s.lang.extend(K.asn1.x509.TBSCertificate,K.asn1.ASN1Object),K.asn1.x509.Extension=function(t){K.asn1.x509.Extension.superclass.constructor.call(this);var e=K.asn1,r=e.DERObjectIdentifier,n=e.DEROctetString,i=(e.DERBitString,e.DERBoolean),s=e.DERSequence;this.getEncodedHex=function(){var t=new r({oid:this.oid}),e=new n({hex:this.getExtnValueHex()}),o=new Array;return o.push(t),this.critical&&o.push(new i),o.push(e),new s({array:o}).getEncodedHex()},this.critical=!1,void 0!==t&&void 0!==t.critical&&(this.critical=t.critical)},s.lang.extend(K.asn1.x509.Extension,K.asn1.ASN1Object),K.asn1.x509.Extension.appendByNameToArray=function(t,e,r){var n=t.toLowerCase(),i=K.asn1.x509;if("basicconstraints"==n){var s=new i.BasicConstraints(e);r.push(s)}else if("keyusage"==n){s=new i.KeyUsage(e);r.push(s)}else if("crldistributionpoints"==n){s=new i.CRLDistributionPoints(e);r.push(s)}else if("extkeyusage"==n){s=new i.ExtKeyUsage(e);r.push(s)}else if("authoritykeyidentifier"==n){s=new i.AuthorityKeyIdentifier(e);r.push(s)}else if("authorityinfoaccess"==n){s=new i.AuthorityInfoAccess(e);r.push(s)}else if("subjectaltname"==n){s=new i.SubjectAltName(e);r.push(s)}else{if("issueraltname"!=n)throw"unsupported extension name: "+t;s=new i.IssuerAltName(e);r.push(s)}},K.asn1.x509.KeyUsage=function(t){K.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var e=X509.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==t&&(void 0!==t.bin&&(this.asn1ExtnValue=new K.asn1.DERBitString(t)),void 0!==t.names&&void 0!==t.names.length)){for(var r=t.names,n="000000000",i=0;i<r.length;i++)for(var s=0;s<e.length;s++)r[i]===e[s]&&(n=n.substring(0,s)+"1"+n.substring(s+1,n.length));this.asn1ExtnValue=new K.asn1.DERBitString({bin:n})}},s.lang.extend(K.asn1.x509.KeyUsage,K.asn1.x509.Extension),K.asn1.x509.BasicConstraints=function(t){K.asn1.x509.BasicConstraints.superclass.constructor.call(this,t);this.getExtnValueHex=function(){var t=new Array;this.cA&&t.push(new K.asn1.DERBoolean),this.pathLen>-1&&t.push(new K.asn1.DERInteger({int:this.pathLen}));var e=new K.asn1.DERSequence({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==t&&(void 0!==t.cA&&(this.cA=t.cA),void 0!==t.pathLen&&(this.pathLen=t.pathLen))},s.lang.extend(K.asn1.x509.BasicConstraints,K.asn1.x509.Extension),K.asn1.x509.CRLDistributionPoints=function(t){K.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var e=K.asn1,r=e.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(t){this.asn1ExtnValue=new e.DERSequence({array:t})},this.setByOneURI=function(t){var e=new r.GeneralNames([{uri:t}]),n=new r.DistributionPointName(e),i=new r.DistributionPoint({dpobj:n});this.setByDPArray([i])},this.oid="2.5.29.31",void 0!==t&&(void 0!==t.array?this.setByDPArray(t.array):void 0!==t.uri&&this.setByOneURI(t.uri))},s.lang.extend(K.asn1.x509.CRLDistributionPoints,K.asn1.x509.Extension),K.asn1.x509.ExtKeyUsage=function(t){K.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var e=K.asn1;this.setPurposeArray=function(t){this.asn1ExtnValue=new e.DERSequence;for(var r=0;r<t.length;r++){var n=new e.DERObjectIdentifier(t[r]);this.asn1ExtnValue.appendASN1Object(n)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==t&&void 0!==t.array&&this.setPurposeArray(t.array)},s.lang.extend(K.asn1.x509.ExtKeyUsage,K.asn1.x509.Extension),K.asn1.x509.AuthorityKeyIdentifier=function(t){K.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var e=K.asn1,r=e.DERTaggedObject;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var t=new Array;this.asn1KID&&t.push(new r({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&t.push(new r({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&t.push(new r({explicit:!1,tag:"82",obj:this.asn1CertSN}));var n=new e.DERSequence({array:t});return this.asn1ExtnValue=n,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(t){this.asn1KID=new K.asn1.DEROctetString(t)},this.setCertIssuerByParam=function(t){this.asn1CertIssuer=new K.asn1.x509.X500Name(t)},this.setCertSNByParam=function(t){this.asn1CertSN=new K.asn1.DERInteger(t)},this.oid="2.5.29.35",void 0!==t&&(void 0!==t.kid&&this.setKIDByParam(t.kid),void 0!==t.issuer&&this.setCertIssuerByParam(t.issuer),void 0!==t.sn&&this.setCertSNByParam(t.sn))},s.lang.extend(K.asn1.x509.AuthorityKeyIdentifier,K.asn1.x509.Extension),K.asn1.x509.AuthorityInfoAccess=function(t){K.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(t){for(var e=new Array,r=K.asn1,n=r.DERSequence,i=0;i<t.length;i++){var s=new n({array:[new r.DERObjectIdentifier(t[i].accessMethod),new r.x509.GeneralName(t[i].accessLocation)]});e.push(s)}this.asn1ExtnValue=new n({array:e})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==t&&void 0!==t.array&&this.setAccessDescriptionArray(t.array)},s.lang.extend(K.asn1.x509.AuthorityInfoAccess,K.asn1.x509.Extension),K.asn1.x509.SubjectAltName=function(t){K.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new K.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},s.lang.extend(K.asn1.x509.SubjectAltName,K.asn1.x509.Extension),K.asn1.x509.IssuerAltName=function(t){K.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new K.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},s.lang.extend(K.asn1.x509.IssuerAltName,K.asn1.x509.Extension),K.asn1.x509.CRL=function(t){K.asn1.x509.CRL.superclass.constructor.call(this);this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new K.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new K.asn1.DERBitString({hex:"00"+this.hexSig});var t=new K.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN X509 CRL-----\r\n"+hextob64nl(this.getEncodedHex())+"\r\n-----END X509 CRL-----\r\n"},void 0!==t&&(void 0!==t.tbsobj&&(this.asn1TBSCertList=t.tbsobj),void 0!==t.prvkeyobj&&(this.prvKey=t.prvkeyobj))},s.lang.extend(K.asn1.x509.CRL,K.asn1.ASN1Object),K.asn1.x509.TBSCertList=function(t){K.asn1.x509.TBSCertList.superclass.constructor.call(this);var e=K.asn1,r=e.DERSequence,n=e.x509,i=n.Time;this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new n.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new n.X500Name(t)},this.setThisUpdateByParam=function(t){this.asn1ThisUpdate=new i(t)},this.setNextUpdateByParam=function(t){this.asn1NextUpdate=new i(t)},this.addRevokedCert=function(t,e){var r={};null!=t&&null!=t&&(r.sn=t),null!=e&&null!=e&&(r.time=e);var i=new n.CRLEntry(r);this.aRevokedCert.push(i)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),this.aRevokedCert.length>0){var t=new r({array:this.aRevokedCert});this.asn1Array.push(t)}var e=new r({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},s.lang.extend(K.asn1.x509.TBSCertList,K.asn1.ASN1Object),K.asn1.x509.CRLEntry=function(t){K.asn1.x509.CRLEntry.superclass.constructor.call(this);var e=K.asn1;this.setCertSerial=function(t){this.sn=new e.DERInteger(t)},this.setRevocationDate=function(t){this.time=new e.x509.Time(t)},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.sn,this.time]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&(void 0!==t.time&&this.setRevocationDate(t.time),void 0!==t.sn&&this.setCertSerial(t.sn))},s.lang.extend(K.asn1.x509.CRLEntry,K.asn1.ASN1Object),K.asn1.x509.X500Name=function(t){K.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array;var e=K.asn1,r=e.x509,n=pemtohex;if(this.setByString=function(t){var e=t.split("/");e.shift();for(var n=[],i=0;i<e.length;i++)if(e[i].match(/^[^=]+=.+$/))n.push(e[i]);else{var s=n.length-1;n[s]=n[s]+"/"+e[i]}for(i=0;i<n.length;i++)this.asn1Array.push(new r.RDN({str:n[i]}))},this.setByLdapString=function(t){var e=r.X500Name.ldapToOneline(t);this.setByString(e)},this.setByObject=function(t){for(var e in t)if(t.hasOwnProperty(e)){var r=new K.asn1.x509.RDN({str:e+"="+t[e]});this.asn1Array?this.asn1Array.push(r):this.asn1Array=[r]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new e.DERSequence({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t){var i;if(void 0!==t.str?this.setByString(t.str):void 0!==t.ldapstr?this.setByLdapString(t.ldapstr):"object"==typeof t&&this.setByObject(t),void 0!==t.certissuer)(i=new X509).hex=n(t.certissuer),this.hTLV=i.getIssuerHex();if(void 0!==t.certsubject)(i=new X509).hex=n(t.certsubject),this.hTLV=i.getSubjectHex()}},s.lang.extend(K.asn1.x509.X500Name,K.asn1.ASN1Object),K.asn1.x509.X500Name.onelineToLDAP=function(t){if("/"!==t.substr(0,1))throw"malformed input";var e=(t=t.substr(1)).split("/");return e.reverse(),(e=e.map((function(t){return t.replace(/,/,"\\,")}))).join(",")},K.asn1.x509.X500Name.ldapToOneline=function(t){for(var e=t.split(","),r=!1,n=[],i=0;e.length>0;i++){var s=e.shift();if(!0===r){var o=(n.pop()+","+s).replace(/\\,/g,",");n.push(o),r=!1}else n.push(s);"\\"===s.substr(-1,1)&&(r=!0)}return(n=n.map((function(t){return t.replace("/","\\/")}))).reverse(),"/"+n.join("/")},K.asn1.x509.RDN=function(t){K.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(t){this.asn1Array.push(new K.asn1.x509.AttributeTypeAndValue({str:t}))},this.addByMultiValuedString=function(t){for(var e=K.asn1.x509.RDN.parseString(t),r=0;r<e.length;r++)this.addByString(e[r])},this.getEncodedHex=function(){var t=new K.asn1.DERSet({array:this.asn1Array});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.addByMultiValuedString(t.str)},s.lang.extend(K.asn1.x509.RDN,K.asn1.ASN1Object),K.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),r=!1,n=[],i=0;e.length>0;i++){var s=e.shift();if(!0===r){var o=(n.pop()+"+"+s).replace(/\\\+/g,"+");n.push(o),r=!1}else n.push(s);"\\"===s.substr(-1,1)&&(r=!0)}var a=!1,c=[];for(i=0;n.length>0;i++){s=n.shift();if(!0===a){var u=c.pop();if(s.match(/"$/)){o=(u+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2");c.push(o),a=!1}else c.push(u+"+"+s)}else c.push(s);s.match(/^[^=]+="/)&&(a=!0)}return c},K.asn1.x509.AttributeTypeAndValue=function(t){K.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var e=K.asn1;this.setByString=function(t){var e=t.match(/^([^=]+)=(.+)$/);if(!e)throw"malformed attrTypeAndValueStr: "+t;this.setByAttrTypeAndValueStr(e[1],e[2])},this.setByAttrTypeAndValueStr=function(t,e){this.typeObj=K.asn1.x509.OID.atype2obj(t);var r="utf8";"C"==t&&(r="prn"),this.valueObj=this.getValueObj(r,e)},this.getValueObj=function(t,r){if("utf8"==t)return new e.DERUTF8String({str:r});if("prn"==t)return new e.DERPrintableString({str:r});if("tel"==t)return new e.DERTeletexString({str:r});if("ia5"==t)return new e.DERIA5String({str:r});throw"unsupported directory string type: type="+t+" value="+r},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=t.getEncodedHex(),this.TLV},void 0!==t&&void 0!==t.str&&this.setByString(t.str)},s.lang.extend(K.asn1.x509.AttributeTypeAndValue,K.asn1.ASN1Object),K.asn1.x509.SubjectPublicKeyInfo=function(t){K.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var e=K,r=e.asn1,n=r.DERInteger,i=r.DERBitString,s=r.DERObjectIdentifier,o=r.DERSequence,a=r.ASN1Util.newObject,c=r.x509.AlgorithmIdentifier,u=e.crypto;u.ECDSA,u.DSA;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new o({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var t=this.getASN1Object();return this.hTLV=t.getEncodedHex(),this.hTLV},this.setPubKey=function(t){try{if(t instanceof RSAKey){var e=a({seq:[{int:{bigint:t.n}},{int:{int:t.e}}]}).getEncodedHex();this.asn1AlgId=new c({name:"rsaEncryption"}),this.asn1SubjPKey=new i({hex:"00"+e})}}catch(t){}try{if(t instanceof K.crypto.ECDSA){var r=new s({name:t.curveName});this.asn1AlgId=new c({name:"ecPublicKey",asn1params:r}),this.asn1SubjPKey=new i({hex:"00"+t.pubKeyHex})}}catch(t){}try{if(t instanceof K.crypto.DSA){r=new a({seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]});this.asn1AlgId=new c({name:"dsa",asn1params:r});var o=new n({bigint:t.y});this.asn1SubjPKey=new i({hex:"00"+o.getEncodedHex()})}}catch(t){}},void 0!==t&&this.setPubKey(t)},s.lang.extend(K.asn1.x509.SubjectPublicKeyInfo,K.asn1.ASN1Object),K.asn1.x509.Time=function(t){K.asn1.x509.Time.superclass.constructor.call(this);var e=K.asn1,r=e.DERUTCTime,n=e.DERGeneralizedTime;this.setTimeParams=function(t){this.timeParams=t},this.getEncodedHex=function(){var t=null;return t=null!=this.timeParams?"utc"==this.type?new r(this.timeParams):new n(this.timeParams):"utc"==this.type?new r:new n,this.TLV=t.getEncodedHex(),this.TLV},this.type="utc",void 0!==t&&(void 0!==t.type?this.type=t.type:void 0!==t.str&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)},s.lang.extend(K.asn1.x509.Time,K.asn1.ASN1Object),K.asn1.x509.AlgorithmIdentifier=function(t){K.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var e=K.asn1;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw"algorithm not specified";null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=e.x509.OID.name2obj(this.nameAlg));var t=[this.asn1Alg];null!==this.asn1Params&&t.push(this.asn1Params);var r=new e.DERSequence({array:t});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==t&&(void 0!==t.name&&(this.nameAlg=t.name),void 0!==t.asn1params&&(this.asn1Params=t.asn1params),void 0!==t.paramempty&&(this.paramEmpty=t.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){var r=this.nameAlg.toLowerCase();"withdsa"!==r.substr(-7,7)&&"withecdsa"!==r.substr(-9,9)&&(this.asn1Params=new e.DERNull)}},s.lang.extend(K.asn1.x509.AlgorithmIdentifier,K.asn1.ASN1Object),K.asn1.x509.GeneralName=function(t){K.asn1.x509.GeneralName.superclass.constructor.call(this);var e={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},r=K.asn1,n=(r.DERSequence,r.DEROctetString),i=r.DERIA5String,s=r.DERTaggedObject,o=r.ASN1Object,a=r.x509.X500Name,c=pemtohex;this.explicit=!1,this.setByParam=function(t){var r=null;if(void 0!==t){if(void 0!==t.rfc822&&(this.type="rfc822",r=new i({str:t[this.type]})),void 0!==t.dns&&(this.type="dns",r=new i({str:t[this.type]})),void 0!==t.uri&&(this.type="uri",r=new i({str:t[this.type]})),void 0!==t.dn&&(this.type="dn",this.explicit=!0,r=new a({str:t.dn})),void 0!==t.ldapdn&&(this.type="dn",this.explicit=!0,r=new a({ldapstr:t.ldapdn})),void 0!==t.certissuer){this.type="dn",this.explicit=!0;var u=null;if((l=t.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=l.indexOf("-----BEGIN ")&&(u=c(l)),null==u)throw"certissuer param not cert";(f=new X509).hex=u;var h=f.getIssuerHex();(r=new o).hTLV=h}if(void 0!==t.certsubj){this.type="dn",this.explicit=!0;var l,f;u=null;if((l=t.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=l.indexOf("-----BEGIN ")&&(u=c(l)),null==u)throw"certsubj param not cert";(f=new X509).hex=u;h=f.getSubjectHex();(r=new o).hTLV=h}if(void 0!==t.ip){this.type="ip",this.explicit=!1;var p,d=t.ip,g="malformed IP address";if(d.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(p=intarystrtohex("["+d.split(".").join(",")+"]")).length)throw g}else if(d.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))p=ipv6tohex(d);else{if(!d.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw g;p=d}r=new n({hex:p})}if(null==this.type)throw"unsupported type in params="+t;this.asn1Obj=new s({explicit:this.explicit,tag:e[this.type],obj:r})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==t&&this.setByParam(t)},s.lang.extend(K.asn1.x509.GeneralName,K.asn1.ASN1Object),K.asn1.x509.GeneralNames=function(t){K.asn1.x509.GeneralNames.superclass.constructor.call(this);var e=K.asn1;this.setByParamArray=function(t){for(var r=0;r<t.length;r++){var n=new e.x509.GeneralName(t[r]);this.asn1Array.push(n)}},this.getEncodedHex=function(){return new e.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==t&&this.setByParamArray(t)},s.lang.extend(K.asn1.x509.GeneralNames,K.asn1.ASN1Object),K.asn1.x509.DistributionPointName=function(t){K.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e=K.asn1,r=e.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new r({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==t){if(!e.x509.GeneralNames.prototype.isPrototypeOf(t))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=t}},s.lang.extend(K.asn1.x509.DistributionPointName,K.asn1.ASN1Object),K.asn1.x509.DistributionPoint=function(t){K.asn1.x509.DistributionPoint.superclass.constructor.call(this);var e=K.asn1;this.getEncodedHex=function(){var t=new e.DERSequence;if(null!=this.asn1DP){var r=new e.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});t.appendASN1Object(r)}return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.dpobj&&(this.asn1DP=t.dpobj)},s.lang.extend(K.asn1.x509.DistributionPoint,K.asn1.ASN1Object),K.asn1.x509.OID=new function(t){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.name2oidList[t])throw"Name of ObjectIdentifier not defined: "+t;var e=this.name2oidList[t],r=new K.asn1.DERObjectIdentifier({oid:e});return this.objCache[t]=r,r},this.atype2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.atype2oidList[t])throw"AttributeType name undefined: "+t;var e=this.atype2oidList[t],r=new K.asn1.DERObjectIdentifier({oid:e});return this.objCache[t]=r,r}},K.asn1.x509.OID.oid2name=function(t){var e=K.asn1.x509.OID.name2oidList;for(var r in e)if(e[r]==t)return r;return""},K.asn1.x509.OID.oid2atype=function(t){var e=K.asn1.x509.OID.atype2oidList;for(var r in e)if(e[r]==t)return r;return t},K.asn1.x509.OID.name2oid=function(t){var e=K.asn1.x509.OID.name2oidList;return void 0===e[t]?"":e[t]},K.asn1.x509.X509Util={},K.asn1.x509.X509Util.newCertPEM=function(t){var e=K.asn1.x509,r=e.TBSCertificate,n=e.Certificate,i=new r;if(void 0===t.serial)throw"serial number undefined.";if(i.setSerialNumberByParam(t.serial),"string"!=typeof t.sigalg.name)throw"unproper signature algorithm name";if(i.setSignatureAlgByParam(t.sigalg),void 0===t.issuer)throw"issuer name undefined.";if(i.setIssuerByParam(t.issuer),void 0===t.notbefore)throw"notbefore undefined.";if(i.setNotBeforeByParam(t.notbefore),void 0===t.notafter)throw"notafter undefined.";if(i.setNotAfterByParam(t.notafter),void 0===t.subject)throw"subject name undefined.";if(i.setSubjectByParam(t.subject),void 0===t.sbjpubkey)throw"subject public key undefined.";if(i.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var s=0;s<t.ext.length;s++)for(key in t.ext[s])i.appendExtensionByName(key,t.ext[s][key]);if(void 0===t.cakey&&void 0===t.sighex)throw"param cakey and sighex undefined.";var o=null;return t.cakey&&(o=new n({tbscertobj:i,prvkeyobj:!0===t.cakey.isPrivate?t.cakey:J.getKey.apply(null,t.cakey)})).sign(),t.sighex&&(o=new n({tbscertobj:i})).setSignatureHex(t.sighex),o.getPEMString()},void 0!==K&&K||(K={}),void 0!==K.asn1&&K.asn1||(K.asn1={}),void 0!==K.asn1.cms&&K.asn1.cms||(K.asn1.cms={}),K.asn1.cms.Attribute=function(t){var e=K.asn1;e.cms.Attribute.superclass.constructor.call(this),this.getEncodedHex=function(){var t,r,n;t=new e.DERObjectIdentifier({oid:this.attrTypeOid}),r=new e.DERSet({array:this.valueList});try{r.getEncodedHex()}catch(t){throw"fail valueSet.getEncodedHex in Attribute(1)/"+t}n=new e.DERSequence({array:[t,r]});try{this.hTLV=n.getEncodedHex()}catch(t){throw"failed seq.getEncodedHex in Attribute(2)/"+t}return this.hTLV}},s.lang.extend(K.asn1.cms.Attribute,K.asn1.ASN1Object),K.asn1.cms.ContentType=function(t){var e=K.asn1;e.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var r=null;if(void 0!==t){r=new e.DERObjectIdentifier(t);this.valueList=[r]}},s.lang.extend(K.asn1.cms.ContentType,K.asn1.cms.Attribute),K.asn1.cms.MessageDigest=function(t){var e=K,r=e.asn1,n=r.DEROctetString,i=r.cms;if(i.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==t)if(t.eciObj instanceof i.EncapsulatedContentInfo&&"string"==typeof t.hashAlg){var s=t.eciObj.eContentValueHex,o=t.hashAlg;(a=new n({hex:e.crypto.Util.hashHex(s,o)})).getEncodedHex(),this.valueList=[a]}else{var a;(a=new n(t)).getEncodedHex(),this.valueList=[a]}},s.lang.extend(K.asn1.cms.MessageDigest,K.asn1.cms.Attribute),K.asn1.cms.SigningTime=function(t){var e=K.asn1;if(e.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==t){var r=new e.x509.Time(t);try{r.getEncodedHex()}catch(t){throw"SigningTime.getEncodedHex() failed/"+t}this.valueList=[r]}},s.lang.extend(K.asn1.cms.SigningTime,K.asn1.cms.Attribute),K.asn1.cms.SigningCertificate=function(t){var e=K,r=e.asn1,n=r.DERSequence,i=r.cms;e.crypto;i.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12",this.setCerts=function(t){for(var s=[],o=0;o<t.length;o++){var a=pemtohex(t[o]),c=e.crypto.Util.hashHex(a,"sha1"),u=new r.DEROctetString({hex:c});u.getEncodedHex();var h=new i.IssuerAndSerialNumber({cert:t[o]});h.getEncodedHex();var l=new n({array:[u,h]});l.getEncodedHex(),s.push(l)}var f=new n({array:s});f.getEncodedHex(),this.valueList=[f]},void 0!==t&&"object"==typeof t.array&&this.setCerts(t.array)},s.lang.extend(K.asn1.cms.SigningCertificate,K.asn1.cms.Attribute),K.asn1.cms.SigningCertificateV2=function(t){var e=K,r=e.asn1,n=r.DERSequence,i=r.x509,s=r.cms,o=e.crypto;if(s.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47",this.setCerts=function(t,e){for(var a=[],c=0;c<t.length;c++){var u=pemtohex(t[c]),h=[];"sha256"!==e&&h.push(new i.AlgorithmIdentifier({name:e}));var l=o.Util.hashHex(u,e),f=new r.DEROctetString({hex:l});f.getEncodedHex(),h.push(f);var p=new s.IssuerAndSerialNumber({cert:t[c]});p.getEncodedHex(),h.push(p);var d=new n({array:h});d.getEncodedHex(),a.push(d)}var g=new n({array:a});g.getEncodedHex(),this.valueList=[g]},void 0!==t&&"object"==typeof t.array){var a="sha256";"string"==typeof t.hashAlg&&(a=t.hashAlg),this.setCerts(t.array,a)}},s.lang.extend(K.asn1.cms.SigningCertificateV2,K.asn1.cms.Attribute),K.asn1.cms.IssuerAndSerialNumber=function(t){var e=K.asn1,r=e.DERInteger,n=e.cms,i=e.x509.X500Name,s=X509;n.IssuerAndSerialNumber.superclass.constructor.call(this);this.setByCertPEM=function(t){var e=pemtohex(t),n=new s;n.hex=e;var o=n.getIssuerHex();this.dIssuer=new i,this.dIssuer.hTLV=o;var a=n.getSerialNumberHex();this.dSerial=new r({hex:a})},this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),t.issuer&&t.serial&&(t.issuer instanceof i?this.dIssuer=t.issuer:this.dIssuer=new i(t.issuer),t.serial instanceof r?this.dSerial=t.serial:this.dSerial=new r(t.serial)),"string"==typeof t.cert&&this.setByCertPEM(t.cert))},s.lang.extend(K.asn1.cms.IssuerAndSerialNumber,K.asn1.ASN1Object),K.asn1.cms.AttributeList=function(t){var e=K.asn1,r=e.cms;r.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(t){t instanceof r.Attribute&&this.list.push(t)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new e.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},s.lang.extend(K.asn1.cms.AttributeList,K.asn1.ASN1Object),K.asn1.cms.SignerInfo=function(t){var e=K,r=e.asn1,n=r.DERTaggedObject,i=r.cms,s=i.AttributeList,o=i.ContentType,a=i.EncapsulatedContentInfo,c=i.MessageDigest,u=i.SignedData,h=r.x509.AlgorithmIdentifier,l=e.crypto,f=J;i.SignerInfo.superclass.constructor.call(this),this.dCMSVersion=new r.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new s,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new s,this.setSignerIdentifier=function(t){if("string"==typeof t&&-1!=t.indexOf("CERTIFICATE")&&-1!=t.indexOf("BEGIN")&&-1!=t.indexOf("END")){this.dSignerIdentifier=new i.IssuerAndSerialNumber({cert:t})}},this.setForContentAndHash=function(t){void 0!==t&&(t.eciObj instanceof a&&(this.dSignedAttrs.add(new o({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new c({eciObj:t.eciObj,hashAlg:t.hashAlg}))),void 0!==t.sdObj&&t.sdObj instanceof u&&-1==t.sdObj.digestAlgNameList.join(":").indexOf(t.hashAlg)&&t.sdObj.digestAlgNameList.push(t.hashAlg),"string"==typeof t.hashAlg&&(this.dDigestAlgorithm=new h({name:t.hashAlg})))},this.sign=function(t,e){this.dSigAlg=new h({name:e});var n=this.dSignedAttrs.getEncodedHex(),i=f.getKey(t),s=new l.Signature({alg:e});s.init(i),s.updateHex(n);var o=s.sign();this.dSig=new r.DEROctetString({hex:o})},this.addUnsigned=function(t){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(t)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof s&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var t=new n({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),e=null;this.dUnsignedAttrs.length()>0&&(e=new n({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var i=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,t,this.dSigAlg,this.dSig];null!=e&&i.push(e);var o=new r.DERSequence({array:i});return this.hTLV=o.getEncodedHex(),this.hTLV}},s.lang.extend(K.asn1.cms.SignerInfo,K.asn1.ASN1Object),K.asn1.cms.EncapsulatedContentInfo=function(t){var e=K.asn1,r=e.DERTaggedObject,n=e.DERSequence,i=e.DERObjectIdentifier,s=e.DEROctetString;e.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.dEContentType=new i({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(t){t.match(/^[0-2][.][0-9.]+$/)?this.dEContentType=new i({oid:t}):this.dEContentType=new i({name:t})},this.setContentValue=function(t){void 0!==t&&("string"==typeof t.hex?this.eContentValueHex=t.hex:"string"==typeof t.str&&(this.eContentValueHex=utf8tohex(t.str)))},this.setContentValueHex=function(t){this.eContentValueHex=t},this.setContentValueStr=function(t){this.eContentValueHex=utf8tohex(t)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var t=new s({hex:this.eContentValueHex});this.dEContent=new r({obj:t,tag:"a0",explicit:!0});var e=[this.dEContentType];this.isDetached||e.push(this.dEContent);var i=new n({array:e});return this.hTLV=i.getEncodedHex(),this.hTLV}},s.lang.extend(K.asn1.cms.EncapsulatedContentInfo,K.asn1.ASN1Object),K.asn1.cms.ContentInfo=function(t){var e=K.asn1,r=e.DERTaggedObject,n=e.DERSequence,i=e.x509;K.asn1.cms.ContentInfo.superclass.constructor.call(this),this.dContentType=null,this.dContent=null,this.setContentType=function(t){"string"==typeof t&&(this.dContentType=i.OID.name2obj(t))},this.getEncodedHex=function(){var t=new r({obj:this.dContent,tag:"a0",explicit:!0}),e=new n({array:[this.dContentType,t]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&(t.type&&this.setContentType(t.type),t.obj&&t.obj instanceof e.ASN1Object&&(this.dContent=t.obj))},s.lang.extend(K.asn1.cms.ContentInfo,K.asn1.ASN1Object),K.asn1.cms.SignedData=function(t){var e=K.asn1,r=e.ASN1Object,n=e.DERInteger,i=e.DERSet,s=e.DERSequence,o=e.DERTaggedObject,a=e.cms,c=a.EncapsulatedContentInfo,u=a.SignerInfo,h=a.ContentInfo,l=e.x509.AlgorithmIdentifier;K.asn1.cms.SignedData.superclass.constructor.call(this),this.dCMSVersion=new n({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new c,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new u],this.addCertificatesByPEM=function(t){var e=pemtohex(t),n=new r;n.hTLV=e,this.certificateList.push(n)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var t=[],e=0;e<this.digestAlgNameList.length;e++){var r=this.digestAlgNameList[e],n=new l({name:r});t.push(n)}this.dDigestAlgs=new i({array:t})}var a=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&this.certificateList.length>0){var c=new i({array:this.certificateList});this.dCerts=new o({obj:c,tag:"a0",explicit:!1})}null!=this.dCerts&&a.push(this.dCerts);var u=new i({array:this.signerInfoList});a.push(u);var h=new s({array:a});return this.hTLV=h.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new h({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){return hextopem(this.getContentInfoEncodedHex(),"CMS")}},s.lang.extend(K.asn1.cms.SignedData,K.asn1.ASN1Object),K.asn1.cms.CMSUtil=new function(){},K.asn1.cms.CMSUtil.newSignedData=function(t){var e=K.asn1,r=e.cms,n=r.SignerInfo,i=r.SignedData,s=r.SigningTime,o=r.SigningCertificate,a=r.SigningCertificateV2,c=e.cades.SignaturePolicyIdentifier,u=new i;if(u.dEncapContentInfo.setContentValue(t.content),"object"==typeof t.certs)for(var h=0;h<t.certs.length;h++)u.addCertificatesByPEM(t.certs[h]);u.signerInfoList=[];for(h=0;h<t.signerInfos.length;h++){var l=t.signerInfos[h],f=new n;for(attrName in f.setSignerIdentifier(l.signerCert),f.setForContentAndHash({sdObj:u,eciObj:u.dEncapContentInfo,hashAlg:l.hashAlg}),l.sAttr){var p=l.sAttr[attrName];if("SigningTime"==attrName){var d=new s(p);f.dSignedAttrs.add(d)}if("SigningCertificate"==attrName){d=new o(p);f.dSignedAttrs.add(d)}if("SigningCertificateV2"==attrName){d=new a(p);f.dSignedAttrs.add(d)}if("SignaturePolicyIdentifier"==attrName){d=new c(p);f.dSignedAttrs.add(d)}}f.sign(l.signerPrvKey,l.sigAlg),u.signerInfoList.push(f)}return u},K.asn1.cms.CMSUtil.verifySignedData=function(t){var r=K,n=r.asn1,i=n.cms,s=(i.SignerInfo,i.SignedData,i.SigningTime,i.SigningCertificate,i.SigningCertificateV2,n.cades.SignaturePolicyIdentifier,r.lang.String.isHex),o=W,a=o.getVbyList,c=o.getTLVbyList,u=o.getIdxbyList,h=o.getChildIdx,l=o.getTLV,p=o.oidname,d=r.crypto.Util.hashHex;void 0===t.cms&&s(t.cms);var g=t.cms,k=function(t,e){var r=e.idx;e.signerid_issuer1=c(t,r,[1,0],"30"),e.signerid_serial1=a(t,r,[1,1],"02"),e.hashalg=p(a(t,r,[2,0],"06"));var n=u(t,r,[3],"a0");e.idxSignedAttrs=n,f(t,e,n);var i=h(t,r).length;if(i<6)throw"malformed SignerInfo";e.sigalg=p(a(t,r,[i-2,0],"06")),e.sigval=a(t,r,[i-1],"04")},f=function(t,e,r){var n=h(t,r);e.signedAttrIdxList=n;for(var i=0;i<n.length;i++){var s,o=n[i],c=a(t,o,[0],"06");"2a864886f70d010905"===c?(s=hextoutf8(a(t,o,[1,0])),e.saSigningTime=s):"2a864886f70d010904"===c&&(s=a(t,o,[1,0],"04"),e.saMessageDigest=s)}},e=function(t,e,r,n){r.verifyDetail={};var i=r.verifyDetail,s=e.parse.econtent,o=r.hashalg,a=r.saMessageDigest;i.validMessageDigest=!1,d(s,o)===a&&(i.validMessageDigest=!0),function(t,e,r,n){var i,s=e.parse.certsIdx;if(void 0===e.certs){i=[],e.certkeys=[];for(var o=h(t,s),a=0;a<o.length;a++){var c=l(t,o[a]),u=new X509;u.readCertHex(c),i[a]=u,e.certkeys[a]=u.getPublicKey()}e.certs=i}else i=e.certs;e.cccc=i.length,e.cccci=o.length;for(a=0;a<i.length;a++){var f=u.getIssuerHex(),p=u.getSerialNumberHex();r.signerid_issuer1===f&&r.signerid_serial1===p&&(r.certkey_idx=a)}}(t,e,r),i.validSignatureValue=!1;var c=r.sigalg,u="31"+l(t,r.idxSignedAttrs).substr(2);r.signedattrshex=u;var f=e.certs[r.certkey_idx].getPublicKey(),p=new K.crypto.Signature({alg:c});p.init(f),p.updateHex(u);var g=p.verify(r.sigval);i.validSignatureValue_isValid=g,!0===g&&(i.validSignatureValue=!0),r.isValid=!1,i.validMessageDigest&&i.validSignatureValue&&(r.isValid=!0)},y={isValid:!1,parse:{}};return function(t,e){if("2a864886f70d010702"!==a(t,0,[0],"06"))return e;e.cmsType="signedData",e.econtent=a(t,0,[1,0,2,1,0]),function(t,e){for(var r,n=3;n<6;n++)if(void 0!==(r=u(t,0,[1,0,n]))){var i=t.substr(r,2);"a0"===i&&(e.certsIdx=r),"a1"===i&&(e.revinfosIdx=r),"31"===i&&(e.signerinfosIdx=r)}}(t,e),e.signerInfos=[],function(t,e){var r=e.signerinfosIdx;if(void 0!==r){var n=h(t,r);e.signerInfoIdxList=n;for(var i=0;i<n.length;i++){var s={idx:n[i]};k(t,s),e.signerInfos.push(s)}}}(t,e)}(g,y.parse),function(t,r){for(var n=r.parse.signerInfos,i=n.length,s=!0,o=0;o<i;o++){var a=n[o];e(t,r,a,o),a.isValid||(s=!1)}r.isValid=s}(g,y),y},void 0!==K&&K||(K={}),void 0!==K.asn1&&K.asn1||(K.asn1={}),void 0!==K.asn1.tsp&&K.asn1.tsp||(K.asn1.tsp={}),K.asn1.tsp.Accuracy=function(t){var e=K.asn1,r=e.DERInteger,n=e.DERSequence,i=e.DERTaggedObject;e.tsp.Accuracy.superclass.constructor.call(this),this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var t=null,e=null,s=null,o=[];if(null!=this.seconds&&(t=new r({int:this.seconds}),o.push(t)),null!=this.millis){var a=new r({int:this.millis});e=new i({obj:a,tag:"80",explicit:!1}),o.push(e)}if(null!=this.micros){var c=new r({int:this.micros});s=new i({obj:c,tag:"81",explicit:!1}),o.push(s)}var u=new n({array:o});return this.hTLV=u.getEncodedHex(),this.hTLV},void 0!==t&&("number"==typeof t.seconds&&(this.seconds=t.seconds),"number"==typeof t.millis&&(this.millis=t.millis),"number"==typeof t.micros&&(this.micros=t.micros))},s.lang.extend(K.asn1.tsp.Accuracy,K.asn1.ASN1Object),K.asn1.tsp.MessageImprint=function(t){var e=K.asn1,r=e.DERSequence,n=e.DEROctetString,i=e.x509.AlgorithmIdentifier;e.tsp.MessageImprint.superclass.constructor.call(this),this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new r({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==t&&("string"==typeof t.hashAlg&&(this.dHashAlg=new i({name:t.hashAlg})),"string"==typeof t.hashValue&&(this.dHashValue=new n({hex:t.hashValue})))},s.lang.extend(K.asn1.tsp.MessageImprint,K.asn1.ASN1Object),K.asn1.tsp.TimeStampReq=function(t){var e=K.asn1,r=e.DERSequence,n=e.DERInteger,i=e.DERBoolean,s=e.DERObjectIdentifier,o=e.tsp,a=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.dVersion=new n({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(t){t instanceof a?this.dMessageImprint=t:"object"==typeof t&&(this.dMessageImprint=new a(t))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var t=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&t.push(this.dPolicy),null!=this.dNonce&&t.push(this.dNonce),this.certReq&&t.push(new i);var e=new r({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.mi&&this.setMessageImprint(t.mi),"object"==typeof t.policy&&(this.dPolicy=new s(t.policy)),"object"==typeof t.nonce&&(this.dNonce=new n(t.nonce)),"boolean"==typeof t.certreq&&(this.certReq=t.certreq))},s.lang.extend(K.asn1.tsp.TimeStampReq,K.asn1.ASN1Object),K.asn1.tsp.TSTInfo=function(t){var e=K.asn1,r=e.DERSequence,n=e.DERInteger,i=e.DERBoolean,s=e.DERGeneralizedTime,o=e.DERObjectIdentifier,a=e.tsp,c=a.MessageImprint,u=a.Accuracy,h=e.x509.X500Name;if(a.TSTInfo.superclass.constructor.call(this),this.dVersion=new n({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var t=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(t.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(t.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(t.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";t.push(this.dGenTime),null!=this.dAccuracy&&t.push(this.dAccuracy),null!=this.dOrdering&&t.push(this.dOrdering),null!=this.dNonce&&t.push(this.dNonce),null!=this.dTsa&&t.push(this.dTsa);var e=new r({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){if("string"==typeof t.policy){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:t.policy})}void 0!==t.messageImprint&&(this.dMessageImprint=new c(t.messageImprint)),void 0!==t.serialNumber&&(this.dSerialNumber=new n(t.serialNumber)),void 0!==t.genTime&&(this.dGenTime=new s(t.genTime)),void 0!==t.accuracy&&(this.dAccuracy=new u(t.accuracy)),void 0!==t.ordering&&1==t.ordering&&(this.dOrdering=new i),void 0!==t.nonce&&(this.dNonce=new n(t.nonce)),void 0!==t.tsa&&(this.dTsa=new h(t.tsa))}},s.lang.extend(K.asn1.tsp.TSTInfo,K.asn1.ASN1Object),K.asn1.tsp.TimeStampResp=function(t){var e=K.asn1,r=e.DERSequence,n=e.ASN1Object,i=e.tsp,s=i.PKIStatusInfo;i.TimeStampResp.superclass.constructor.call(this),this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dTST&&t.push(this.dTST);var e=new r({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new s(t.status)),void 0!==t.tst&&t.tst instanceof n&&(this.dTST=t.tst.getContentInfo()))},s.lang.extend(K.asn1.tsp.TimeStampResp,K.asn1.ASN1Object),K.asn1.tsp.PKIStatusInfo=function(t){var e=K.asn1,r=e.DERSequence,n=e.tsp,i=n.PKIStatus,s=n.PKIFreeText,o=n.PKIFailureInfo;n.PKIStatusInfo.superclass.constructor.call(this),this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dStatusString&&t.push(this.dStatusString),null!=this.dFailureInfo&&t.push(this.dFailureInfo);var e=new r({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&("object"==typeof t.status&&(this.dStatus=new i(t.status)),"object"==typeof t.statstr&&(this.dStatusString=new s({array:t.statstr})),"object"==typeof t.failinfo&&(this.dFailureInfo=new o(t.failinfo)))},s.lang.extend(K.asn1.tsp.PKIStatusInfo,K.asn1.ASN1Object),K.asn1.tsp.PKIStatus=function(t){var e=K.asn1,r=e.DERInteger,n=e.tsp,i=n.PKIStatus;n.PKIStatus.superclass.constructor.call(this);if(this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==t)if(void 0!==t.name){var s=i.valueList;if(void 0===s[t.name])throw"name undefined: "+t.name;this.dStatus=new r({int:s[t.name]})}else this.dStatus=new r(t)},s.lang.extend(K.asn1.tsp.PKIStatus,K.asn1.ASN1Object),K.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},K.asn1.tsp.PKIFreeText=function(t){var e=K.asn1,r=e.DERSequence,n=e.DERUTF8String;e.tsp.PKIFreeText.superclass.constructor.call(this),this.textList=[],this.getEncodedHex=function(){for(var t=[],e=0;e<this.textList.length;e++)t.push(new n({str:this.textList[e]}));var i=new r({array:t});return this.hTLV=i.getEncodedHex(),this.hTLV},void 0!==t&&"object"==typeof t.array&&(this.textList=t.array)},s.lang.extend(K.asn1.tsp.PKIFreeText,K.asn1.ASN1Object),K.asn1.tsp.PKIFailureInfo=function(t){var e=K.asn1,r=e.DERBitString,n=e.tsp.PKIFailureInfo;if(n.superclass.constructor.call(this),this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var t=new Number(this.value).toString(2),e=new r;return e.setByBinaryString(t),this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t)if("string"==typeof t.name){var i=n.valueList;if(void 0===i[t.name])throw"name undefined: "+t.name;this.value=i[t.name]}else"number"==typeof t.int&&(this.value=t.int)},s.lang.extend(K.asn1.tsp.PKIFailureInfo,K.asn1.ASN1Object),K.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},K.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(t,e){throw"not implemented yet"}},K.asn1.tsp.SimpleTSAAdapter=function(t){var e=K,r=e.asn1.tsp,n=e.crypto.Util.hashHex;r.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(t,e){var i=n(t,e);this.params.tstInfo.messageImprint={hashAlg:e,hashValue:i},this.params.tstInfo.serialNumber={int:this.serial++};var s=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:s},r.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},s.lang.extend(K.asn1.tsp.SimpleTSAAdapter,K.asn1.tsp.AbstractTSAAdapter),K.asn1.tsp.FixedTSAAdapter=function(t){var e=K,r=e.asn1.tsp,n=e.crypto.Util.hashHex;r.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(t,e){var i=n(t,e);return this.params.tstInfo.messageImprint={hashAlg:e,hashValue:i},r.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},s.lang.extend(K.asn1.tsp.FixedTSAAdapter,K.asn1.tsp.AbstractTSAAdapter),K.asn1.tsp.TSPUtil=new function(){},K.asn1.tsp.TSPUtil.newTimeStampToken=function(t){var e=K.asn1,r=e.cms,n=(e.tsp,e.tsp.TSTInfo),i=new r.SignedData,s=new n(t.tstInfo).getEncodedHex();if(i.dEncapContentInfo.setContentValue({hex:s}),i.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof t.certs)for(var o=0;o<t.certs.length;o++)i.addCertificatesByPEM(t.certs[o]);var a=i.signerInfoList[0];a.setSignerIdentifier(t.signerCert),a.setForContentAndHash({sdObj:i,eciObj:i.dEncapContentInfo,hashAlg:t.hashAlg});var c=new r.SigningCertificate({array:[t.signerCert]});return a.dSignedAttrs.add(c),a.sign(t.signerPrvKey,t.sigAlg),i},K.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var e=W,r=e.getChildIdx,n=e.getV,i=e.getTLV,s={certreq:!1},o=r(t,0);if(o.length<2)throw"TimeStampReq must have at least 2 items";var a=i(t,o[1]);s.mi=K.asn1.tsp.TSPUtil.parseMessageImprint(a);for(var c=2;c<o.length;c++){var u=o[c],h=t.substr(u,2);if("06"==h){var l=n(t,u);s.policy=e.hextooidstr(l)}"02"==h&&(s.nonce=n(t,u)),"01"==h&&(s.certreq=!0)}return s},K.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var e=W,r=e.getChildIdx,n=e.getV,i=e.getIdxbyList,s={};if("30"!=t.substr(0,2))throw"head of messageImprint hex shall be '30'";r(t,0);var o=n(t,i(t,0,[0,0])),a=e.hextooidstr(o),c=K.asn1.x509.OID.oid2name(a);if(""==c)throw"hashAlg name undefined: "+a;var u=c,h=i(t,0,[1]);return s.hashAlg=u,s.hashValue=n(t,h),s},void 0!==K&&K||(K={}),void 0!==K.asn1&&K.asn1||(K.asn1={}),void 0!==K.asn1.cades&&K.asn1.cades||(K.asn1.cades={}),K.asn1.cades.SignaturePolicyIdentifier=function(t){var e=K.asn1,r=e.DERObjectIdentifier,n=e.DERSequence,i=e.cades,s=i.OtherHashAlgAndValue;if(i.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15",void 0!==t&&"string"==typeof t.oid&&"object"==typeof t.hash){var o=new n({array:[new r({oid:t.oid}),new s(t.hash)]});this.valueList=[o]}},s.lang.extend(K.asn1.cades.SignaturePolicyIdentifier,K.asn1.cms.Attribute),K.asn1.cades.OtherHashAlgAndValue=function(t){var e=K.asn1,r=e.DERSequence,n=e.DEROctetString,i=e.x509.AlgorithmIdentifier;e.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var t=new r({array:[this.dAlg,this.dHash]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t&&"string"==typeof t.alg&&"string"==typeof t.hash&&(this.dAlg=new i({name:t.alg}),this.dHash=new n({hex:t.hash}))},s.lang.extend(K.asn1.cades.OtherHashAlgAndValue,K.asn1.ASN1Object),K.asn1.cades.SignatureTimeStamp=function(t){var e=K.asn1,r=e.ASN1Object;e.x509;if(e.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null,void 0!==t){if(void 0!==t.res)if("string"==typeof t.res&&t.res.match(/^[0-9A-Fa-f]+$/));else if(!(t.res instanceof r))throw"res param shall be ASN1Object or hex string";if(void 0!==t.tst)if("string"==typeof t.tst&&t.tst.match(/^[0-9A-Fa-f]+$/)){var n=new r;this.tstHex=t.tst,n.hTLV=this.tstHex,n.getEncodedHex(),this.valueList=[n]}else if(!(t.tst instanceof r))throw"tst param shall be ASN1Object or hex string"}},s.lang.extend(K.asn1.cades.SignatureTimeStamp,K.asn1.cms.Attribute),K.asn1.cades.CompleteCertificateRefs=function(t){var e=K.asn1.cades;e.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21",this.setByArray=function(t){this.valueList=[];for(var r=0;r<t.length;r++){var n=new e.OtherCertID(t[r]);this.valueList.push(n)}},void 0!==t&&"object"==typeof t&&"number"==typeof t.length&&this.setByArray(t)},s.lang.extend(K.asn1.cades.CompleteCertificateRefs,K.asn1.cms.Attribute),K.asn1.cades.OtherCertID=function(t){var e=K.asn1,r=e.cms,n=e.cades;n.OtherCertID.superclass.constructor.call(this),this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(t){this.dOtherCertHash=new n.OtherHash(t),this.hasIssuerSerial&&(this.dIssuerSerial=new r.IssuerAndSerialNumber(t))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var t=[this.dOtherCertHash];null!=this.dIssuerSerial&&t.push(this.dIssuerSerial);var r=new e.DERSequence({array:t});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==t&&("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&this.setByCertPEM(t),"object"==typeof t&&(!1===t.hasis&&(this.hasIssuerSerial=!1),"string"==typeof t.cert&&this.setByCertPEM(t.cert)))},s.lang.extend(K.asn1.cades.OtherCertID,K.asn1.ASN1Object),K.asn1.cades.OtherHash=function(t){var e=K,r=e.asn1,n=(r.cms,r.cades),i=n.OtherHashAlgAndValue,s=e.crypto.Util.hashHex;if(n.OtherHash.superclass.constructor.call(this),this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(t){if(-1==t.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var e=pemtohex(t),r=s(e,this.alg);this.dOtherHash=new i({alg:this.alg,hash:r})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==t)if("string"==typeof t)if(-1!=t.indexOf("-----BEGIN "))this.setByCertPEM(t);else{if(!t.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new r.DEROctetString({hex:t})}else"object"==typeof t&&("string"==typeof t.cert?("string"==typeof t.alg&&(this.alg=t.alg),this.setByCertPEM(t.cert)):this.dOtherHash=new i(t))},s.lang.extend(K.asn1.cades.OtherHash,K.asn1.ASN1Object),K.asn1.cades.CAdESUtil=new function(){},K.asn1.cades.CAdESUtil.addSigTS=function(t,e,r){},K.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var e=W,r=e.getChildIdx,n=e.getTLV,i=e.getTLVbyList,s=e.getIdxbyList,o=K.asn1,a=o.ASN1Object,c=o.cms.SignedData,u=o.cades.CAdESUtil,h={};if("06092a864886f70d010702"!=i(t,0,[0]))throw"hex is not CMS SignedData";var l=r(t,s(t,0,[1,0]));if(l.length<4)throw"num of SignedData elem shall be 4 at least";var f=l.shift();h.version=n(t,f);var p=l.shift();h.algs=n(t,p);var d=l.shift();h.encapcontent=n(t,d),h.certs=null,h.revs=null,h.si=[];var g=l.shift();"a0"==t.substr(g,2)&&(h.certs=n(t,g),g=l.shift()),"a1"==t.substr(g,2)&&(h.revs=n(t,g),g=l.shift());var y=g;if("31"!=t.substr(y,2))throw"Can't find signerInfos";for(var v=r(t,y),m=0;m<v.length;m++){var b=v[m],S=u.parseSignerInfoForAddingUnsigned(t,b,m);h.si[m]=S}var x=null;h.obj=new c,(x=new a).hTLV=h.version,h.obj.dCMSVersion=x,(x=new a).hTLV=h.algs,h.obj.dDigestAlgs=x,(x=new a).hTLV=h.encapcontent,h.obj.dEncapContentInfo=x,(x=new a).hTLV=h.certs,h.obj.dCerts=x,h.obj.signerInfoList=[];for(m=0;m<h.si.length;m++)h.obj.signerInfoList.push(h.si[m].obj);return h},K.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e,r){var n=W,i=n.getChildIdx,s=n.getTLV,o=n.getV,a=K.asn1,c=a.ASN1Object,u=a.cms,h=u.AttributeList,l=u.SignerInfo,f={},p=i(t,e);if(6!=p.length)throw"not supported items for SignerInfo (!=6)";var d=p.shift();f.version=s(t,d);var g=p.shift();f.si=s(t,g);var y=p.shift();f.digalg=s(t,y);var v=p.shift();f.sattrs=s(t,v);var m=p.shift();f.sigalg=s(t,m);var b=p.shift();f.sig=s(t,b),f.sigval=o(t,b);var S=null;return f.obj=new l,(S=new c).hTLV=f.version,f.obj.dCMSVersion=S,(S=new c).hTLV=f.si,f.obj.dSignerIdentifier=S,(S=new c).hTLV=f.digalg,f.obj.dDigestAlgorithm=S,(S=new c).hTLV=f.sattrs,f.obj.dSignedAttrs=S,(S=new c).hTLV=f.sigalg,f.obj.dSigAlg=S,(S=new c).hTLV=f.sig,f.obj.dSig=S,f.obj.dUnsignedAttrs=new h,f},void 0!==K.asn1.csr&&K.asn1.csr||(K.asn1.csr={}),K.asn1.csr.CertificationRequest=function(t){var e=K,r=e.asn1,n=r.DERBitString,i=r.DERSequence,s=r.csr,o=r.x509;s.CertificationRequest.superclass.constructor.call(this);this.sign=function(t,r){null==this.prvKey&&(this.prvKey=r),this.asn1SignatureAlg=new o.AlgorithmIdentifier({name:t}),sig=new e.crypto.Signature({alg:t}),sig.init(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new n({hex:"00"+this.hexSig});var s=new i({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=s.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return hextopem(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==t&&void 0!==t.csrinfo&&(this.asn1CSRInfo=t.csrinfo)},s.lang.extend(K.asn1.csr.CertificationRequest,K.asn1.ASN1Object),K.asn1.csr.CertificationRequestInfo=function(t){var e=K.asn1,r=e.DERInteger,n=e.DERSequence,i=e.DERSet,s=e.DERNull,o=e.DERTaggedObject,a=e.DERObjectIdentifier,c=e.csr,u=e.x509,h=u.X500Name,l=u.Extension,f=J;c.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new r({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(t){this.asn1Subject=new h(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=f.getKey(t);this.asn1SubjPKey=new u.SubjectPublicKeyInfo(e)},this.appendExtensionByName=function(t,e){l.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var t=new n({array:this.extensionsArray}),e=new i({array:[t]}),r=new n({array:[new a({oid:"1.2.840.113549.1.9.14"}),e]}),c=new o({explicit:!0,tag:"a0",obj:r});this.asn1Array.push(c)}else{c=new o({explicit:!1,tag:"a0",obj:new s});this.asn1Array.push(c)}var u=new n({array:this.asn1Array});return this.hTLV=u.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},s.lang.extend(K.asn1.csr.CertificationRequestInfo,K.asn1.ASN1Object),K.asn1.csr.CSRUtil=new function(){},K.asn1.csr.CSRUtil.newCSRPEM=function(t){var e=J,r=K.asn1.csr;if(void 0===t.subject)throw"parameter subject undefined";if(void 0===t.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===t.sigalg)throw"parameter sigalg undefined";if(void 0===t.sbjprvkey)throw"parameter sbjpubkey undefined";var n=new r.CertificationRequestInfo;if(n.setSubjectByParam(t.subject),n.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var i=0;i<t.ext.length;i++)for(key in t.ext[i])n.appendExtensionByName(key,t.ext[i][key]);var s=new r.CertificationRequest({csrinfo:n}),o=e.getKey(t.sbjprvkey);return s.sign(t.sigalg,o),s.getPEMString()},K.asn1.csr.CSRUtil.getInfo=function(t){var e=W.getTLVbyList,r={subject:{},pubkey:{}};if(-1==t.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var n=pemtohex(t,"CERTIFICATE REQUEST");return r.subject.hex=e(n,0,[0,1]),r.subject.name=X509.hex2dn(r.subject.hex),r.pubkey.hex=e(n,0,[0,2]),r.pubkey.obj=J.getKey(r.pubkey.hex,null,"pkcs8pub"),r},void 0!==K&&K||(K={}),void 0!==K.asn1&&K.asn1||(K.asn1={}),void 0!==K.asn1.ocsp&&K.asn1.ocsp||(K.asn1.ocsp={}),K.asn1.ocsp.DEFAULT_HASH="sha1",K.asn1.ocsp.CertID=function(t){var e=K,r=e.asn1,n=r.DEROctetString,i=r.DERInteger,s=r.DERSequence,o=r.x509.AlgorithmIdentifier,a=r.ocsp,c=a.DEFAULT_HASH,u=e.crypto.Util.hashHex,h=X509,l=W;if(a.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(t,e,r,s){void 0===s&&(s=c),this.dHashAlg=new o({name:s}),this.dIssuerNameHash=new n({hex:t}),this.dIssuerKeyHash=new n({hex:e}),this.dSerialNumber=new i({hex:r})},this.setByCert=function(t,e,r){void 0===r&&(r=c);var n=new h;n.readCertPEM(e);var i=new h;i.readCertPEM(t);var s=i.getPublicKeyHex(),o=l.getTLVbyList(s,0,[1,0],"30"),a=n.getSerialNumberHex(),f=u(i.getSubjectHex(),r),p=u(o,r);this.setByValue(f,p,a,r),this.hoge=n.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var t=[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber],e=new s({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){var f=t;if(void 0!==f.issuerCert&&void 0!==f.subjectCert){var p=c;void 0===f.alg&&(p=void 0),this.setByCert(f.issuerCert,f.subjectCert,p)}else{if(void 0===f.namehash||void 0===f.keyhash||void 0===f.serial)throw"invalid constructor arguments";p=c;void 0===f.alg&&(p=void 0),this.setByValue(f.namehash,f.keyhash,f.serial,p)}}},s.lang.extend(K.asn1.ocsp.CertID,K.asn1.ASN1Object),K.asn1.ocsp.Request=function(t){var e=K.asn1,r=e.DERSequence,n=e.ocsp;if(n.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var t=[];if(null===this.dReqCert)throw"reqCert not set";t.push(this.dReqCert);var e=new r({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t){var i=new n.CertID(t);this.dReqCert=i}},s.lang.extend(K.asn1.ocsp.Request,K.asn1.ASN1Object),K.asn1.ocsp.TBSRequest=function(t){var e=K.asn1,r=e.DERSequence,n=e.ocsp;n.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(t){for(var e=[],r=0;r<t.length;r++){var i=new n.Request(t[0]);e.push(i)}this.dRequestList=e},this.getEncodedHex=function(){var t=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var e=new r({array:this.dRequestList});if(t.push(e),null!==this.dRequestExt)throw"requestExtensions not supported";var n=new r({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList&&this.setRequestListByParam(t.reqList)},s.lang.extend(K.asn1.ocsp.TBSRequest,K.asn1.ASN1Object),K.asn1.ocsp.OCSPRequest=function(t){var e=K.asn1,r=e.DERSequence,n=e.ocsp;if(n.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var t=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(t.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var e=new r({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==t&&void 0!==t.reqList){var i=new n.TBSRequest(t);this.dTbsRequest=i}},s.lang.extend(K.asn1.ocsp.OCSPRequest,K.asn1.ASN1Object),K.asn1.ocsp.OCSPUtil={},K.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,r){var n=K.asn1.ocsp;void 0===r&&(r=n.DEFAULT_HASH);var i={alg:r,issuerCert:t,subjectCert:e};return new n.OCSPRequest({reqList:[i]}).getEncodedHex()},K.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e=W,r=e.getVbyList,n=e.getIdxbyList,i=(r=e.getVbyList,e.getV),s={};try{var o=r(t,0,[0],"0a");s.responseStatus=parseInt(o,16)}catch(t){}if(0!==s.responseStatus)return s;try{var a=n(t,0,[1,0,1,0,0,2,0,1]);"80"===t.substr(a,2)?s.certStatus="good":"a1"===t.substr(a,2)?(s.certStatus="revoked",s.revocationTime=hextoutf8(r(t,a,[0]))):"82"===t.substr(a,2)&&(s.certStatus="unknown")}catch(t){}try{var c=n(t,0,[1,0,1,0,0,2,0,2]);s.thisUpdate=hextoutf8(i(t,c))}catch(t){}try{var u=n(t,0,[1,0,1,0,0,2,0,3]);"a0"===t.substr(u,2)&&(s.nextUpdate=hextoutf8(r(t,u,[0])))}catch(t){}return s},void 0!==K&&K||(K={}),void 0!==K.lang&&K.lang||(K.lang={}),K.lang.String=function(){},"function"==typeof Buffer?(z=function(t){return b64tob64u(new Buffer(t,"utf8").toString("base64"))},G=function(t){return new Buffer(b64utob64(t),"base64").toString("utf8")}):(z=function(t){return hextob64u(uricmptohex(encodeURIComponentAll(t)))},G=function(t){return decodeURIComponent(hextouricmp(b64utohex(t)))}),K.lang.String.isInteger=function(t){return!!t.match(/^[0-9]+$/)||!!t.match(/^-[0-9]+$/)},K.lang.String.isHex=function(t){return!(t.length%2!=0||!t.match(/^[0-9a-f]+$/)&&!t.match(/^[0-9A-F]+$/))},K.lang.String.isBase64=function(t){return!(!(t=t.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||t.length%4!=0)},K.lang.String.isBase64URL=function(t){return!t.match(/[+/=]/)&&(t=b64utob64(t),K.lang.String.isBase64(t))},K.lang.String.isIntegerArray=function(t){return!!(t=t.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)};void 0!==K&&K||(K={}),void 0!==K.crypto&&K.crypto||(K.crypto={}),K.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:S.algo.MD5,sha1:S.algo.SHA1,sha224:S.algo.SHA224,sha256:S.algo.SHA256,sha384:S.algo.SHA384,sha512:S.algo.SHA512,ripemd160:S.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(void 0===this.DIGESTINFOHEAD[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,r){var n=this.getDigestInfoHex(t,e),i=r/4;if(n.length+22>i)throw"key is too short for SigAlg: keylen="+r+","+e;for(var s="0001",o="00"+n,a="",c=i-s.length-o.length,u=0;u<c;u+=2)a+="ff";return s+a+o},this.hashString=function(t,e){return new K.crypto.MessageDigest({alg:e}).digestString(t)},this.hashHex=function(t,e){return new K.crypto.MessageDigest({alg:e}).digestHex(t)},this.sha1=function(t){return new K.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(t)},this.sha256=function(t){return new K.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(t)},this.sha256Hex=function(t){return new K.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(t)},this.sha512=function(t){return new K.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(t)},this.sha512Hex=function(t){return new K.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(t)}},K.crypto.Util.md5=function(t){return new K.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(t)},K.crypto.Util.ripemd160=function(t){return new K.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(t)},K.crypto.Util.SECURERANDOMGEN=new SecureRandom,K.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return K.crypto.Util.SECURERANDOMGEN.nextBytes(e),BAtohex(e)},K.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new BigInteger(K.crypto.Util.getRandomHexOfNbytes(t),16)},K.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,r=new Array((t-e)/8+1);return K.crypto.Util.SECURERANDOMGEN.nextBytes(r),r[0]=(255<<e&255^255)&r[0],BAtohex(r)},K.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new BigInteger(K.crypto.Util.getRandomHexOfNbits(t),16)},K.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var r=K.crypto.Util.getRandomBigIntegerOfNbits(e);if(-1!=t.compareTo(r))return r}},K.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var r=t.compareTo(e);if(1==r)throw"biMin is greater than biMax";if(0==r)return t;var n=e.subtract(t);return K.crypto.Util.getRandomBigIntegerZeroToMax(n).add(t)},K.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(t,e){if(null!==(t=K.crypto.MessageDigest.getCanonicalAlgName(t))&&void 0===e&&(e=K.crypto.Util.DEFAULTPROVIDER[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.md=K.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=S.enc.Hex.parse(t);this.md.update(e)},this.digest=function(){return this.md.finalize().toString(S.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.md=new sjcl.hash.sha256}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=sjcl.codec.hex.toBits(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=K.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},K.crypto.MessageDigest.getCanonicalAlgName=function(t){return"string"==typeof t&&(t=(t=t.toLowerCase()).replace(/-/,"")),t},K.crypto.MessageDigest.getHashLength=function(t){var e=K.crypto.MessageDigest,r=e.getCanonicalAlgName(t);if(void 0===e.HASHLENGTH[r])throw"not supported algorithm: "+t;return e.HASHLENGTH[r]},K.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},K.crypto.Mac=function(t){this.setAlgAndProvider=function(t,e){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=K.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+e;var r=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==e){try{var n=K.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=S.algo.HMAC.create(n,this.pass)}catch(t){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+t}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=S.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){return this.mac.finalize().toString(S.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=rstrtohex(t)),void(this.pass=S.enc.Hex.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;e=null;if(void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;e=t.hex}if(void 0!==t.utf8&&(e=utf8tohex(t.utf8)),void 0!==t.rstr&&(e=rstrtohex(t.rstr)),void 0!==t.b64&&(e=b64tohex(t.b64)),void 0!==t.b64u&&(e=b64utohex(t.b64u)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=S.enc.Hex.parse(e)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=K.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},K.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){var t=this.algName.match(/^(.+)with(.+)$/);t&&(this.mdAlgName=t[1].toLowerCase(),this.pubkeyAlgName=t[2].toLowerCase())},this._zeroPaddingOfSignature=function(t,e){for(var r="",n=e/4-t.length,i=0;i<n;i++)r+="0";return r+t},this.setAlgAndProvider=function(t,e){if(this._setAlgNames(),"cryptojs/jsrsa"!=e)throw"provider not supported: "+e;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new K.crypto.MessageDigest({alg:this.mdAlgName})}catch(t){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+t}this.init=function(t,e){var r=null;try{r=void 0===e?J.getKey(t):J.getKey(t,e)}catch(t){throw"init failed:"+t}if(!0===r.isPrivate)this.prvKey=r,this.state="SIGN";else{if(!0!==r.isPublic)throw"init failed.:"+r;this.pubKey=r,this.state="VERIFY"}},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var t=new K.crypto.ECDSA({curve:this.eccurvename});this.hSign=t.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof RSAKey&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof RSAKey&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof K.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof K.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new K.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,t,this.ecpubhex);if(this.pubKey instanceof RSAKey&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof RSAKey&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==K.crypto.ECDSA&&this.pubKey instanceof K.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==K.crypto.DSA&&this.pubKey instanceof K.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(t){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(t){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,void 0!==t&&(void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov?this.provName=K.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{e=J.getKey(t.prvkeypem);this.init(e)}catch(t){throw"fatal error to load pem private key: "+t}}},K.crypto.Cipher=function(t){},K.crypto.Cipher.encrypt=function(t,e,r){if(e instanceof RSAKey&&e.isPublic){var n=K.crypto.Cipher.getAlgByKeyAndName(e,r);if("RSA"===n)return e.encrypt(t);if("RSAOAEP"===n)return e.encryptOAEP(t,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.encryptOAEP(t,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.encrypt: unsupported key or algorithm"},K.crypto.Cipher.decrypt=function(t,e,r){if(e instanceof RSAKey&&e.isPrivate){var n=K.crypto.Cipher.getAlgByKeyAndName(e,r);if("RSA"===n)return e.decrypt(t);if("RSAOAEP"===n)return e.decryptOAEP(t,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.decryptOAEP(t,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.decrypt: unsupported key or algorithm"},K.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof RSAKey){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e))return e;if(null==e)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e},K.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==K&&K||(K={}),void 0!==K.crypto&&K.crypto||(K.crypto={}),K.crypto.ECDSA=function(t){var e=new SecureRandom;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(t){return new BigInteger(t.bitLength(),e).mod(t.subtract(BigInteger.ONE)).add(BigInteger.ONE)},this.setNamedCurve=function(t){this.ecparams=K.crypto.ECParameterDB.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var e=this.ecparams.keylen/4;if(t.length!==2+2*e)throw"malformed public key hex length";var r={};return r.x=t.substr(2,e),r.y=t.substr(2+e),r},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":null},this.generateKeyPairHex=function(){var t=this.ecparams.n,e=this.getBigRandom(t),r=this.ecparams.G.multiply(e),n=r.getX().toBigInteger(),i=r.getY().toBigInteger(),s=this.ecparams.keylen/4,o=("0000000000"+e.toString(16)).slice(-s),a="04"+("0000000000"+n.toString(16)).slice(-s)+("0000000000"+i.toString(16)).slice(-s);return this.setPrivateKeyHex(o),this.setPublicKeyHex(a),{ecprvhex:o,ecpubhex:a}},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,e){var r=new BigInteger(e,16),n=this.ecparams.n,i=new BigInteger(t,16);do{var s=this.getBigRandom(n),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(n)}while(o.compareTo(BigInteger.ZERO)<=0);var a=s.modInverse(n).multiply(i.add(r.multiply(o))).mod(n);return K.crypto.ECDSA.biRSSigToASN1Sig(o,a)},this.sign=function(t,e){var r=e,n=this.ecparams.n,i=BigInteger.fromByteArrayUnsigned(t);do{var s=this.getBigRandom(n),o=this.ecparams.G.multiply(s).getX().toBigInteger().mod(n)}while(o.compareTo(BigInteger.ZERO)<=0);var a=s.modInverse(n).multiply(i.add(r.multiply(o))).mod(n);return this.serializeSig(o,a)},this.verifyWithMessageHash=function(t,e){return this.verifyHex(t,e,this.pubKeyHex)},this.verifyHex=function(t,e,r){var n,i,s,o=K.crypto.ECDSA.parseSigHex(e);n=o.r,i=o.s,s=ECPointFp.decodeFromHex(this.ecparams.curve,r);var a=new BigInteger(t,16);return this.verifyRaw(a,n,i,s)},this.verify=function(t,e,r){var n,i,s;if(Bitcoin.Util.isArray(e)){var o=this.parseSig(e);n=o.r,i=o.s}else{if("object"!=typeof e||!e.r||!e.s)throw"Invalid value for signature";n=e.r,i=e.s}if(r instanceof ECPointFp)s=r;else{if(!Bitcoin.Util.isArray(r))throw"Invalid format for pubkey value, must be byte array or ECPointFp";s=ECPointFp.decodeFrom(this.ecparams.curve,r)}var a=BigInteger.fromByteArrayUnsigned(t);return this.verifyRaw(a,n,i,s)},this.verifyRaw=function(t,e,r,n){var i=this.ecparams.n,s=this.ecparams.G;if(e.compareTo(BigInteger.ONE)<0||e.compareTo(i)>=0)return!1;if(r.compareTo(BigInteger.ONE)<0||r.compareTo(i)>=0)return!1;var o=r.modInverse(i),a=t.multiply(o).mod(i),c=e.multiply(o).mod(i);return s.multiply(a).add(n.multiply(c)).getX().toBigInteger().mod(i).equals(e)},this.serializeSig=function(t,e){var r=t.toByteArraySigned(),n=e.toByteArraySigned(),i=[];return i.push(2),i.push(r.length),(i=i.concat(r)).push(2),i.push(n.length),(i=i.concat(n)).unshift(i.length),i.unshift(48),i},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(2!=t[e=2])throw new Error("First element in signature must be a DERInteger");var r=t.slice(e+2,e+2+t[e+1]);if(2!=t[e+=2+t[e+1]])throw new Error("Second element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);return e+=2+t[e+1],{r:BigInteger.fromByteArrayUnsigned(r),s:BigInteger.fromByteArrayUnsigned(n)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||e>7)throw"Invalid signature type";var r=this.ecparams.n;return{r:BigInteger.fromByteArrayUnsigned(t.slice(1,33)).mod(r),s:BigInteger.fromByteArrayUnsigned(t.slice(33,65)).mod(r),i:e}},this.readPKCS5PrvKeyHex=function(t){var e,r,n,i=W,s=K.crypto.ECDSA.getName,o=i.getVbyList;if(!1===i.isASN1HEX(t))throw"not ASN.1 hex string";try{e=o(t,0,[2,0],"06"),r=o(t,0,[1],"04");try{n=o(t,0,[3,0],"03").substr(2)}catch(t){}}catch(t){throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=s(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(t){var e,r,n,i=W,s=K.crypto.ECDSA.getName,o=i.getVbyList;if(!1===i.isASN1HEX(t))throw"not ASN.1 hex string";try{o(t,0,[1,0],"06"),e=o(t,0,[1,1],"06"),r=o(t,0,[2,0,1],"04");try{n=o(t,0,[2,0,2,0],"03").substr(2)}catch(t){}}catch(t){throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=s(e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PubKeyHex=function(t){var e,r,n=W,i=K.crypto.ECDSA.getName,s=n.getVbyList;if(!1===n.isASN1HEX(t))throw"not ASN.1 hex string";try{s(t,0,[0,0],"06"),e=s(t,0,[0,1],"06"),r=s(t,0,[1],"03").substr(2)}catch(t){throw"malformed PKCS#8 ECC public key"}if(this.curveName=i(e),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},this.readCertPubKeyHex=function(t,e){5!==e&&(e=6);var r,n,i=W,s=K.crypto.ECDSA.getName,o=i.getVbyList;if(!1===i.isASN1HEX(t))throw"not ASN.1 hex string";try{r=o(t,0,[0,e,0,1],"06"),n=o(t,0,[0,e,1],"03").substr(2)}catch(t){throw"malformed X.509 certificate ECC public key"}if(this.curveName=s(r),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},K.crypto.ECDSA.parseSigHex=function(t){var e=K.crypto.ECDSA.parseSigHexInHexRS(t);return{r:new BigInteger(e.r,16),s:new BigInteger(e.s,16)}},K.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=W,r=e.getChildIdx,n=e.getV;if("30"!=t.substr(0,2))throw"signature is not a ASN.1 sequence";var i=r(t,0);if(2!=i.length)throw"number of signature ASN.1 sequence elements seem wrong";var s=i[0],o=i[1];if("02"!=t.substr(s,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=t.substr(o,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:n(t,s),s:n(t,o)}},K.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=K.crypto.ECDSA.parseSigHexInHexRS(t),r=e.r,n=e.s;if("00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),"00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),r.length%32==30&&(r="00"+r),n.length%32==30&&(n="00"+n),r.length%32!=0)throw"unknown ECDSA sig r length error";if(n.length%32!=0)throw"unknown ECDSA sig s length error";return r+n},K.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var e=t.substr(0,t.length/2),r=t.substr(t.length/2);return K.crypto.ECDSA.hexRSSigToASN1Sig(e,r)},K.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var r=new BigInteger(t,16),n=new BigInteger(e,16);return K.crypto.ECDSA.biRSSigToASN1Sig(r,n)},K.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var r=K.asn1,n=new r.DERInteger({bigint:t}),i=new r.DERInteger({bigint:e});return new r.DERSequence({array:[n,i]}).getEncodedHex()},K.crypto.ECDSA.getName=function(t){return"2a8648ce3d030107"===t?"secp256r1":"2b8104000a"===t?"secp256k1":"2b81040022"===t?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)?"secp256r1":-1!=="|secp256k1|".indexOf(t)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(t)?"secp384r1":null},void 0!==K&&K||(K={}),void 0!==K.crypto&&K.crypto||(K.crypto={}),K.crypto.ECParameterDB=new function(){var t={},e={};function a(t){return new BigInteger(t,16)}this.getByName=function(r){var n=r;if(void 0!==e[n]&&(n=e[r]),void 0!==t[n])return t[n];throw"unregistered EC curve name: "+n},this.regist=function(r,n,i,s,o,c,u,h,l,f,p,d){t[r]={};var g=a(i),y=a(s),v=a(o),m=a(c),b=a(u),S=new ECCurveFp(g,y,v),x=S.decodePointHex("04"+h+l);t[r].name=r,t[r].keylen=n,t[r].curve=S,t[r].G=x,t[r].n=m,t[r].h=b,t[r].oid=p,t[r].info=d;for(var w=0;w<f.length;w++)e[f[w]]=r}},K.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),K.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),K.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),K.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),K.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),K.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),K.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),K.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),K.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),K.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==K&&K||(K={}),void 0!==K.crypto&&K.crypto||(K.crypto={}),K.crypto.DSA=function(){this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(t,e,r,n,i){this.isPrivate=!0,this.p=t,this.q=e,this.g=r,this.y=n,this.x=i},this.setPrivateHex=function(t,e,r,n,i){var s,o,a,c,u;s=new BigInteger(t,16),o=new BigInteger(e,16),a=new BigInteger(r,16),c="string"==typeof n&&n.length>1?new BigInteger(n,16):null,u=new BigInteger(i,16),this.setPrivate(s,o,a,c,u)},this.setPublic=function(t,e,r,n){this.isPublic=!0,this.p=t,this.q=e,this.g=r,this.y=n,this.x=null},this.setPublicHex=function(t,e,r,n){var i,s,o,a;i=new BigInteger(t,16),s=new BigInteger(e,16),o=new BigInteger(r,16),a=new BigInteger(n,16),this.setPublic(i,s,o,a)},this.signWithMessageHash=function(t){var e=this.p,r=this.q,n=this.g,i=(this.y,this.x),s=K.crypto.Util.getRandomBigIntegerMinToMax(BigInteger.ONE.add(BigInteger.ONE),r.subtract(BigInteger.ONE)),o=new BigInteger(t.substr(0,r.bitLength()/4),16),a=n.modPow(s,e).mod(r),c=s.modInverse(r).multiply(o.add(i.multiply(a))).mod(r);return K.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:a}},{int:{bigint:c}}]})},this.verifyWithMessageHash=function(t,e){var r=this.p,n=this.q,i=this.g,s=this.y,o=this.parseASN1Signature(e),a=o[0],c=o[1],u=new BigInteger(t.substr(0,n.bitLength()/4),16);if(BigInteger.ZERO.compareTo(a)>0||a.compareTo(n)>0)throw"invalid DSA signature";if(BigInteger.ZERO.compareTo(c)>=0||c.compareTo(n)>0)throw"invalid DSA signature";var h=c.modInverse(n),l=u.multiply(h).mod(n),f=a.multiply(h).mod(n);return 0==i.modPow(l,r).multiply(s.modPow(f,r)).mod(r).mod(n).compareTo(a)},this.parseASN1Signature=function(t){try{return[new BigInteger(W.getVbyList(t,0,[0],"02"),16),new BigInteger(W.getVbyList(t,0,[1],"02"),16)]}catch(t){throw"malformed ASN.1 DSA signature"}},this.readPKCS5PrvKeyHex=function(t){var e,r,n,i,s,o=W,a=o.getVbyList;if(!1===o.isASN1HEX(t))throw"not ASN.1 hex string";try{e=a(t,0,[1],"02"),r=a(t,0,[2],"02"),n=a(t,0,[3],"02"),i=a(t,0,[4],"02"),s=a(t,0,[5],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed PKCS#1/5 plain DSA private key"}this.setPrivateHex(e,r,n,i,s)},this.readPKCS8PrvKeyHex=function(t){var e,r,n,i,s=W,o=s.getVbyList;if(!1===s.isASN1HEX(t))throw"not ASN.1 hex string";try{e=o(t,0,[1,1,0],"02"),r=o(t,0,[1,1,1],"02"),n=o(t,0,[1,1,2],"02"),i=o(t,0,[2,0],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed PKCS#8 plain DSA private key"}this.setPrivateHex(e,r,n,null,i)},this.readPKCS8PubKeyHex=function(t){var e,r,n,i,s=W,o=s.getVbyList;if(!1===s.isASN1HEX(t))throw"not ASN.1 hex string";try{e=o(t,0,[0,1,0],"02"),r=o(t,0,[0,1,1],"02"),n=o(t,0,[0,1,2],"02"),i=o(t,0,[1,0],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed PKCS#8 DSA public key"}this.setPublicHex(e,r,n,i)},this.readCertPubKeyHex=function(t,e){var r,n,i,s;5!==e&&(e=6);var o=W,a=o.getVbyList;if(!1===o.isASN1HEX(t))throw"not ASN.1 hex string";try{r=a(t,0,[0,e,0,1,0],"02"),n=a(t,0,[0,e,0,1,1],"02"),i=a(t,0,[0,e,0,1,2],"02"),s=a(t,0,[0,e,1,0],"02")}catch(t){throw console.log("EXCEPTION:"+t),"malformed X.509 certificate DSA public key"}this.setPublicHex(r,n,i,s)}};var J=function(){var d=function(t,e,r){return k(S.AES,t,e,r)},k=function(t,e,r,n){var i=S.enc.Hex.parse(e),s=S.enc.Hex.parse(r),o=S.enc.Hex.parse(n),a={};a.key=s,a.iv=o,a.ciphertext=i;var c=t.decrypt(a,s,{iv:o});return S.enc.Hex.stringify(c)},l=function(t,e,r){return g(S.AES,t,e,r)},g=function(t,e,r,n){var i=S.enc.Hex.parse(e),s=S.enc.Hex.parse(r),o=S.enc.Hex.parse(n),a=t.encrypt(i,s,{iv:o}),c=S.enc.Hex.parse(a.toString());return S.enc.Base64.stringify(c)},t={"AES-256-CBC":{proc:d,eproc:l,keylen:32,ivlen:16},"AES-192-CBC":{proc:d,eproc:l,keylen:24,ivlen:16},"AES-128-CBC":{proc:d,eproc:l,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(t,e,r){return k(S.TripleDES,t,e,r)},eproc:function(t,e,r){return g(S.TripleDES,t,e,r)},keylen:24,ivlen:8},"DES-CBC":{proc:function(t,e,r){return k(S.DES,t,e,r)},eproc:function(t,e,r){return g(S.DES,t,e,r)},keylen:8,ivlen:8}},n=function(t){var e={},r=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));r&&(e.cipher=r[1],e.ivsalt=r[2]);var n=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));n&&(e.type=n[1]);var i=-1,s=0;-1!=t.indexOf("\r\n\r\n")&&(i=t.indexOf("\r\n\r\n"),s=2),-1!=t.indexOf("\n\n")&&(i=t.indexOf("\n\n"),s=1);var o=t.indexOf("-----END");if(-1!=i&&-1!=o){var a=t.substring(i+2*s,o-s);a=a.replace(/\s+/g,""),e.data=a}return e},j=function(e,r,n){for(var i=n.substring(0,16),s=S.enc.Hex.parse(i),o=S.enc.Utf8.parse(r),a=t[e].keylen+t[e].ivlen,c="",u=null;;){var h=S.algo.MD5.create();if(null!=u&&h.update(u),h.update(o),h.update(s),u=h.finalize(),(c+=S.enc.Hex.stringify(u)).length>=2*a)break}var l={};return l.keyhex=c.substr(0,2*t[e].keylen),l.ivhex=c.substr(2*t[e].keylen,2*t[e].ivlen),l},b=function(e,r,n,i){var s=S.enc.Base64.parse(e),o=S.enc.Hex.stringify(s);return(0,t[r].proc)(o,n,i)};return{version:"1.0.0",parsePKCS5PEM:function(t){return n(t)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(t,e,r){return j(t,e,r)},decryptKeyB64:function(t,e,r,n){return b(t,e,r,n)},getDecryptedKeyHex:function(t,e){var r=n(t),i=(r.type,r.cipher),s=r.ivsalt,o=r.data,a=j(i,e,s).keyhex;return b(o,i,a,s)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,r,n,i,s){var o="";if(void 0!==i&&null!=i||(i="AES-256-CBC"),void 0===t[i])throw"KEYUTIL unsupported algorithm: "+i;void 0!==s&&null!=s||(s=function(t){var e=S.lib.WordArray.random(t);return S.enc.Hex.stringify(e)}(t[i].ivlen).toUpperCase());var a=function(e,r,n,i){return(0,t[r].eproc)(e,n,i)}(r,i,j(i,n,s).keyhex,s);o="-----BEGIN "+e+" PRIVATE KEY-----\r\n";return o+="Proc-Type: 4,ENCRYPTED\r\n",o+="DEK-Info: "+i+","+s+"\r\n",o+="\r\n",o+=a.replace(/(.{64})/g,"$1\r\n"),o+="\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(t){var e=W,r=e.getChildIdx,n=e.getV,i={},s=r(t,0);if(2!=s.length)throw"malformed format: SEQUENCE(0).items != 2: "+s.length;i.ciphertext=n(t,s[1]);var o=r(t,s[0]);if(2!=o.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+o.length;if("2a864886f70d01050d"!=n(t,o[0]))throw"this only supports pkcs5PBES2";var a=r(t,o[1]);if(2!=o.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+a.length;var c=r(t,a[1]);if(2!=c.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+c.length;if("2a864886f70d0307"!=n(t,c[0]))throw"this only supports TripleDES";i.encryptionSchemeAlg="TripleDES",i.encryptionSchemeIV=n(t,c[1]);var u=r(t,a[0]);if(2!=u.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+u.length;if("2a864886f70d01050c"!=n(t,u[0]))throw"this only supports pkcs5PBKDF2";var h=r(t,u[1]);if(h.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+h.length;i.pbkdf2Salt=n(t,h[0]);var l=n(t,h[1]);try{i.pbkdf2Iter=parseInt(l,16)}catch(t){throw"malformed format pbkdf2Iter: "+l}return i},getPBKDF2KeyHexFromParam:function(t,e){var r=S.enc.Hex.parse(t.pbkdf2Salt),n=t.pbkdf2Iter,i=S.PBKDF2(e,r,{keySize:6,iterations:n});return S.enc.Hex.stringify(i)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,e){var r=pemtohex(t,"ENCRYPTED PRIVATE KEY"),n=this.parseHexOfEncryptedPKCS8(r),i=J.getPBKDF2KeyHexFromParam(n,e),s={};s.ciphertext=S.enc.Hex.parse(n.ciphertext);var o=S.enc.Hex.parse(i),a=S.enc.Hex.parse(n.encryptionSchemeIV),c=S.TripleDES.decrypt(s,o,{iv:a});return S.enc.Hex.stringify(c)},getKeyFromEncryptedPKCS8PEM:function(t,e){var r=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e);return this.getKeyFromPlainPrivatePKCS8Hex(r)},parsePlainPrivatePKCS8Hex:function(t){var e=W,r=e.getChildIdx,n=e.getV,i={algparam:null};if("30"!=t.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var s=r(t,0);if(3!=s.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=t.substr(s[1],2))throw"malformed PKCS8 private key(code:003)";var o=r(t,s[1]);if(2!=o.length)throw"malformed PKCS8 private key(code:004)";if("06"!=t.substr(o[0],2))throw"malformed PKCS8 private key(code:005)";if(i.algoid=n(t,o[0]),"06"==t.substr(o[1],2)&&(i.algparam=n(t,o[1])),"04"!=t.substr(s[2],2))throw"malformed PKCS8 private key(code:006)";return i.keyidx=e.getVidx(t,s[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(t){var e=pemtohex(t,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(e)},getKeyFromPlainPrivatePKCS8Hex:function(t){var e,r=this.parsePlainPrivatePKCS8Hex(t);if("2a864886f70d010101"==r.algoid)e=new RSAKey;else if("2a8648ce380401"==r.algoid)e=new K.crypto.DSA;else{if("2a8648ce3d0201"!=r.algoid)throw"unsupported private key algorithm";e=new K.crypto.ECDSA}return e.readPKCS8PrvKeyHex(t),e},_getKeyFromPublicPKCS8Hex:function(t){var e,r=W.getVbyList(t,0,[0,0],"06");if("2a864886f70d010101"===r)e=new RSAKey;else if("2a8648ce380401"===r)e=new K.crypto.DSA;else{if("2a8648ce3d0201"!==r)throw"unsupported PKCS#8 public key hex";e=new K.crypto.ECDSA}return e.readPKCS8PubKeyHex(t),e},parsePublicRawRSAKeyHex:function(t){var e=W,r=e.getChildIdx,n=e.getV,i={};if("30"!=t.substr(0,2))throw"malformed RSA key(code:001)";var s=r(t,0);if(2!=s.length)throw"malformed RSA key(code:002)";if("02"!=t.substr(s[0],2))throw"malformed RSA key(code:003)";if(i.n=n(t,s[0]),"02"!=t.substr(s[1],2))throw"malformed RSA key(code:004)";return i.e=n(t,s[1]),i},parsePublicPKCS8Hex:function(t){var e=W,r=e.getChildIdx,n=e.getV,i={algparam:null},s=r(t,0);if(2!=s.length)throw"outer DERSequence shall have 2 elements: "+s.length;var o=s[0];if("30"!=t.substr(o,2))throw"malformed PKCS8 public key(code:001)";var a=r(t,o);if(2!=a.length)throw"malformed PKCS8 public key(code:002)";if("06"!=t.substr(a[0],2))throw"malformed PKCS8 public key(code:003)";if(i.algoid=n(t,a[0]),"06"==t.substr(a[1],2)?i.algparam=n(t,a[1]):"30"==t.substr(a[1],2)&&(i.algparam={},i.algparam.p=e.getVbyList(t,a[1],[0],"02"),i.algparam.q=e.getVbyList(t,a[1],[1],"02"),i.algparam.g=e.getVbyList(t,a[1],[2],"02")),"03"!=t.substr(s[1],2))throw"malformed PKCS8 public key(code:004)";return i.key=n(t,s[1]).substr(2),i}}}();J.getKey=function(t,e,r){var n=(y=W).getChildIdx,i=(y.getV,y.getVbyList),s=K.crypto,o=s.ECDSA,a=s.DSA,c=RSAKey,u=pemtohex,h=J;if(void 0!==c&&t instanceof c)return t;if(void 0!==o&&t instanceof o)return t;if(void 0!==a&&t instanceof a)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new o({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new o({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(C=new c).setPublic(t.n,t.e),C;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi)return(C=new c).setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),C;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p)return(C=new c).setPrivate(t.n,t.e,t.d),C;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x)return(C=new a).setPublic(t.p,t.q,t.g,t.y),C;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x)return(C=new a).setPrivate(t.p,t.q,t.g,t.y,t.x),C;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(C=new c).setPublic(b64utohex(t.n),b64utohex(t.e)),C;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi)return(C=new c).setPrivateEx(b64utohex(t.n),b64utohex(t.e),b64utohex(t.d),b64utohex(t.p),b64utohex(t.q),b64utohex(t.dp),b64utohex(t.dq),b64utohex(t.qi)),C;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d)return(C=new c).setPrivate(b64utohex(t.n),b64utohex(t.e),b64utohex(t.d)),C;if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var l=(A=new o({curve:t.crv})).ecparams.keylen/4,f="04"+("0000000000"+b64utohex(t.x)).slice(-l)+("0000000000"+b64utohex(t.y)).slice(-l);return A.setPublicKeyHex(f),A}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){l=(A=new o({curve:t.crv})).ecparams.keylen/4,f="04"+("0000000000"+b64utohex(t.x)).slice(-l)+("0000000000"+b64utohex(t.y)).slice(-l);var p=("0000000000"+b64utohex(t.d)).slice(-l);return A.setPublicKeyHex(f),A.setPrivateKeyHex(p),A}if("pkcs5prv"===r){var d,g=t,y=W;if(9===(d=n(g,0)).length)(C=new c).readPKCS5PrvKeyHex(g);else if(6===d.length)(C=new a).readPKCS5PrvKeyHex(g);else{if(!(d.length>2&&"04"===g.substr(d[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(C=new o).readPKCS5PrvKeyHex(g)}return C}if("pkcs8prv"===r)return C=h.getKeyFromPlainPrivatePKCS8Hex(t);if("pkcs8pub"===r)return h._getKeyFromPublicPKCS8Hex(t);if("x509pub"===r)return X509.getPublicKeyFromCertHex(t);if(-1!=t.indexOf("-END CERTIFICATE-",0)||-1!=t.indexOf("-END X509 CERTIFICATE-",0)||-1!=t.indexOf("-END TRUSTED CERTIFICATE-",0))return X509.getPublicKeyFromCertPEM(t);if(-1!=t.indexOf("-END PUBLIC KEY-")){var v=pemtohex(t,"PUBLIC KEY");return h._getKeyFromPublicPKCS8Hex(v)}if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var m=u(t,"RSA PRIVATE KEY");return h.getKey(m,null,"pkcs5prv")}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var b=i(I=u(t,"DSA PRIVATE KEY"),0,[1],"02"),S=i(I,0,[2],"02"),x=i(I,0,[3],"02"),w=i(I,0,[4],"02"),E=i(I,0,[5],"02");return(C=new a).setPrivate(new BigInteger(b,16),new BigInteger(S,16),new BigInteger(x,16),new BigInteger(w,16),new BigInteger(E,16)),C}if(-1!=t.indexOf("-END PRIVATE KEY-"))return h.getKeyFromPlainPrivatePKCS8PEM(t);if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var _=h.getDecryptedKeyHex(t,e),F=new RSAKey;return F.readPKCS5PrvKeyHex(_),F}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var A,C=i(I=h.getDecryptedKeyHex(t,e),0,[1],"04"),T=i(I,0,[2,0],"06"),P=i(I,0,[3,0],"03").substr(2);if(void 0===K.crypto.OID.oidhex2name[T])throw"undefined OID(hex) in KJUR.crypto.OID: "+T;return(A=new o({curve:K.crypto.OID.oidhex2name[T]})).setPublicKeyHex(P),A.setPrivateKeyHex(C),A.isPublic=!1,A}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var I;b=i(I=h.getDecryptedKeyHex(t,e),0,[1],"02"),S=i(I,0,[2],"02"),x=i(I,0,[3],"02"),w=i(I,0,[4],"02"),E=i(I,0,[5],"02");return(C=new a).setPrivate(new BigInteger(b,16),new BigInteger(S,16),new BigInteger(x,16),new BigInteger(w,16),new BigInteger(E,16)),C}if(-1!=t.indexOf("-END ENCRYPTED PRIVATE KEY-"))return h.getKeyFromEncryptedPKCS8PEM(t,e);throw"not supported argument"},J.generateKeypair=function(t,e){if("RSA"==t){var r=e;(o=new RSAKey).generate(r,"10001"),o.isPrivate=!0,o.isPublic=!0;var n=new RSAKey,i=o.n.toString(16),s=o.e.toString(16);return n.setPublic(i,s),n.isPrivate=!1,n.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=n,a}if("EC"==t){var o,a,c=e,u=new K.crypto.ECDSA({curve:c}).generateKeyPairHex();return(o=new K.crypto.ECDSA({curve:c})).setPublicKeyHex(u.ecpubhex),o.setPrivateKeyHex(u.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(n=new K.crypto.ECDSA({curve:c})).setPublicKeyHex(u.ecpubhex),n.isPrivate=!1,n.isPublic=!0,(a={}).prvKeyObj=o,a.pubKeyObj=n,a}throw"unknown algorithm: "+t},J.getPEM=function(t,e,r,n,i,s){var a=K,u=a.asn1,h=u.DERObjectIdentifier,l=u.DERInteger,f=u.ASN1Util.newObject,p=u.x509.SubjectPublicKeyInfo,d=a.crypto,g=d.DSA,y=d.ECDSA,v=RSAKey;function A(t){return f({seq:[{int:0},{int:{bigint:t.n}},{int:t.e},{int:{bigint:t.d}},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.dmp1}},{int:{bigint:t.dmq1}},{int:{bigint:t.coeff}}]})}function B(t){return f({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]})}function x(t){return f({seq:[{int:0},{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}},{int:{bigint:t.y}},{int:{bigint:t.x}}]})}if((void 0!==v&&t instanceof v||void 0!==g&&t instanceof g||void 0!==y&&t instanceof y)&&1==t.isPublic&&(void 0===e||"PKCS8PUB"==e))return hextopem(E=new p(t).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==e&&void 0!==v&&t instanceof v&&(void 0===r||null==r)&&1==t.isPrivate)return hextopem(E=A(t).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==e&&void 0!==y&&t instanceof y&&(void 0===r||null==r)&&1==t.isPrivate){var m=new h({name:t.curveName}).getEncodedHex(),b=B(t).getEncodedHex(),w="";return w+=hextopem(m,"EC PARAMETERS"),w+=hextopem(b,"EC PRIVATE KEY")}if("PKCS1PRV"==e&&void 0!==g&&t instanceof g&&(void 0===r||null==r)&&1==t.isPrivate)return hextopem(E=x(t).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==e&&void 0!==v&&t instanceof v&&void 0!==r&&null!=r&&1==t.isPrivate){var E=A(t).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",E,r,n,s)}if("PKCS5PRV"==e&&void 0!==y&&t instanceof y&&void 0!==r&&null!=r&&1==t.isPrivate){E=B(t).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",E,r,n,s)}if("PKCS5PRV"==e&&void 0!==g&&t instanceof g&&void 0!==r&&null!=r&&1==t.isPrivate){E=x(t).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",E,r,n,s)}var o=function(t,e){var r=c(t,e);return new f({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:r.pbkdf2Salt}},{int:r.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:r.encryptionSchemeIV}}]}]}]},{octstr:{hex:r.ciphertext}}]}).getEncodedHex()},c=function(t,e){var r=S.lib.WordArray.random(8),n=S.lib.WordArray.random(8),i=S.PBKDF2(e,r,{keySize:6,iterations:100}),s=S.enc.Hex.parse(t),o=S.TripleDES.encrypt(s,i,{iv:n})+"",a={};return a.ciphertext=o,a.pbkdf2Salt=S.enc.Hex.stringify(r),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=S.enc.Hex.stringify(n),a};if("PKCS8PRV"==e&&null!=v&&t instanceof v&&1==t.isPrivate){var _=A(t).getEncodedHex();E=f({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:_}}]}).getEncodedHex();return void 0===r||null==r?hextopem(E,"PRIVATE KEY"):hextopem(b=o(E,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==y&&t instanceof y&&1==t.isPrivate){_=new f({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]}).getEncodedHex(),E=f({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:_}}]}).getEncodedHex();return void 0===r||null==r?hextopem(E,"PRIVATE KEY"):hextopem(b=o(E,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&void 0!==g&&t instanceof g&&1==t.isPrivate){_=new l({bigint:t.x}).getEncodedHex(),E=f({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:_}}]}).getEncodedHex();return void 0===r||null==r?hextopem(E,"PRIVATE KEY"):hextopem(b=o(E,r),"ENCRYPTED PRIVATE KEY")}throw"unsupported object nor format"},J.getKeyFromCSRPEM=function(t){var e=pemtohex(t,"CERTIFICATE REQUEST");return J.getKeyFromCSRHex(e)},J.getKeyFromCSRHex=function(t){var e=J.parseCSRHex(t);return J.getKey(e.p8pubkeyhex,null,"pkcs8pub")},J.parseCSRHex=function(t){var e=W,r=e.getChildIdx,n=e.getTLV,i={},s=t;if("30"!=s.substr(0,2))throw"malformed CSR(code:001)";var o=r(s,0);if(o.length<1)throw"malformed CSR(code:002)";if("30"!=s.substr(o[0],2))throw"malformed CSR(code:003)";var a=r(s,o[0]);if(a.length<3)throw"malformed CSR(code:004)";return i.p8pubkeyhex=n(s,a[2]),i},J.getJWKFromKey=function(t){var e={};if(t instanceof RSAKey&&t.isPrivate)return e.kty="RSA",e.n=hextob64u(t.n.toString(16)),e.e=hextob64u(t.e.toString(16)),e.d=hextob64u(t.d.toString(16)),e.p=hextob64u(t.p.toString(16)),e.q=hextob64u(t.q.toString(16)),e.dp=hextob64u(t.dmp1.toString(16)),e.dq=hextob64u(t.dmq1.toString(16)),e.qi=hextob64u(t.coeff.toString(16)),e;if(t instanceof RSAKey&&t.isPublic)return e.kty="RSA",e.n=hextob64u(t.n.toString(16)),e.e=hextob64u(t.e.toString(16)),e;if(t instanceof K.crypto.ECDSA&&t.isPrivate){if("P-256"!==(n=t.getShortNISTPCurveName())&&"P-384"!==n)throw"unsupported curve name for JWT: "+n;var r=t.getPublicKeyXYHex();return e.kty="EC",e.crv=n,e.x=hextob64u(r.x),e.y=hextob64u(r.y),e.d=hextob64u(t.prvKeyHex),e}if(t instanceof K.crypto.ECDSA&&t.isPublic){var n;if("P-256"!==(n=t.getShortNISTPCurveName())&&"P-384"!==n)throw"unsupported curve name for JWT: "+n;r=t.getPublicKeyXYHex();return e.kty="EC",e.crv=n,e.x=hextob64u(r.x),e.y=hextob64u(r.y),e}throw"not supported key object"},RSAKey.getPosArrayOfChildrenFromHex=function(t){return W.getChildIdx(t,0)},RSAKey.getHexValueArrayOfChildrenFromHex=function(t){var e,r=W.getV,n=r(t,(e=RSAKey.getPosArrayOfChildrenFromHex(t))[0]),i=r(t,e[1]),s=r(t,e[2]),o=r(t,e[3]),a=r(t,e[4]),c=r(t,e[5]),u=r(t,e[6]),h=r(t,e[7]),l=r(t,e[8]);return(e=new Array).push(n,i,s,o,a,c,u,h,l),e},RSAKey.prototype.readPrivateKeyFromPEMString=function(t){var e=pemtohex(t),r=RSAKey.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])},RSAKey.prototype.readPKCS5PrvKeyHex=function(t){var e=RSAKey.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},RSAKey.prototype.readPKCS8PrvKeyHex=function(t){var e,r,n,i,s,o,a,c,u=W,h=u.getVbyList;if(!1===u.isASN1HEX(t))throw"not ASN.1 hex string";try{e=h(t,0,[2,0,1],"02"),r=h(t,0,[2,0,2],"02"),n=h(t,0,[2,0,3],"02"),i=h(t,0,[2,0,4],"02"),s=h(t,0,[2,0,5],"02"),o=h(t,0,[2,0,6],"02"),a=h(t,0,[2,0,7],"02"),c=h(t,0,[2,0,8],"02")}catch(t){throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(e,r,n,i,s,o,a,c)},RSAKey.prototype.readPKCS5PubKeyHex=function(t){var e=W,r=e.getV;if(!1===e.isASN1HEX(t))throw"keyHex is not ASN.1 hex string";var n=e.getChildIdx(t,0);if(2!==n.length||"02"!==t.substr(n[0],2)||"02"!==t.substr(n[1],2))throw"wrong hex for PKCS#5 public key";var i=r(t,n[0]),s=r(t,n[1]);this.setPublic(i,s)},RSAKey.prototype.readPKCS8PubKeyHex=function(t){var e=W;if(!1===e.isASN1HEX(t))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==e.getTLVbyList(t,0,[0,0]))throw"not PKCS8 RSA public key";var r=e.getTLVbyList(t,0,[1,0]);this.readPKCS5PubKeyHex(r)},RSAKey.prototype.readCertPubKeyHex=function(t,e){var r,n;(r=new X509).readCertHex(t),n=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)};var Y=new RegExp("");function _zeroPaddingOfSignature(t,e){for(var r="",n=e/4-t.length,i=0;i<n;i++)r+="0";return r+t}function pss_mgf1_str(t,e,r){for(var n="",i=0;n.length<e;)n+=hextorstr(r(rstrtohex(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return n}function _rsasign_getAlgNameAndHashFromHexDisgestInfo(t){for(var e in K.crypto.Util.DIGESTINFOHEAD){var r=K.crypto.Util.DIGESTINFOHEAD[e],n=r.length;if(t.substring(0,n)==r)return[e,t.substring(n)]}return[]}function X509(){var t=W,e=t.getChildIdx,r=t.getV,n=t.getTLV,i=t.getVbyList,s=t.getTLVbyList,o=t.getIdxbyList,a=t.getVidx,c=t.oidname,u=X509,h=pemtohex;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==s(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return i(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return c(i(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return s(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return u.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return s(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return u.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var t=i(this.hex,0,[0,4+this.foffset,0]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getNotAfter=function(){var t=i(this.hex,0,[0,4+this.foffset,1]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getPublicKeyHex=function(){return t.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return o(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var t=this.getPublicKeyIdx();return o(this.hex,t,[1,0],"30")},this.getPublicKey=function(){return J.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return c(i(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return i(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var e=this.getSignatureAlgorithmName(),r=this.getSignatureValueHex(),n=s(this.hex,0,[0],"30"),i=new K.crypto.Signature({alg:e});return i.init(t),i.updateHex(n),i.verify(r)},this.parseExt=function(){if(3!==this.version)return-1;var r=o(this.hex,0,[0,7,0],"30"),n=e(this.hex,r);this.aExtInfo=new Array;for(var s=0;s<n.length;s++){var c={critical:!1},u=0;3===e(this.hex,n[s]).length&&(c.critical=!0,u=1),c.oid=t.hextooidstr(i(this.hex,n[s],[0],"06"));var h=o(this.hex,n[s],[1+u]);c.vidx=a(this.hex,h),this.aExtInfo.push(c)}},this.getExtInfo=function(t){var e=this.aExtInfo,r=t;if(t.match(/^[0-9.]+$/)||(r=K.asn1.x509.OID.name2oid(t)),""!==r)for(var n=0;n<e.length;n++)if(e[n].oid===r)return e[n]},this.getExtBasicConstraints=function(){var t=this.getExtInfo("basicConstraints");if(void 0===t)return t;var e=r(this.hex,t.vidx);if(""===e)return{};if("0101ff"===e)return{cA:!0};if("0101ff02"===e.substr(0,8)){var n=r(e,6);return{cA:!0,pathLen:parseInt(n,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";var e=r(this.hex,t.vidx);if(e.length%2!=0||e.length<=2)throw"malformed key usage value";var n=parseInt(e.substr(0,2)),i=parseInt(e.substr(2),16).toString(2);return i.substr(0,i.length-n)},this.getExtKeyUsageString=function(){for(var t=this.getExtKeyUsageBin(),e=new Array,r=0;r<t.length;r++)"1"==t.substr(r,1)&&e.push(X509.KEYUSAGE_NAME[r]);return e.join(",")},this.getExtSubjectKeyIdentifier=function(){var t=this.getExtInfo("subjectKeyIdentifier");return void 0===t?t:r(this.hex,t.vidx)},this.getExtAuthorityKeyIdentifier=function(){var t=this.getExtInfo("authorityKeyIdentifier");if(void 0===t)return t;for(var i={},s=n(this.hex,t.vidx),o=e(s,0),a=0;a<o.length;a++)"80"===s.substr(o[a],2)&&(i.kid=r(s,o[a]));return i},this.getExtExtKeyUsageName=function(){var t=this.getExtInfo("extKeyUsage");if(void 0===t)return t;var i=new Array,s=n(this.hex,t.vidx);if(""===s)return i;for(var o=e(s,0),a=0;a<o.length;a++)i.push(c(r(s,o[a])));return i},this.getExtSubjectAltName=function(){for(var t=this.getExtSubjectAltName2(),e=new Array,r=0;r<t.length;r++)"DNS"===t[r][0]&&e.push(t[r][1]);return e},this.getExtSubjectAltName2=function(){var t,i,s,o=this.getExtInfo("subjectAltName");if(void 0===o)return o;for(var a=new Array,c=n(this.hex,o.vidx),u=e(c,0),h=0;h<u.length;h++)s=c.substr(u[h],2),t=r(c,u[h]),"81"===s&&(i=hextoutf8(t),a.push(["MAIL",i])),"82"===s&&(i=hextoutf8(t),a.push(["DNS",i])),"84"===s&&(i=X509.hex2dn(t,0),a.push(["DN",i])),"86"===s&&(i=hextoutf8(t),a.push(["URI",i])),"87"===s&&(i=hextoip(t),a.push(["IP",i]));return a},this.getExtCRLDistributionPointsURI=function(){var t=this.getExtInfo("cRLDistributionPoints");if(void 0===t)return t;for(var r=new Array,n=e(this.hex,t.vidx),s=0;s<n.length;s++)try{var o=hextoutf8(i(this.hex,n[s],[0,0,0],"86"));r.push(o)}catch(t){}return r},this.getExtAIAInfo=function(){var t=this.getExtInfo("authorityInfoAccess");if(void 0===t)return t;for(var r={ocsp:[],caissuer:[]},n=e(this.hex,t.vidx),s=0;s<n.length;s++){var o=i(this.hex,n[s],[0],"06"),a=i(this.hex,n[s],[1],"86");"2b06010505073001"===o&&r.ocsp.push(hextoutf8(a)),"2b06010505073002"===o&&r.caissuer.push(hextoutf8(a))}return r},this.getExtCertificatePolicies=function(){var t=this.getExtInfo("certificatePolicies");if(void 0===t)return t;for(var s=n(this.hex,t.vidx),o=[],a=e(s,0),u=0;u<a.length;u++){var h={},l=e(s,a[u]);if(h.id=c(r(s,l[0])),2===l.length)for(var f=e(s,l[1]),p=0;p<f.length;p++){var d=i(s,f[p],[0],"06");"2b06010505070201"===d?h.cps=hextoutf8(i(s,f[p],[1])):"2b06010505070202"===d&&(h.unotice=hextoutf8(i(s,f[p],[1,0])))}o.push(h)}return o},this.readCertPEM=function(t){this.readCertHex(h(t))},this.readCertHex=function(t){this.hex=t,this.getVersion();try{o(this.hex,0,[0,7],"a3"),this.parseExt()}catch(t){}},this.getInfo=function(){var t,e,r;if(t="Basic Fields\n",t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n",t+="    key algorithm: "+(e=this.getPublicKey()).type+"\n","RSA"===e.type&&(t+="    n="+hextoposhex(e.n.toString(16)).substr(0,16)+"...\n",t+="    e="+hextoposhex(e.e.toString(16))+"\n"),null!=(r=this.aExtInfo)){t+="X509v3 Extensions:\n";for(var n=0;n<r.length;n++){var i=r[n],s=K.asn1.x509.OID.oid2name(i.oid);""===s&&(s=i.oid);var o="";if(!0===i.critical&&(o="CRITICAL"),t+="  "+s+" "+o+":\n","basicConstraints"===s){var a=this.getExtBasicConstraints();void 0===a.cA?t+="    {}\n":(t+="    cA=true",void 0!==a.pathLen&&(t+=", pathLen="+a.pathLen),t+="\n")}else if("keyUsage"===s)t+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===s)t+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===s){var c=this.getExtAuthorityKeyIdentifier();void 0!==c.kid&&(t+="    kid="+c.kid+"\n")}else{if("extKeyUsage"===s)t+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===s)t+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===s)t+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===s){var u=this.getExtAIAInfo();void 0!==u.ocsp&&(t+="    ocsp: "+u.ocsp.join(",")+"\n"),void 0!==u.caissuer&&(t+="    caissuer: "+u.caissuer.join(",")+"\n")}else if("certificatePolicies"===s)for(var h=this.getExtCertificatePolicies(),l=0;l<h.length;l++)void 0!==h[l].id&&(t+="    policy oid: "+h[l].id+"\n"),void 0!==h[l].cps&&(t+="    cps: "+h[l].cps+"\n")}}}return t+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n",t+="signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}Y.compile("[^0-9a-f]","gi"),RSAKey.prototype.sign=function(t,e){var r=function(t){return K.crypto.Util.hashString(t,e)}(t);return this.signWithMessageHash(r,e)},RSAKey.prototype.signWithMessageHash=function(t,e){var r=parseBigInt(K.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),16);return _zeroPaddingOfSignature(this.doPrivate(r).toString(16),this.n.bitLength())},RSAKey.prototype.signPSS=function(t,e,r){var n,i=(n=rstrtohex(t),K.crypto.Util.hashHex(n,e));return void 0===r&&(r=-1),this.signWithMessageHashPSS(i,e,r)},RSAKey.prototype.signWithMessageHashPSS=function(t,e,r){var n,i=hextorstr(t),s=i.length,a=this.n.bitLength()-1,c=Math.ceil(a/8),o=function(t){return K.crypto.Util.hashHex(t,e)};if(-1===r||void 0===r)r=s;else if(-2===r)r=c-s-2;else if(r<-2)throw"invalid salt length";if(c<s+r+2)throw"data too long";var u="";r>0&&(u=new Array(r),(new SecureRandom).nextBytes(u),u=String.fromCharCode.apply(String,u));var h=hextorstr(o(rstrtohex("\0\0\0\0\0\0\0\0"+i+u))),l=[];for(n=0;n<c-r-s-2;n+=1)l[n]=0;var f=String.fromCharCode.apply(String,l)+""+u,p=pss_mgf1_str(h,f.length,o),d=[];for(n=0;n<f.length;n+=1)d[n]=f.charCodeAt(n)^p.charCodeAt(n);var g=65280>>8*c-a&255;for(d[0]&=~g,n=0;n<s;n++)d.push(h.charCodeAt(n));return d.push(188),_zeroPaddingOfSignature(this.doPrivate(new BigInteger(d)).toString(16),this.n.bitLength())},RSAKey.prototype.verify=function(t,e){var r=parseBigInt(e=(e=e.replace(Y,"")).replace(/[ \n]+/g,""),16);if(r.bitLength()>this.n.bitLength())return 0;var n=_rsasign_getAlgNameAndHashFromHexDisgestInfo(this.doPublic(r).toString(16).replace(/^1f+00/,""));if(0==n.length)return!1;var i=n[0];return n[1]==function(t){return K.crypto.Util.hashString(t,i)}(t)},RSAKey.prototype.verifyWithMessageHash=function(t,e){var r=parseBigInt(e=(e=e.replace(Y,"")).replace(/[ \n]+/g,""),16);if(r.bitLength()>this.n.bitLength())return 0;var n=_rsasign_getAlgNameAndHashFromHexDisgestInfo(this.doPublic(r).toString(16).replace(/^1f+00/,""));if(0==n.length)return!1;n[0];return n[1]==t},RSAKey.prototype.verifyPSS=function(t,e,r,n){var i,s=(i=rstrtohex(t),K.crypto.Util.hashHex(i,r));return void 0===n&&(n=-1),this.verifyWithMessageHashPSS(s,e,r,n)},RSAKey.prototype.verifyWithMessageHashPSS=function(t,e,n,i){var s=new BigInteger(e,16);if(s.bitLength()>this.n.bitLength())return!1;var o,r=function(t){return K.crypto.Util.hashHex(t,n)},a=hextorstr(t),c=a.length,u=this.n.bitLength()-1,h=Math.ceil(u/8);if(-1===i||void 0===i)i=c;else if(-2===i)i=h-c-2;else if(i<-2)throw"invalid salt length";if(h<c+i+2)throw"data too long";var l=this.doPublic(s).toByteArray();for(o=0;o<l.length;o+=1)l[o]&=255;for(;l.length<h;)l.unshift(0);if(188!==l[h-1])throw"encoded message does not end in 0xbc";var f=(l=String.fromCharCode.apply(String,l)).substr(0,h-c-1),p=l.substr(f.length,c),d=65280>>8*h-u&255;if(0!=(f.charCodeAt(0)&d))throw"bits beyond keysize not zero";var g=pss_mgf1_str(p,f.length,r),y=[];for(o=0;o<f.length;o+=1)y[o]=f.charCodeAt(o)^g.charCodeAt(o);y[0]&=~d;var v=h-c-i-2;for(o=0;o<v;o+=1)if(0!==y[o])throw"leftmost octets not zero";if(1!==y[v])throw"0x01 marker not found";return p===hextorstr(r(rstrtohex("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,y.slice(-i)))))},RSAKey.SALT_LEN_HLEN=-1,RSAKey.SALT_LEN_MAX=-2,RSAKey.SALT_LEN_RECOVER=-2,X509.hex2dn=function(t,e){if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed DN";for(var r=new Array,n=W.getChildIdx(t,e),i=0;i<n.length;i++)r.push(X509.hex2rdn(t,n[i]));return"/"+(r=r.map((function(t){return t.replace("/","\\/")}))).join("/")},X509.hex2rdn=function(t,e){if(void 0===e&&(e=0),"31"!==t.substr(e,2))throw"malformed RDN";for(var r=new Array,n=W.getChildIdx(t,e),i=0;i<n.length;i++)r.push(X509.hex2attrTypeValue(t,n[i]));return(r=r.map((function(t){return t.replace("+","\\+")}))).join("+")},X509.hex2attrTypeValue=function(t,e){var r=W,n=r.getV;if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed attribute type and value";var i=r.getChildIdx(t,e);2!==i.length||t.substr(i[0],2);var s=n(t,i[0]),o=K.asn1.ASN1Util.oidHexToInt(s);return K.asn1.x509.OID.oid2atype(o)+"="+hextorstr(n(t,i[1]))},X509.getPublicKeyFromCertHex=function(t){var e=new X509;return e.readCertHex(t),e.getPublicKey()},X509.getPublicKeyFromCertPEM=function(t){var e=new X509;return e.readCertPEM(t),e.getPublicKey()},X509.getPublicKeyInfoPropOfCertPEM=function(t){var e,r,n=W.getVbyList,i={};return i.algparam=null,(e=new X509).readCertPEM(t),r=e.getPublicKeyHex(),i.keyhex=n(r,0,[1],"03").substr(2),i.algoid=n(r,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=n(r,0,[0,1],"06")),i},X509.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==K&&K||(K={}),void 0!==K.jws&&K.jws||(K.jws={}),K.jws.JWS=function(){var t=K.jws.JWS.isSafeJSONString;this.parseJWS=function(e,r){if(void 0===this.parsedJWS||!r&&void 0===this.parsedJWS.sigvalH){var n=e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==n)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=n[1],s=n[2],o=n[3],a=i+"."+s;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=s,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=a,!r){var c=b64utohex(o),u=parseBigInt(c,16);this.parsedJWS.sigvalH=c,this.parsedJWS.sigvalBI=u}var h=G(i),l=G(s);if(this.parsedJWS.headS=h,this.parsedJWS.payloadS=l,!t(h,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+h}}},K.jws.JWS.sign=function(t,e,r,n,i){var s,o,a,c=K,u=c.jws.JWS,h=u.readSafeJSONString,l=u.isSafeJSONString,f=c.crypto,p=(f.ECDSA,f.Mac),d=f.Signature,g=JSON;if("string"!=typeof e&&"object"!=typeof e)throw"spHeader must be JSON string or object: "+e;if("object"==typeof e&&(o=e,s=g.stringify(o)),"string"==typeof e){if(!l(s=e))throw"JWS Head is not safe JSON string: "+s;o=h(s)}if(a=r,"object"==typeof r&&(a=g.stringify(r)),""!=t&&null!=t||void 0===o.alg||(t=o.alg),""!=t&&null!=t&&void 0===o.alg&&(o.alg=t,s=g.stringify(o)),t!==o.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+o.alg;var y=null;if(void 0===u.jwsalg2sigalg[t])throw"unsupported alg name: "+t;y=u.jwsalg2sigalg[t];var v=z(s)+"."+z(a),m="";if("Hmac"==y.substr(0,4)){if(void 0===n)throw"mac key shall be specified for HS* alg";var b=new p({alg:y,prov:"cryptojs",pass:n});b.updateString(v),m=b.doFinal()}else{var S;if(-1!=y.indexOf("withECDSA"))(S=new d({alg:y})).init(n,i),S.updateString(v),hASN1Sig=S.sign(),m=K.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig);else if("none"!=y)(S=new d({alg:y})).init(n,i),S.updateString(v),m=S.sign()}return v+"."+hextob64u(m)},K.jws.JWS.verify=function(t,e,r){var n,i=K,s=i.jws.JWS,o=s.readSafeJSONString,a=i.crypto,c=a.ECDSA,u=a.Mac,h=a.Signature;n=RSAKey;var l=t.split(".");if(3!==l.length)return!1;var f=l[0]+"."+l[1],p=b64utohex(l[2]),d=o(G(l[0])),g=null,y=null;if(void 0===d.alg)throw"algorithm not specified in header";if((y=(g=d.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&r.length>0)&&-1==(":"+r.join(":")+":").indexOf(":"+g+":"))throw"algorithm '"+g+"' not accepted in the list";if("none"!=g&&null===e)throw"key shall be specified to verify.";if("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&(e=J.getKey(e)),!("RS"!=y&&"PS"!=y||e instanceof n))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==y&&!(e instanceof c))throw"key shall be a ECDSA obj for ES* algs";var v=null;if(void 0===s.jwsalg2sigalg[d.alg])throw"unsupported alg name: "+g;if("none"==(v=s.jwsalg2sigalg[g]))throw"not supported";if("Hmac"==v.substr(0,4)){if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var m=new u({alg:v,pass:e});return m.updateString(f),p==m.doFinal()}if(-1!=v.indexOf("withECDSA")){var b,S=null;try{S=c.concatSigToASN1Sig(p)}catch(t){return!1}return(b=new h({alg:v})).init(e),b.updateString(f),b.verify(S)}return(b=new h({alg:v})).init(e),b.updateString(f),b.verify(p)},K.jws.JWS.parse=function(t){var e,r,n,i=t.split("."),s={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return e=i[0],r=i[1],3==i.length&&(n=i[2]),s.headerObj=K.jws.JWS.readSafeJSONString(G(e)),s.payloadObj=K.jws.JWS.readSafeJSONString(G(r)),s.headerPP=JSON.stringify(s.headerObj,null,"  "),null==s.payloadObj?s.payloadPP=G(r):s.payloadPP=JSON.stringify(s.payloadObj,null,"  "),void 0!==n&&(s.sigHex=b64utohex(n)),s},K.jws.JWS.verifyJWT=function(t,e,r){var n=K.jws,i=n.JWS,s=i.readSafeJSONString,o=i.inArray,a=i.includedArray,c=t.split("."),u=c[0],h=c[1],l=(b64utohex(c[2]),s(G(u))),f=s(G(h));if(void 0===l.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!o(l.alg,r.alg))return!1;if(void 0!==f.iss&&"object"==typeof r.iss&&!o(f.iss,r.iss))return!1;if(void 0!==f.sub&&"object"==typeof r.sub&&!o(f.sub,r.sub))return!1;if(void 0!==f.aud&&"object"==typeof r.aud)if("string"==typeof f.aud){if(!o(f.aud,r.aud))return!1}else if("object"==typeof f.aud&&!a(f.aud,r.aud))return!1;var p=n.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(p=r.verifyAt),void 0!==r.gracePeriod&&"number"==typeof r.gracePeriod||(r.gracePeriod=0),!(void 0!==f.exp&&"number"==typeof f.exp&&f.exp+r.gracePeriod<p)&&(!(void 0!==f.nbf&&"number"==typeof f.nbf&&p<f.nbf-r.gracePeriod)&&(!(void 0!==f.iat&&"number"==typeof f.iat&&p<f.iat-r.gracePeriod)&&((void 0===f.jti||void 0===r.jti||f.jti===r.jti)&&!!i.verify(t,e,r.alg))))},K.jws.JWS.includedArray=function(t,e){var r=K.jws.JWS.inArray;if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var n=0;n<t.length;n++)if(!r(t[n],e))return!1;return!0},K.jws.JWS.inArray=function(t,e){if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var r=0;r<e.length;r++)if(e[r]==t)return!0;return!1},K.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},K.jws.JWS.isSafeJSONString=function(t,e,r){var n=null;try{return"object"!=typeof(n=V(t))?0:n.constructor===Array?0:(e&&(e[r]=n),1)}catch(t){return 0}},K.jws.JWS.readSafeJSONString=function(t){var e=null;try{return"object"!=typeof(e=V(t))?null:e.constructor===Array?null:e}catch(t){return null}},K.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==e)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]},K.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var e="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var r=rstrtohex(e);return hextob64u(K.crypto.Util.hashHex(r,"sha256"))},K.jws.IntDate={},K.jws.IntDate.get=function(t){var e=K.jws.IntDate,r=e.getNow,n=e.getZulu;if("now"==t)return r();if("now + 1hour"==t)return r()+3600;if("now + 1day"==t)return r()+86400;if("now + 1month"==t)return r()+2592e3;if("now + 1year"==t)return r()+31536e3;if(t.match(/Z$/))return n(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},K.jws.IntDate.getZulu=function(t){return zulutosec(t)},K.jws.IntDate.getNow=function(){return~~(new Date/1e3)},K.jws.IntDate.intDate2UTCString=function(t){return new Date(1e3*t).toUTCString()},K.jws.IntDate.intDate2Zulu=function(t){var e=new Date(1e3*t);return("0000"+e.getUTCFullYear()).slice(-4)+("00"+(e.getUTCMonth()+1)).slice(-2)+("00"+e.getUTCDate()).slice(-2)+("00"+e.getUTCHours()).slice(-2)+("00"+e.getUTCMinutes()).slice(-2)+("00"+e.getUTCSeconds()).slice(-2)+"Z"},void 0!==K&&K||(K={}),void 0!==K.jws&&K.jws||(K.jws={}),K.jws.JWSJS=function(){var t=K.jws.JWS,e=t.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(t){this.init();var e=t.split(".");if(3!=e.length)throw"malformed input JWS";this.aHeader.push(e[0]),this.sPayload=e[1],this.aSignature.push(e[2])},this.addSignature=function(t,e,r,n){if(void 0===this.sPayload||null===this.sPayload)throw"there's no JSON-JS signature to add.";var i=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var s=K.jws.JWS.sign(t,e,this.sPayload,r,n).split(".");s[0],s[2];this.aHeader.push(s[0]),this.aSignature.push(s[2])}catch(t){throw this.aHeader.length>i&&this.aHeader.pop(),this.aSignature.length>i&&this.aSignature.pop(),"addSignature failed: "+t}},this.verifyAll=function(t){if(this.aHeader.length!==t.length||this.aSignature.length!==t.length)return!1;for(var e=0;e<t.length;e++){var r=t[e];if(2!==r.length)return!1;if(!1===this.verifyNth(e,r[0],r[1]))return!1}return!0},this.verifyNth=function(e,r,n){if(this.aHeader.length<=e||this.aSignature.length<=e)return!1;var i=this.aHeader[e],s=this.aSignature[e],o=i+"."+this.sPayload+"."+s,a=!1;try{a=t.verify(o,r,n)}catch(t){return!1}return a},this.readJWSJS=function(t){if("string"==typeof t){var r=e(t);if(null==r)throw"argument is not safe JSON object string";this.aHeader=r.headers,this.sPayload=r.payload,this.aSignature=r.signatures}else try{if(!(t.headers.length>0))throw"malformed header";if(this.aHeader=t.headers,"string"!=typeof t.payload)throw"malformed signatures";if(this.sPayload=t.payload,!(t.signatures.length>0))throw"malformed signatures";this.aSignatures=t.signatures}catch(t){throw"malformed JWS-JS JSON object: "+t}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},e.SecureRandom=SecureRandom,e.rng_seed_time=rng_seed_time,e.BigInteger=BigInteger,e.RSAKey=RSAKey,e.ECDSA=K.crypto.ECDSA,e.DSA=K.crypto.DSA,e.Signature=K.crypto.Signature,e.MessageDigest=K.crypto.MessageDigest,e.Mac=K.crypto.Mac,e.Cipher=K.crypto.Cipher,e.KEYUTIL=J,e.ASN1HEX=W,e.X509=X509,e.CryptoJS=S,e.b64tohex=b64tohex,e.b64toBA=b64toBA,e.stoBA=stoBA,e.BAtos=BAtos,e.BAtohex=BAtohex,e.stohex=stohex,e.stob64=function stob64(t){return hex2b64(stohex(t))},e.stob64u=function stob64u(t){return b64tob64u(hex2b64(stohex(t)))},e.b64utos=function b64utos(t){return BAtos(b64toBA(b64utob64(t)))},e.b64tob64u=b64tob64u,e.b64utob64=b64utob64,e.hex2b64=hex2b64,e.hextob64u=hextob64u,e.b64utohex=b64utohex,e.utf8tob64u=z,e.b64utoutf8=G,e.utf8tob64=function utf8tob64(t){return hex2b64(uricmptohex(encodeURIComponentAll(t)))},e.b64toutf8=function b64toutf8(t){return decodeURIComponent(hextouricmp(b64tohex(t)))},e.utf8tohex=utf8tohex,e.hextoutf8=hextoutf8,e.hextorstr=hextorstr,e.rstrtohex=rstrtohex,e.hextob64=hextob64,e.hextob64nl=hextob64nl,e.b64nltohex=b64nltohex,e.hextopem=hextopem,e.pemtohex=pemtohex,e.hextoArrayBuffer=function hextoArrayBuffer(t){if(t.length%2!=0)throw"input is not even length";if(null==t.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var e=new ArrayBuffer(t.length/2),r=new DataView(e),n=0;n<t.length/2;n++)r.setUint8(n,parseInt(t.substr(2*n,2),16));return e},e.ArrayBuffertohex=function ArrayBuffertohex(t){for(var e="",r=new DataView(t),n=0;n<t.byteLength;n++)e+=("00"+r.getUint8(n).toString(16)).slice(-2);return e},e.zulutomsec=zulutomsec,e.zulutosec=zulutosec,e.zulutodate=function zulutodate(t){return new Date(zulutomsec(t))},e.datetozulu=function datetozulu(t,e,r){var n,i=t.getUTCFullYear();if(e){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;n=(""+i).slice(-2)}else n=("000"+i).slice(-4);if(n+=("0"+(t.getUTCMonth()+1)).slice(-2),n+=("0"+t.getUTCDate()).slice(-2),n+=("0"+t.getUTCHours()).slice(-2),n+=("0"+t.getUTCMinutes()).slice(-2),n+=("0"+t.getUTCSeconds()).slice(-2),r){var s=t.getUTCMilliseconds();0!==s&&(n+="."+(s=(s=("00"+s).slice(-3)).replace(/0+$/g,"")))}return n+="Z"},e.uricmptohex=uricmptohex,e.hextouricmp=hextouricmp,e.ipv6tohex=ipv6tohex,e.hextoipv6=hextoipv6,e.hextoip=hextoip,e.iptohex=function iptohex(t){var e="malformed IP address";if(!(t=t.toLowerCase(t)).match(/^[0-9.]+$/)){if(t.match(/^[0-9a-f:]+$/)&&-1!==t.indexOf(":"))return ipv6tohex(t);throw e}var r=t.split(".");if(4!==r.length)throw e;var n="";try{for(var i=0;i<4;i++){n+=("0"+parseInt(r[i]).toString(16)).slice(-2)}return n}catch(t){throw e}},e.encodeURIComponentAll=encodeURIComponentAll,e.newline_toUnix=function newline_toUnix(t){return t=t.replace(/\r\n/gm,"\n")},e.newline_toDos=function newline_toDos(t){return t=(t=t.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},e.hextoposhex=hextoposhex,e.intarystrtohex=intarystrtohex,e.strdiffidx=function(t,e){var r=t.length;t.length>e.length&&(r=e.length);for(var n=0;n<r;n++)if(t.charCodeAt(n)!=e.charCodeAt(n))return n;return t.length!=e.length?r:-1},e.KJUR=K,e.crypto=K.crypto,e.asn1=K.asn1,e.jws=K.jws,e.lang=K.lang},,function(t,e,r){"use strict";var n=r(6);function encode(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function buildURL(t,e,r){if(!e)return t;var i;if(r)i=r(e);else if(n.isURLSearchParams(e))i=e.toString();else{var s=[];n.forEach(e,(function serialize(t,e){null!=t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,(function parseValue(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),s.push(encode(e)+"="+encode(t))})))})),i=s.join("&")}if(i){var o=t.indexOf("#");-1!==o&&(t=t.slice(0,o)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}},function(t,e,r){"use strict";var n=r(35);t.exports=function createError(t,e,r,i,s){var o=new Error(t);return n(o,e,r,i,s)}},function(t,e){t.exports=require("https")},function(t,e){t.exports=require("stream")},function(t,e){function _typeof2(t){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof2(t){return typeof t}:function _typeof2(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(e){return"function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?t.exports=_typeof=function _typeof(t){return _typeof2(t)}:t.exports=_typeof=function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)},_typeof(e)}t.exports=_typeof},function(t,e,r){var n=r(27),i=r(29);t.exports=function v4(t,e,r){var s=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var a=0;a<16;++a)e[s+a]=o[a];return e||i(o)}},function(t,e,r){var n=r(52);t.exports=function _objectWithoutProperties(t,e){if(null==t)return{};var r,i,s=n(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}},function(t,e,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function toObject(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,o,a=toObject(t),c=1;c<arguments.length;c++){for(var u in r=Object(arguments[c]))i.call(r,u)&&(a[u]=r[u]);if(n){o=n(r);for(var h=0;h<o.length;h++)s.call(r,o[h])&&(a[o[h]]=r[o[h]])}}return a}},function(t,e){t.exports=function _arrayWithHoles(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,r){var n=r(28);t.exports=function nodeRNG(){return n.randomBytes(16)}},function(t,e){t.exports=require("crypto")},function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);t.exports=function bytesToUuid(t,e){var n=e||0,i=r;return[i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]]].join("")}},function(t,e){t.exports=function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e,r){"use strict";t.exports=function bind(t,e){return function wrap(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},function(t,e,r){"use strict";t.exports=function isCancel(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";var n=r(6),i=r(60),s={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var o={adapter:function getDefaultAdapter(){var t;return"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?t=r(61):"undefined"!=typeof XMLHttpRequest&&(t=r(72)),t}(),transformRequest:[function transformRequest(t,e){return i(e,"Accept"),i(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(setContentTypeIfUnset(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)?(setContentTypeIfUnset(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function transformResponse(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function validateStatus(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function forEachMethodNoData(t){o.headers[t]={}})),n.forEach(["post","put","patch"],(function forEachMethodWithData(t){o.headers[t]=n.merge(s)})),t.exports=o},function(t,e,r){"use strict";var n=r(18);t.exports=function settle(t,e,r){var i=r.config.validateStatus;!i||i(r.status)?t(r):e(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(t,e,r){"use strict";t.exports=function enhanceError(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,r){var n=r(13),i=r(14),s=r(19),o=r(37),a=r(20).Writable,c=r(62)("follow-redirects"),u={GET:!0,HEAD:!0,OPTIONS:!0,TRACE:!0},h=Object.create(null);function RedirectableRequest(t,e){a.call(this),t.headers=t.headers||{},this._options=t,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t.host&&(t.hostname||(t.hostname=t.host),delete t.host),e&&this.on("response",e);var r=this;if(this._onNativeResponse=function(t){r._processResponse(t)},!t.pathname&&t.path){var n=t.path.indexOf("?");n<0?t.pathname=t.path:(t.pathname=t.path.substring(0,n),t.search=t.path.substring(n))}this._performRequest()}function wrap(t){var e={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(t).forEach((function(i){var s=i+":",a=r[s]=t[i],u=e[i]=Object.create(a);u.request=function(t,i){return"string"==typeof t?(t=n.parse(t)).maxRedirects=e.maxRedirects:t=Object.assign({protocol:s,maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},t),t.nativeProtocols=r,o.equal(t.protocol,s,"protocol mismatch"),c("options",t),new RedirectableRequest(t,i)},u.get=function(t,e){var r=u.request(t,e);return r.end(),r}})),e}["abort","aborted","error","socket","timeout"].forEach((function(t){h[t]=function(e){this._redirectable.emit(t,e)}})),RedirectableRequest.prototype=Object.create(a.prototype),RedirectableRequest.prototype.write=function(t,e,r){if(!("string"==typeof t||"object"==typeof t&&"length"in t))throw new Error("data should be a string, Buffer or Uint8Array");"function"==typeof e&&(r=e,e=null),0!==t.length?this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new Error("Request body larger than maxBodyLength limit")),this.abort()):r&&r()},RedirectableRequest.prototype.end=function(t,e,r){"function"==typeof t?(r=t,t=e=null):"function"==typeof e&&(r=e,e=null);var n=this._currentRequest;this.write(t||"",e,(function(){n.end(null,null,r)}))},RedirectableRequest.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)},RedirectableRequest.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)},["abort","flushHeaders","getHeader","setNoDelay","setSocketKeepAlive","setTimeout"].forEach((function(t){RedirectableRequest.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}})),["aborted","connection","socket"].forEach((function(t){Object.defineProperty(RedirectableRequest.prototype,t,{get:function(){return this._currentRequest[t]}})})),RedirectableRequest.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(e){if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var i=this._currentRequest=e.request(this._options,this._onNativeResponse);for(var s in this._currentUrl=n.format(this._options),i._redirectable=this,h)s&&i.on(s,h[s]);if(this._isRedirect){var o=0,a=this._requestBodyBuffers;!function writeNext(){if(o<a.length){var t=a[o++];i.write(t.data,t.encoding,writeNext)}else i.end()}()}}else this.emit("error",new Error("Unsupported protocol "+t))},RedirectableRequest.prototype._processResponse=function(t){this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:t.statusCode});var e=t.headers.location;if(e&&!1!==this._options.followRedirects&&t.statusCode>=300&&t.statusCode<400){if(++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new Error("Max redirects exceeded."));var r,i=this._options.headers;if(307!==t.statusCode&&!(this._options.method in u))for(r in this._options.method="GET",this._requestBodyBuffers=[],i)/^content-/i.test(r)&&delete i[r];if(!this._isRedirect)for(r in i)/^host$/i.test(r)&&delete i[r];var s=n.resolve(this._currentUrl,e);c("redirecting to",s),Object.assign(this._options,n.parse(s)),this._isRedirect=!0,this._performRequest(),t.destroy()}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]},t.exports=wrap({http:i,https:s}),t.exports.wrap=wrap},function(t,e){t.exports=require("assert")},function(t,e,r){function createDebug(t){var r;function debug(){if(debug.enabled){var t=debug,n=+new Date,i=n-(r||n);t.diff=i,t.prev=r,t.curr=n,r=n;for(var s=new Array(arguments.length),o=0;o<s.length;o++)s[o]=arguments[o];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var a=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;a++;var i=e.formatters[n];if("function"==typeof i){var o=s[a];r=i.call(t,o),s.splice(a,1),a--}return r})),e.formatArgs.call(t,s),(debug.log||e.log||console.log.bind(console)).apply(t,s)}}return debug.namespace=t,debug.enabled=e.enabled(t),debug.useColors=e.useColors(),debug.color=function selectColor(t){var r,n=0;for(r in t)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]}(t),debug.destroy=destroy,"function"==typeof e.init&&e.init(debug),e.instances.push(debug),debug}function destroy(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=createDebug.debug=createDebug.default=createDebug).coerce=function coerce(t){return t instanceof Error?t.stack||t.message:t},e.disable=function disable(){e.enable("")},e.enable=function enable(t){var r;e.save(t),e.names=[],e.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(t=n[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(r=0;r<e.instances.length;r++){var s=e.instances[r];s.enabled=e.enabled(s.namespace)}},e.enabled=function enabled(t){if("*"===t[t.length-1])return!0;var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=r(64),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e){t.exports=require("util")},function(t,e,r){"use strict";var n=r(6);t.exports=function mergeConfig(t,e){e=e||{};var r={};return n.forEach(["url","method","params","data"],(function valueFromConfig2(t){void 0!==e[t]&&(r[t]=e[t])})),n.forEach(["headers","auth","proxy"],(function mergeDeepProperties(i){n.isObject(e[i])?r[i]=n.deepMerge(t[i],e[i]):void 0!==e[i]?r[i]=e[i]:n.isObject(t[i])?r[i]=n.deepMerge(t[i]):void 0!==t[i]&&(r[i]=t[i])})),n.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function defaultToConfig2(n){void 0!==e[n]?r[n]=e[n]:void 0!==t[n]&&(r[n]=t[n])})),r}},function(t,e,r){"use strict";function Cancel(t){this.message=t}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,t.exports=Cancel},function(t,e,r){var n=r(25),i=r(30),s=r(26);t.exports=function _toArray(t){return n(t)||i(t)||s()}},function(t,e){t.exports=function _objectDestructuringEmpty(t){if(null==t)throw new TypeError("Cannot destructure undefined")}},function(t,e,r){
/*!
 * Pusher JavaScript Library v5.0.3
 * https://pusher.com/
 *
 * Copyright 2017, Pusher
 * Released under the MIT licence.
 */
t.exports=function(t){var e={};function __webpack_require__(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,r){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)__webpack_require__.d(r,n,function(e){return t[e]}.bind(null,n));return r},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=20)}([function(t,e){t.exports=r(39)},function(t,e,r){var n=r(21),i=n.Buffer;function copyProps(t,e){for(var r in t)e[r]=t[r]}function SafeBuffer(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(copyProps(n,e),e.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(i.prototype),copyProps(i,SafeBuffer),SafeBuffer.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},SafeBuffer.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},SafeBuffer.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},SafeBuffer.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){"use strict";var n=r(1).Buffer,i=r(22).EventEmitter,s=r(0),o=r(23),a=r(10),c=r(24),Base=function(t,e,r){i.call(this),Base.validateOptions(r||{},["maxLength","masking","requireMasking","protocols"]),this._request=t,this._reader=new c,this._options=r||{},this._maxLength=this._options.maxLength||this.MAX_LENGTH,this._headers=new a,this.__queue=[],this.readyState=0,this.url=e,this.io=new o.IO(this),this.messages=new o.Messages(this),this._bindEventListeners()};s.inherits(Base,i),Base.isWebSocket=function(t){var e=t.headers.connection||"",r=t.headers.upgrade||"";return"GET"===t.method&&e.toLowerCase().split(/ *, */).indexOf("upgrade")>=0&&"websocket"===r.toLowerCase()},Base.validateOptions=function(t,e){for(var r in t)if(e.indexOf(r)<0)throw new Error("Unrecognized option: "+r)};var u={MAX_LENGTH:67108863,STATES:["connecting","open","closing","closed"],_bindEventListeners:function(){var t=this;this.messages.on("error",(function(){})),this.on("message",(function(e){var r=t.messages;r.readable&&r.emit("data",e.data)})),this.on("error",(function(e){var r=t.messages;r.readable&&r.emit("error",e)})),this.on("close",(function(){var e=t.messages;e.readable&&(e.readable=e.writable=!1,e.emit("end"))}))},getState:function(){return this.STATES[this.readyState]||null},addExtension:function(t){return!1},setHeader:function(t,e){return!(this.readyState>0)&&(this._headers.set(t,e),!0)},start:function(){if(0!==this.readyState)return!1;if(!Base.isWebSocket(this._request))return this._failHandshake(new Error("Not a WebSocket request"));var t;try{t=this._handshakeResponse()}catch(t){return this._failHandshake(t)}return this._write(t),-1!==this._stage&&this._open(),!0},_failHandshake:function(t){var e=new a;return e.set("Content-Type","text/plain"),e.set("Content-Length",n.byteLength(t.message,"utf8")),e=["HTTP/1.1 400 Bad Request",e.toString(),t.message],this._write(n.from(e.join("\r\n"),"utf8")),this._fail("protocol_error",t.message),!1},text:function(t){return this.frame(t)},binary:function(t){return!1},ping:function(){return!1},pong:function(){return!1},close:function(t,e){return 1===this.readyState&&(this.readyState=3,this.emit("close",new Base.CloseEvent(null,null)),!0)},_open:function(){this.readyState=1,this.__queue.forEach((function(t){this.frame.apply(this,t)}),this),this.__queue=[],this.emit("open",new Base.OpenEvent)},_queue:function(t){return this.__queue.push(t),!0},_write:function(t){var e=this.io;e.readable&&e.emit("data",t)},_fail:function(t,e){this.readyState=2,this.emit("error",new Error(e)),this.close()}};for(var h in u)Base.prototype[h]=u[h];Base.ConnectEvent=function(){},Base.OpenEvent=function(){},Base.CloseEvent=function(t,e){this.code=t,this.reason=e},Base.MessageEvent=function(t){this.data=t},Base.PingEvent=function(t){this.data=t},Base.PongEvent=function(t){this.data=t},t.exports=Base},function(t,e,r){!function(t){"use strict";var gf=function(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;e++)r[e]=t[e];return r},randombytes=function(){throw new Error("no PRNG")},e=new Uint8Array(16),n=new Uint8Array(32);n[0]=9;var i=gf(),s=gf([1]),o=gf([56129,1]),a=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),l=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ts64(t,e,r,n){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r,t[e+4]=n>>24&255,t[e+5]=n>>16&255,t[e+6]=n>>8&255,t[e+7]=255&n}function vn(t,e,r,n,i){var s,o=0;for(s=0;s<i;s++)o|=t[e+s]^r[n+s];return(1&o-1>>>8)-1}function crypto_verify_16(t,e,r,n){return vn(t,e,r,n,16)}function crypto_verify_32(t,e,r,n){return vn(t,e,r,n,32)}function crypto_core_salsa20(t,e,r,n){!function core_salsa20(t,e,r,n){for(var i,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,h=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,f=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,p=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,d=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,v=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,m=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,S=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,x=s,w=o,E=a,_=c,F=u,A=h,C=l,T=f,P=p,I=d,R=g,O=y,B=v,k=m,D=b,H=S,N=0;N<20;N+=2)x^=(i=(B^=(i=(P^=(i=(F^=(i=x+B|0)<<7|i>>>25)+x|0)<<9|i>>>23)+F|0)<<13|i>>>19)+P|0)<<18|i>>>14,A^=(i=(w^=(i=(k^=(i=(I^=(i=A+w|0)<<7|i>>>25)+A|0)<<9|i>>>23)+I|0)<<13|i>>>19)+k|0)<<18|i>>>14,R^=(i=(C^=(i=(E^=(i=(D^=(i=R+C|0)<<7|i>>>25)+R|0)<<9|i>>>23)+D|0)<<13|i>>>19)+E|0)<<18|i>>>14,H^=(i=(O^=(i=(T^=(i=(_^=(i=H+O|0)<<7|i>>>25)+H|0)<<9|i>>>23)+_|0)<<13|i>>>19)+T|0)<<18|i>>>14,x^=(i=(_^=(i=(E^=(i=(w^=(i=x+_|0)<<7|i>>>25)+x|0)<<9|i>>>23)+w|0)<<13|i>>>19)+E|0)<<18|i>>>14,A^=(i=(F^=(i=(T^=(i=(C^=(i=A+F|0)<<7|i>>>25)+A|0)<<9|i>>>23)+C|0)<<13|i>>>19)+T|0)<<18|i>>>14,R^=(i=(I^=(i=(P^=(i=(O^=(i=R+I|0)<<7|i>>>25)+R|0)<<9|i>>>23)+O|0)<<13|i>>>19)+P|0)<<18|i>>>14,H^=(i=(D^=(i=(k^=(i=(B^=(i=H+D|0)<<7|i>>>25)+H|0)<<9|i>>>23)+B|0)<<13|i>>>19)+k|0)<<18|i>>>14;x=x+s|0,w=w+o|0,E=E+a|0,_=_+c|0,F=F+u|0,A=A+h|0,C=C+l|0,T=T+f|0,P=P+p|0,I=I+d|0,R=R+g|0,O=O+y|0,B=B+v|0,k=k+m|0,D=D+b|0,H=H+S|0,t[0]=x>>>0&255,t[1]=x>>>8&255,t[2]=x>>>16&255,t[3]=x>>>24&255,t[4]=w>>>0&255,t[5]=w>>>8&255,t[6]=w>>>16&255,t[7]=w>>>24&255,t[8]=E>>>0&255,t[9]=E>>>8&255,t[10]=E>>>16&255,t[11]=E>>>24&255,t[12]=_>>>0&255,t[13]=_>>>8&255,t[14]=_>>>16&255,t[15]=_>>>24&255,t[16]=F>>>0&255,t[17]=F>>>8&255,t[18]=F>>>16&255,t[19]=F>>>24&255,t[20]=A>>>0&255,t[21]=A>>>8&255,t[22]=A>>>16&255,t[23]=A>>>24&255,t[24]=C>>>0&255,t[25]=C>>>8&255,t[26]=C>>>16&255,t[27]=C>>>24&255,t[28]=T>>>0&255,t[29]=T>>>8&255,t[30]=T>>>16&255,t[31]=T>>>24&255,t[32]=P>>>0&255,t[33]=P>>>8&255,t[34]=P>>>16&255,t[35]=P>>>24&255,t[36]=I>>>0&255,t[37]=I>>>8&255,t[38]=I>>>16&255,t[39]=I>>>24&255,t[40]=R>>>0&255,t[41]=R>>>8&255,t[42]=R>>>16&255,t[43]=R>>>24&255,t[44]=O>>>0&255,t[45]=O>>>8&255,t[46]=O>>>16&255,t[47]=O>>>24&255,t[48]=B>>>0&255,t[49]=B>>>8&255,t[50]=B>>>16&255,t[51]=B>>>24&255,t[52]=k>>>0&255,t[53]=k>>>8&255,t[54]=k>>>16&255,t[55]=k>>>24&255,t[56]=D>>>0&255,t[57]=D>>>8&255,t[58]=D>>>16&255,t[59]=D>>>24&255,t[60]=H>>>0&255,t[61]=H>>>8&255,t[62]=H>>>16&255,t[63]=H>>>24&255}(t,e,r,n)}function crypto_core_hsalsa20(t,e,r,n){!function core_hsalsa20(t,e,r,n){for(var i,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,h=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,f=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,p=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,d=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,v=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,m=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,S=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,x=0;x<20;x+=2)s^=(i=(v^=(i=(p^=(i=(u^=(i=s+v|0)<<7|i>>>25)+s|0)<<9|i>>>23)+u|0)<<13|i>>>19)+p|0)<<18|i>>>14,h^=(i=(o^=(i=(m^=(i=(d^=(i=h+o|0)<<7|i>>>25)+h|0)<<9|i>>>23)+d|0)<<13|i>>>19)+m|0)<<18|i>>>14,g^=(i=(l^=(i=(a^=(i=(b^=(i=g+l|0)<<7|i>>>25)+g|0)<<9|i>>>23)+b|0)<<13|i>>>19)+a|0)<<18|i>>>14,S^=(i=(y^=(i=(f^=(i=(c^=(i=S+y|0)<<7|i>>>25)+S|0)<<9|i>>>23)+c|0)<<13|i>>>19)+f|0)<<18|i>>>14,s^=(i=(c^=(i=(a^=(i=(o^=(i=s+c|0)<<7|i>>>25)+s|0)<<9|i>>>23)+o|0)<<13|i>>>19)+a|0)<<18|i>>>14,h^=(i=(u^=(i=(f^=(i=(l^=(i=h+u|0)<<7|i>>>25)+h|0)<<9|i>>>23)+l|0)<<13|i>>>19)+f|0)<<18|i>>>14,g^=(i=(d^=(i=(p^=(i=(y^=(i=g+d|0)<<7|i>>>25)+g|0)<<9|i>>>23)+y|0)<<13|i>>>19)+p|0)<<18|i>>>14,S^=(i=(b^=(i=(m^=(i=(v^=(i=S+b|0)<<7|i>>>25)+S|0)<<9|i>>>23)+v|0)<<13|i>>>19)+m|0)<<18|i>>>14;t[0]=s>>>0&255,t[1]=s>>>8&255,t[2]=s>>>16&255,t[3]=s>>>24&255,t[4]=h>>>0&255,t[5]=h>>>8&255,t[6]=h>>>16&255,t[7]=h>>>24&255,t[8]=g>>>0&255,t[9]=g>>>8&255,t[10]=g>>>16&255,t[11]=g>>>24&255,t[12]=S>>>0&255,t[13]=S>>>8&255,t[14]=S>>>16&255,t[15]=S>>>24&255,t[16]=l>>>0&255,t[17]=l>>>8&255,t[18]=l>>>16&255,t[19]=l>>>24&255,t[20]=f>>>0&255,t[21]=f>>>8&255,t[22]=f>>>16&255,t[23]=f>>>24&255,t[24]=p>>>0&255,t[25]=p>>>8&255,t[26]=p>>>16&255,t[27]=p>>>24&255,t[28]=d>>>0&255,t[29]=d>>>8&255,t[30]=d>>>16&255,t[31]=d>>>24&255}(t,e,r,n)}var f=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(t,e,r,n,i,s,o){var a,c,u=new Uint8Array(16),h=new Uint8Array(64);for(c=0;c<16;c++)u[c]=0;for(c=0;c<8;c++)u[c]=s[c];for(;i>=64;){for(crypto_core_salsa20(h,u,o,f),c=0;c<64;c++)t[e+c]=r[n+c]^h[c];for(a=1,c=8;c<16;c++)a=a+(255&u[c])|0,u[c]=255&a,a>>>=8;i-=64,e+=64,n+=64}if(i>0)for(crypto_core_salsa20(h,u,o,f),c=0;c<i;c++)t[e+c]=r[n+c]^h[c];return 0}function crypto_stream_salsa20(t,e,r,n,i){var s,o,a=new Uint8Array(16),c=new Uint8Array(64);for(o=0;o<16;o++)a[o]=0;for(o=0;o<8;o++)a[o]=n[o];for(;r>=64;){for(crypto_core_salsa20(c,a,i,f),o=0;o<64;o++)t[e+o]=c[o];for(s=1,o=8;o<16;o++)s=s+(255&a[o])|0,a[o]=255&s,s>>>=8;r-=64,e+=64}if(r>0)for(crypto_core_salsa20(c,a,i,f),o=0;o<r;o++)t[e+o]=c[o];return 0}function crypto_stream(t,e,r,n,i){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,i,f);for(var o=new Uint8Array(8),a=0;a<8;a++)o[a]=n[a+16];return crypto_stream_salsa20(t,e,r,o,s)}function crypto_stream_xor(t,e,r,n,i,s,o){var a=new Uint8Array(32);crypto_core_hsalsa20(a,s,o,f);for(var c=new Uint8Array(8),u=0;u<8;u++)c[u]=s[u+16];return crypto_stream_salsa20_xor(t,e,r,n,i,c,a)}var poly1305=function(t){var e,r,n,i,s,o,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,e=255&t[0]|(255&t[1])<<8,this.r[0]=8191&e,r=255&t[2]|(255&t[3])<<8,this.r[1]=8191&(e>>>13|r<<3),n=255&t[4]|(255&t[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&t[6]|(255&t[7])<<8,this.r[3]=8191&(n>>>7|i<<9),s=255&t[8]|(255&t[9])<<8,this.r[4]=255&(i>>>4|s<<12),this.r[5]=s>>>1&8190,o=255&t[10]|(255&t[11])<<8,this.r[6]=8191&(s>>>14|o<<2),a=255&t[12]|(255&t[13])<<8,this.r[7]=8065&(o>>>11|a<<5),c=255&t[14]|(255&t[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8};function crypto_onetimeauth(t,e,r,n,i,s){var o=new poly1305(s);return o.update(r,n,i),o.finish(t,e),0}function crypto_onetimeauth_verify(t,e,r,n,i,s){var o=new Uint8Array(16);return crypto_onetimeauth(o,0,r,n,i,s),crypto_verify_16(t,e,o,0)}function crypto_secretbox(t,e,r,n,i){var s;if(r<32)return-1;for(crypto_stream_xor(t,0,e,0,r,n,i),crypto_onetimeauth(t,16,t,32,r-32,t),s=0;s<16;s++)t[s]=0;return 0}function crypto_secretbox_open(t,e,r,n,i){var s,o=new Uint8Array(32);if(r<32)return-1;if(crypto_stream(o,0,32,n,i),0!==crypto_onetimeauth_verify(e,16,e,32,r-32,o))return-1;for(crypto_stream_xor(t,0,e,0,r,n,i),s=0;s<32;s++)t[s]=0;return 0}function set25519(t,e){var r;for(r=0;r<16;r++)t[r]=0|e[r]}function car25519(t){var e,r,n=1;for(e=0;e<16;e++)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-65536*n;t[0]+=n-1+37*(n-1)}function sel25519(t,e,r){for(var n,i=~(r-1),s=0;s<16;s++)n=i&(t[s]^e[s]),t[s]^=n,e[s]^=n}function pack25519(t,e){var r,n,i,s=gf(),o=gf();for(r=0;r<16;r++)o[r]=e[r];for(car25519(o),car25519(o),car25519(o),n=0;n<2;n++){for(s[0]=o[0]-65517,r=1;r<15;r++)s[r]=o[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=o[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,sel25519(o,s,1-i)}for(r=0;r<16;r++)t[2*r]=255&o[r],t[2*r+1]=o[r]>>8}function neq25519(t,e){var r=new Uint8Array(32),n=new Uint8Array(32);return pack25519(r,t),pack25519(n,e),crypto_verify_32(r,0,n,0)}function par25519(t){var e=new Uint8Array(32);return pack25519(e,t),1&e[0]}function unpack25519(t,e){var r;for(r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function A(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]+r[n]}function Z(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]-r[n]}function M(t,e,r){var n,i,s=0,o=0,a=0,c=0,u=0,h=0,l=0,f=0,p=0,d=0,g=0,y=0,v=0,m=0,b=0,S=0,x=0,w=0,E=0,_=0,F=0,A=0,C=0,T=0,P=0,I=0,R=0,O=0,B=0,k=0,D=0,H=r[0],N=r[1],j=r[2],L=r[3],M=r[4],U=r[5],q=r[6],V=r[7],K=r[8],z=r[9],G=r[10],W=r[11],J=r[12],Y=r[13],X=r[14],$=r[15];s+=(n=e[0])*H,o+=n*N,a+=n*j,c+=n*L,u+=n*M,h+=n*U,l+=n*q,f+=n*V,p+=n*K,d+=n*z,g+=n*G,y+=n*W,v+=n*J,m+=n*Y,b+=n*X,S+=n*$,o+=(n=e[1])*H,a+=n*N,c+=n*j,u+=n*L,h+=n*M,l+=n*U,f+=n*q,p+=n*V,d+=n*K,g+=n*z,y+=n*G,v+=n*W,m+=n*J,b+=n*Y,S+=n*X,x+=n*$,a+=(n=e[2])*H,c+=n*N,u+=n*j,h+=n*L,l+=n*M,f+=n*U,p+=n*q,d+=n*V,g+=n*K,y+=n*z,v+=n*G,m+=n*W,b+=n*J,S+=n*Y,x+=n*X,w+=n*$,c+=(n=e[3])*H,u+=n*N,h+=n*j,l+=n*L,f+=n*M,p+=n*U,d+=n*q,g+=n*V,y+=n*K,v+=n*z,m+=n*G,b+=n*W,S+=n*J,x+=n*Y,w+=n*X,E+=n*$,u+=(n=e[4])*H,h+=n*N,l+=n*j,f+=n*L,p+=n*M,d+=n*U,g+=n*q,y+=n*V,v+=n*K,m+=n*z,b+=n*G,S+=n*W,x+=n*J,w+=n*Y,E+=n*X,_+=n*$,h+=(n=e[5])*H,l+=n*N,f+=n*j,p+=n*L,d+=n*M,g+=n*U,y+=n*q,v+=n*V,m+=n*K,b+=n*z,S+=n*G,x+=n*W,w+=n*J,E+=n*Y,_+=n*X,F+=n*$,l+=(n=e[6])*H,f+=n*N,p+=n*j,d+=n*L,g+=n*M,y+=n*U,v+=n*q,m+=n*V,b+=n*K,S+=n*z,x+=n*G,w+=n*W,E+=n*J,_+=n*Y,F+=n*X,A+=n*$,f+=(n=e[7])*H,p+=n*N,d+=n*j,g+=n*L,y+=n*M,v+=n*U,m+=n*q,b+=n*V,S+=n*K,x+=n*z,w+=n*G,E+=n*W,_+=n*J,F+=n*Y,A+=n*X,C+=n*$,p+=(n=e[8])*H,d+=n*N,g+=n*j,y+=n*L,v+=n*M,m+=n*U,b+=n*q,S+=n*V,x+=n*K,w+=n*z,E+=n*G,_+=n*W,F+=n*J,A+=n*Y,C+=n*X,T+=n*$,d+=(n=e[9])*H,g+=n*N,y+=n*j,v+=n*L,m+=n*M,b+=n*U,S+=n*q,x+=n*V,w+=n*K,E+=n*z,_+=n*G,F+=n*W,A+=n*J,C+=n*Y,T+=n*X,P+=n*$,g+=(n=e[10])*H,y+=n*N,v+=n*j,m+=n*L,b+=n*M,S+=n*U,x+=n*q,w+=n*V,E+=n*K,_+=n*z,F+=n*G,A+=n*W,C+=n*J,T+=n*Y,P+=n*X,I+=n*$,y+=(n=e[11])*H,v+=n*N,m+=n*j,b+=n*L,S+=n*M,x+=n*U,w+=n*q,E+=n*V,_+=n*K,F+=n*z,A+=n*G,C+=n*W,T+=n*J,P+=n*Y,I+=n*X,R+=n*$,v+=(n=e[12])*H,m+=n*N,b+=n*j,S+=n*L,x+=n*M,w+=n*U,E+=n*q,_+=n*V,F+=n*K,A+=n*z,C+=n*G,T+=n*W,P+=n*J,I+=n*Y,R+=n*X,O+=n*$,m+=(n=e[13])*H,b+=n*N,S+=n*j,x+=n*L,w+=n*M,E+=n*U,_+=n*q,F+=n*V,A+=n*K,C+=n*z,T+=n*G,P+=n*W,I+=n*J,R+=n*Y,O+=n*X,B+=n*$,b+=(n=e[14])*H,S+=n*N,x+=n*j,w+=n*L,E+=n*M,_+=n*U,F+=n*q,A+=n*V,C+=n*K,T+=n*z,P+=n*G,I+=n*W,R+=n*J,O+=n*Y,B+=n*X,k+=n*$,S+=(n=e[15])*H,o+=38*(w+=n*j),a+=38*(E+=n*L),c+=38*(_+=n*M),u+=38*(F+=n*U),h+=38*(A+=n*q),l+=38*(C+=n*V),f+=38*(T+=n*K),p+=38*(P+=n*z),d+=38*(I+=n*G),g+=38*(R+=n*W),y+=38*(O+=n*J),v+=38*(B+=n*Y),m+=38*(k+=n*X),b+=38*(D+=n*$),s=(n=(s+=38*(x+=n*N))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),o=(n=o+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),S=(n=S+i+65535)-65536*(i=Math.floor(n/65536)),s=(n=(s+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),o=(n=o+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),S=(n=S+i+65535)-65536*(i=Math.floor(n/65536)),s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=h,t[6]=l,t[7]=f,t[8]=p,t[9]=d,t[10]=g,t[11]=y,t[12]=v,t[13]=m,t[14]=b,t[15]=S}function S(t,e){M(t,e,e)}function inv25519(t,e){var r,n=gf();for(r=0;r<16;r++)n[r]=e[r];for(r=253;r>=0;r--)S(n,n),2!==r&&4!==r&&M(n,n,e);for(r=0;r<16;r++)t[r]=n[r]}function crypto_scalarmult(t,e,r){var n,i,s=new Uint8Array(32),a=new Float64Array(80),c=gf(),u=gf(),h=gf(),l=gf(),f=gf(),p=gf();for(i=0;i<31;i++)s[i]=e[i];for(s[31]=127&e[31]|64,s[0]&=248,unpack25519(a,r),i=0;i<16;i++)u[i]=a[i],l[i]=c[i]=h[i]=0;for(c[0]=l[0]=1,i=254;i>=0;--i)sel25519(c,u,n=s[i>>>3]>>>(7&i)&1),sel25519(h,l,n),A(f,c,h),Z(c,c,h),A(h,u,l),Z(u,u,l),S(l,f),S(p,c),M(c,h,c),M(h,u,f),A(f,c,h),Z(c,c,h),S(u,c),Z(h,l,p),M(c,h,o),A(c,c,l),M(h,h,c),M(c,l,p),M(l,u,a),S(u,f),sel25519(c,u,n),sel25519(h,l,n);for(i=0;i<16;i++)a[i+16]=c[i],a[i+32]=h[i],a[i+48]=u[i],a[i+64]=l[i];var d=a.subarray(32),g=a.subarray(16);return inv25519(d,d),M(g,g,d),pack25519(t,g),0}function crypto_scalarmult_base(t,e){return crypto_scalarmult(t,e,n)}function crypto_box_keypair(t,e){return randombytes(e,32),crypto_scalarmult_base(t,e)}function crypto_box_beforenm(t,r,n){var i=new Uint8Array(32);return crypto_scalarmult(i,n,r),crypto_core_hsalsa20(t,e,i,f)}poly1305.prototype.blocks=function(t,e,r){for(var n,i,s,o,a,c,u,h,l,f,p,d,g,y,v,m,b,S,x,w=this.fin?0:2048,E=this.h[0],_=this.h[1],F=this.h[2],A=this.h[3],C=this.h[4],T=this.h[5],P=this.h[6],I=this.h[7],R=this.h[8],O=this.h[9],B=this.r[0],k=this.r[1],D=this.r[2],H=this.r[3],N=this.r[4],j=this.r[5],L=this.r[6],M=this.r[7],U=this.r[8],q=this.r[9];r>=16;)f=l=0,f+=(E+=8191&(n=255&t[e+0]|(255&t[e+1])<<8))*B,f+=(_+=8191&(n>>>13|(i=255&t[e+2]|(255&t[e+3])<<8)<<3))*(5*q),f+=(F+=8191&(i>>>10|(s=255&t[e+4]|(255&t[e+5])<<8)<<6))*(5*U),f+=(A+=8191&(s>>>7|(o=255&t[e+6]|(255&t[e+7])<<8)<<9))*(5*M),l=(f+=(C+=8191&(o>>>4|(a=255&t[e+8]|(255&t[e+9])<<8)<<12))*(5*L))>>>13,f&=8191,f+=(T+=a>>>1&8191)*(5*j),f+=(P+=8191&(a>>>14|(c=255&t[e+10]|(255&t[e+11])<<8)<<2))*(5*N),f+=(I+=8191&(c>>>11|(u=255&t[e+12]|(255&t[e+13])<<8)<<5))*(5*H),f+=(R+=8191&(u>>>8|(h=255&t[e+14]|(255&t[e+15])<<8)<<8))*(5*D),p=l+=(f+=(O+=h>>>5|w)*(5*k))>>>13,p+=E*k,p+=_*B,p+=F*(5*q),p+=A*(5*U),l=(p+=C*(5*M))>>>13,p&=8191,p+=T*(5*L),p+=P*(5*j),p+=I*(5*N),p+=R*(5*H),l+=(p+=O*(5*D))>>>13,p&=8191,d=l,d+=E*D,d+=_*k,d+=F*B,d+=A*(5*q),l=(d+=C*(5*U))>>>13,d&=8191,d+=T*(5*M),d+=P*(5*L),d+=I*(5*j),d+=R*(5*N),g=l+=(d+=O*(5*H))>>>13,g+=E*H,g+=_*D,g+=F*k,g+=A*B,l=(g+=C*(5*q))>>>13,g&=8191,g+=T*(5*U),g+=P*(5*M),g+=I*(5*L),g+=R*(5*j),y=l+=(g+=O*(5*N))>>>13,y+=E*N,y+=_*H,y+=F*D,y+=A*k,l=(y+=C*B)>>>13,y&=8191,y+=T*(5*q),y+=P*(5*U),y+=I*(5*M),y+=R*(5*L),v=l+=(y+=O*(5*j))>>>13,v+=E*j,v+=_*N,v+=F*H,v+=A*D,l=(v+=C*k)>>>13,v&=8191,v+=T*B,v+=P*(5*q),v+=I*(5*U),v+=R*(5*M),m=l+=(v+=O*(5*L))>>>13,m+=E*L,m+=_*j,m+=F*N,m+=A*H,l=(m+=C*D)>>>13,m&=8191,m+=T*k,m+=P*B,m+=I*(5*q),m+=R*(5*U),b=l+=(m+=O*(5*M))>>>13,b+=E*M,b+=_*L,b+=F*j,b+=A*N,l=(b+=C*H)>>>13,b&=8191,b+=T*D,b+=P*k,b+=I*B,b+=R*(5*q),S=l+=(b+=O*(5*U))>>>13,S+=E*U,S+=_*M,S+=F*L,S+=A*j,l=(S+=C*N)>>>13,S&=8191,S+=T*H,S+=P*D,S+=I*k,S+=R*B,x=l+=(S+=O*(5*q))>>>13,x+=E*q,x+=_*U,x+=F*M,x+=A*L,l=(x+=C*j)>>>13,x&=8191,x+=T*N,x+=P*H,x+=I*D,x+=R*k,E=f=8191&(l=(l=((l+=(x+=O*B)>>>13)<<2)+l|0)+(f&=8191)|0),_=p+=l>>>=13,F=d&=8191,A=g&=8191,C=y&=8191,T=v&=8191,P=m&=8191,I=b&=8191,R=S&=8191,O=x&=8191,e+=16,r-=16;this.h[0]=E,this.h[1]=_,this.h[2]=F,this.h[3]=A,this.h[4]=C,this.h[5]=T,this.h[6]=P,this.h[7]=I,this.h[8]=R,this.h[9]=O},poly1305.prototype.finish=function(t,e){var r,n,i,s,o=new Uint16Array(10);if(this.leftover){for(s=this.leftover,this.buffer[s++]=1;s<16;s++)this.buffer[s]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,s=2;s<10;s++)this.h[s]+=r,r=this.h[s]>>>13,this.h[s]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,o[0]=this.h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this.h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,n=(1^r)-1,s=0;s<10;s++)o[s]&=n;for(n=~n,s=0;s<10;s++)this.h[s]=this.h[s]&n|o[s];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,s=1;s<8;s++)i=(this.h[s]+this.pad[s]|0)+(i>>>16)|0,this.h[s]=65535&i;t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255},poly1305.prototype.update=function(t,e,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=t[e+n];if(r-=i,e+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(t,e,i),e+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=t[e+n];this.leftover+=r}};var p=crypto_secretbox,d=crypto_secretbox_open;var g=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function crypto_hashblocks_hl(t,e,r,n){for(var i,s,o,a,c,u,h,l,f,p,d,y,v,m,b,S,x,w,E,_,F,A,C,T,P,I,R=new Int32Array(16),O=new Int32Array(16),B=t[0],k=t[1],D=t[2],H=t[3],N=t[4],j=t[5],L=t[6],M=t[7],U=e[0],q=e[1],V=e[2],K=e[3],z=e[4],G=e[5],W=e[6],J=e[7],Y=0;n>=128;){for(E=0;E<16;E++)_=8*E+Y,R[E]=r[_+0]<<24|r[_+1]<<16|r[_+2]<<8|r[_+3],O[E]=r[_+4]<<24|r[_+5]<<16|r[_+6]<<8|r[_+7];for(E=0;E<80;E++)if(i=B,s=k,o=D,a=H,c=N,u=j,h=L,M,f=U,p=q,d=V,y=K,v=z,m=G,b=W,J,C=65535&(A=J),T=A>>>16,P=65535&(F=M),I=F>>>16,C+=65535&(A=(z>>>14|N<<18)^(z>>>18|N<<14)^(N>>>9|z<<23)),T+=A>>>16,P+=65535&(F=(N>>>14|z<<18)^(N>>>18|z<<14)^(z>>>9|N<<23)),I+=F>>>16,C+=65535&(A=z&G^~z&W),T+=A>>>16,P+=65535&(F=N&j^~N&L),I+=F>>>16,F=g[2*E],C+=65535&(A=g[2*E+1]),T+=A>>>16,P+=65535&F,I+=F>>>16,F=R[E%16],T+=(A=O[E%16])>>>16,P+=65535&F,I+=F>>>16,P+=(T+=(C+=65535&A)>>>16)>>>16,C=65535&(A=w=65535&C|T<<16),T=A>>>16,P=65535&(F=x=65535&P|(I+=P>>>16)<<16),I=F>>>16,C+=65535&(A=(U>>>28|B<<4)^(B>>>2|U<<30)^(B>>>7|U<<25)),T+=A>>>16,P+=65535&(F=(B>>>28|U<<4)^(U>>>2|B<<30)^(U>>>7|B<<25)),I+=F>>>16,T+=(A=U&q^U&V^q&V)>>>16,P+=65535&(F=B&k^B&D^k&D),I+=F>>>16,l=65535&(P+=(T+=(C+=65535&A)>>>16)>>>16)|(I+=P>>>16)<<16,S=65535&C|T<<16,C=65535&(A=y),T=A>>>16,P=65535&(F=a),I=F>>>16,T+=(A=w)>>>16,P+=65535&(F=x),I+=F>>>16,k=i,D=s,H=o,N=a=65535&(P+=(T+=(C+=65535&A)>>>16)>>>16)|(I+=P>>>16)<<16,j=c,L=u,M=h,B=l,q=f,V=p,K=d,z=y=65535&C|T<<16,G=v,W=m,J=b,U=S,E%16==15)for(_=0;_<16;_++)F=R[_],C=65535&(A=O[_]),T=A>>>16,P=65535&F,I=F>>>16,F=R[(_+9)%16],C+=65535&(A=O[(_+9)%16]),T+=A>>>16,P+=65535&F,I+=F>>>16,x=R[(_+1)%16],C+=65535&(A=((w=O[(_+1)%16])>>>1|x<<31)^(w>>>8|x<<24)^(w>>>7|x<<25)),T+=A>>>16,P+=65535&(F=(x>>>1|w<<31)^(x>>>8|w<<24)^x>>>7),I+=F>>>16,x=R[(_+14)%16],T+=(A=((w=O[(_+14)%16])>>>19|x<<13)^(x>>>29|w<<3)^(w>>>6|x<<26))>>>16,P+=65535&(F=(x>>>19|w<<13)^(w>>>29|x<<3)^x>>>6),I+=F>>>16,I+=(P+=(T+=(C+=65535&A)>>>16)>>>16)>>>16,R[_]=65535&P|I<<16,O[_]=65535&C|T<<16;C=65535&(A=U),T=A>>>16,P=65535&(F=B),I=F>>>16,F=t[0],T+=(A=e[0])>>>16,P+=65535&F,I+=F>>>16,I+=(P+=(T+=(C+=65535&A)>>>16)>>>16)>>>16,t[0]=B=65535&P|I<<16,e[0]=U=65535&C|T<<16,C=65535&(A=q),T=A>>>16,P=65535&(F=k),I=F>>>16,F=t[1],T+=(A=e[1])>>>16,P+=65535&F,I+=F>>>16,I+=(P+=(T+=(C+=65535&A)>>>16)>>>16)>>>16,t[1]=k=65535&P|I<<16,e[1]=q=65535&C|T<<16,C=65535&(A=V),T=A>>>16,P=65535&(F=D),I=F>>>16,F=t[2],T+=(A=e[2])>>>16,P+=65535&F,I+=F>>>16,I+=(P+=(T+=(C+=65535&A)>>>16)>>>16)>>>16,t[2]=D=65535&P|I<<16,e[2]=V=65535&C|T<<16,C=65535&(A=K),T=A>>>16,P=65535&(F=H),I=F>>>16,F=t[3],T+=(A=e[3])>>>16,P+=65535&F,I+=F>>>16,I+=(P+=(T+=(C+=65535&A)>>>16)>>>16)>>>16,t[3]=H=65535&P|I<<16,e[3]=K=65535&C|T<<16,C=65535&(A=z),T=A>>>16,P=65535&(F=N),I=F>>>16,F=t[4],T+=(A=e[4])>>>16,P+=65535&F,I+=F>>>16,I+=(P+=(T+=(C+=65535&A)>>>16)>>>16)>>>16,t[4]=N=65535&P|I<<16,e[4]=z=65535&C|T<<16,C=65535&(A=G),T=A>>>16,P=65535&(F=j),I=F>>>16,F=t[5],T+=(A=e[5])>>>16,P+=65535&F,I+=F>>>16,I+=(P+=(T+=(C+=65535&A)>>>16)>>>16)>>>16,t[5]=j=65535&P|I<<16,e[5]=G=65535&C|T<<16,C=65535&(A=W),T=A>>>16,P=65535&(F=L),I=F>>>16,F=t[6],T+=(A=e[6])>>>16,P+=65535&F,I+=F>>>16,I+=(P+=(T+=(C+=65535&A)>>>16)>>>16)>>>16,t[6]=L=65535&P|I<<16,e[6]=W=65535&C|T<<16,C=65535&(A=J),T=A>>>16,P=65535&(F=M),I=F>>>16,F=t[7],T+=(A=e[7])>>>16,P+=65535&F,I+=F>>>16,I+=(P+=(T+=(C+=65535&A)>>>16)>>>16)>>>16,t[7]=M=65535&P|I<<16,e[7]=J=65535&C|T<<16,Y+=128,n-=128}return n}function crypto_hash(t,e,r){var n,i=new Int32Array(8),s=new Int32Array(8),o=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,crypto_hashblocks_hl(i,s,e,r),r%=128,n=0;n<r;n++)o[n]=e[a-r+n];for(o[r]=128,o[(r=256-128*(r<112?1:0))-9]=0,ts64(o,r-8,a/536870912|0,a<<3),crypto_hashblocks_hl(i,s,o,r),n=0;n<8;n++)ts64(t,8*n,i[n],s[n]);return 0}function add(t,e){var r=gf(),n=gf(),i=gf(),s=gf(),o=gf(),a=gf(),u=gf(),h=gf(),l=gf();Z(r,t[1],t[0]),Z(l,e[1],e[0]),M(r,r,l),A(n,t[0],t[1]),A(l,e[0],e[1]),M(n,n,l),M(i,t[3],e[3]),M(i,i,c),M(s,t[2],e[2]),A(s,s,s),Z(o,n,r),Z(a,s,i),A(u,s,i),A(h,n,r),M(t[0],o,a),M(t[1],h,u),M(t[2],u,a),M(t[3],o,h)}function cswap(t,e,r){var n;for(n=0;n<4;n++)sel25519(t[n],e[n],r)}function pack(t,e){var r=gf(),n=gf(),i=gf();inv25519(i,e[2]),M(r,e[0],i),M(n,e[1],i),pack25519(t,n),t[31]^=par25519(r)<<7}function scalarmult(t,e,r){var n,o;for(set25519(t[0],i),set25519(t[1],s),set25519(t[2],s),set25519(t[3],i),o=255;o>=0;--o)cswap(t,e,n=r[o/8|0]>>(7&o)&1),add(e,t),add(t,t),cswap(t,e,n)}function scalarbase(t,e){var r=[gf(),gf(),gf(),gf()];set25519(r[0],u),set25519(r[1],h),set25519(r[2],s),M(r[3],u,h),scalarmult(t,r,e)}function crypto_sign_keypair(t,e,r){var n,i=new Uint8Array(64),s=[gf(),gf(),gf(),gf()];for(r||randombytes(e,32),crypto_hash(i,e,32),i[0]&=248,i[31]&=127,i[31]|=64,scalarbase(s,i),pack(t,s),n=0;n<32;n++)e[n+32]=t[n];return 0}var y=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(t,e){var r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)e[i]+=r-16*e[n]*y[i-(n-32)],r=e[i]+128>>8,e[i]-=256*r;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;i++)e[i]+=r-(e[31]>>4)*y[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;i++)e[i]-=r*y[i];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function reduce(t){var e,r=new Float64Array(64);for(e=0;e<64;e++)r[e]=t[e];for(e=0;e<64;e++)t[e]=0;modL(t,r)}function crypto_sign(t,e,r,n){var i,s,o=new Uint8Array(64),a=new Uint8Array(64),c=new Uint8Array(64),u=new Float64Array(64),h=[gf(),gf(),gf(),gf()];crypto_hash(o,n,32),o[0]&=248,o[31]&=127,o[31]|=64;var l=r+64;for(i=0;i<r;i++)t[64+i]=e[i];for(i=0;i<32;i++)t[32+i]=o[32+i];for(crypto_hash(c,t.subarray(32),r+32),reduce(c),scalarbase(h,c),pack(t,h),i=32;i<64;i++)t[i]=n[i];for(crypto_hash(a,t,r+64),reduce(a),i=0;i<64;i++)u[i]=0;for(i=0;i<32;i++)u[i]=c[i];for(i=0;i<32;i++)for(s=0;s<32;s++)u[i+s]+=a[i]*o[s];return modL(t.subarray(32),u),l}function unpackneg(t,e){var r=gf(),n=gf(),o=gf(),c=gf(),u=gf(),h=gf(),f=gf();return set25519(t[2],s),unpack25519(t[1],e),S(o,t[1]),M(c,o,a),Z(o,o,t[2]),A(c,t[2],c),S(u,c),S(h,u),M(f,h,u),M(r,f,o),M(r,r,c),function pow2523(t,e){var r,n=gf();for(r=0;r<16;r++)n[r]=e[r];for(r=250;r>=0;r--)S(n,n),1!==r&&M(n,n,e);for(r=0;r<16;r++)t[r]=n[r]}(r,r),M(r,r,o),M(r,r,c),M(r,r,c),M(t[0],r,c),S(n,t[0]),M(n,n,c),neq25519(n,o)&&M(t[0],t[0],l),S(n,t[0]),M(n,n,c),neq25519(n,o)?-1:(par25519(t[0])===e[31]>>7&&Z(t[0],i,t[0]),M(t[3],t[0],t[1]),0)}function crypto_sign_open(t,e,r,n){var i,s=new Uint8Array(32),o=new Uint8Array(64),a=[gf(),gf(),gf(),gf()],c=[gf(),gf(),gf(),gf()];if(-1,r<64)return-1;if(unpackneg(c,n))return-1;for(i=0;i<r;i++)t[i]=e[i];for(i=0;i<32;i++)t[i+32]=n[i];if(crypto_hash(o,t,r),reduce(o),scalarmult(a,c,o),scalarbase(c,e.subarray(32)),add(a,c),pack(s,a),r-=64,crypto_verify_32(e,0,s,0)){for(i=0;i<r;i++)t[i]=0;return-1}for(i=0;i<r;i++)t[i]=e[i+64];return r}var v=32,m=24,b=32,x=32,w=m;function checkLengths(t,e){if(t.length!==v)throw new Error("bad key size");if(e.length!==m)throw new Error("bad nonce size")}function checkArrayTypes(){for(var t=0;t<arguments.length;t++)if(!(arguments[t]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function cleanup(t){for(var e=0;e<t.length;e++)t[e]=0}t.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:p,crypto_box:function crypto_box(t,e,r,n,i,s){var o=new Uint8Array(32);return crypto_box_beforenm(o,i,s),p(t,e,r,n,o)},crypto_box_open:function crypto_box_open(t,e,r,n,i,s){var o=new Uint8Array(32);return crypto_box_beforenm(o,i,s),d(t,e,r,n,o)},crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:v,crypto_secretbox_NONCEBYTES:m,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:b,crypto_box_SECRETKEYBYTES:x,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:w,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},t.randomBytes=function(t){var e=new Uint8Array(t);return randombytes(e,t),e},t.secretbox=function(t,e,r){checkArrayTypes(t,e,r),checkLengths(r,e);for(var n=new Uint8Array(32+t.length),i=new Uint8Array(n.length),s=0;s<t.length;s++)n[s+32]=t[s];return crypto_secretbox(i,n,n.length,e,r),i.subarray(16)},t.secretbox.open=function(t,e,r){checkArrayTypes(t,e,r),checkLengths(r,e);for(var n=new Uint8Array(16+t.length),i=new Uint8Array(n.length),s=0;s<t.length;s++)n[s+16]=t[s];return n.length<32?null:0!==crypto_secretbox_open(i,n,n.length,e,r)?null:i.subarray(32)},t.secretbox.keyLength=v,t.secretbox.nonceLength=m,t.secretbox.overheadLength=16,t.scalarMult=function(t,e){if(checkArrayTypes(t,e),32!==t.length)throw new Error("bad n size");if(32!==e.length)throw new Error("bad p size");var r=new Uint8Array(32);return crypto_scalarmult(r,t,e),r},t.scalarMult.base=function(t){if(checkArrayTypes(t),32!==t.length)throw new Error("bad n size");var e=new Uint8Array(32);return crypto_scalarmult_base(e,t),e},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,r,n,i){var s=t.box.before(n,i);return t.secretbox(e,r,s)},t.box.before=function(t,e){checkArrayTypes(t,e),function checkBoxLengths(t,e){if(t.length!==b)throw new Error("bad public key size");if(e.length!==x)throw new Error("bad secret key size")}(t,e);var r=new Uint8Array(32);return crypto_box_beforenm(r,t,e),r},t.box.after=t.secretbox,t.box.open=function(e,r,n,i){var s=t.box.before(n,i);return t.secretbox.open(e,r,s)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var t=new Uint8Array(b),e=new Uint8Array(x);return crypto_box_keypair(t,e),{publicKey:t,secretKey:e}},t.box.keyPair.fromSecretKey=function(t){if(checkArrayTypes(t),t.length!==x)throw new Error("bad secret key size");var e=new Uint8Array(b);return crypto_scalarmult_base(e,t),{publicKey:e,secretKey:new Uint8Array(t)}},t.box.publicKeyLength=b,t.box.secretKeyLength=x,t.box.sharedKeyLength=32,t.box.nonceLength=w,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(t,e){if(checkArrayTypes(t,e),64!==e.length)throw new Error("bad secret key size");var r=new Uint8Array(64+t.length);return crypto_sign(r,t,t.length,e),r},t.sign.open=function(t,e){if(checkArrayTypes(t,e),32!==e.length)throw new Error("bad public key size");var r=new Uint8Array(t.length),n=crypto_sign_open(r,t,t.length,e);if(n<0)return null;for(var i=new Uint8Array(n),s=0;s<i.length;s++)i[s]=r[s];return i},t.sign.detached=function(e,r){for(var n=t.sign(e,r),i=new Uint8Array(64),s=0;s<i.length;s++)i[s]=n[s];return i},t.sign.detached.verify=function(t,e,r){if(checkArrayTypes(t,e,r),64!==e.length)throw new Error("bad signature size");if(32!==r.length)throw new Error("bad public key size");var n,i=new Uint8Array(64+t.length),s=new Uint8Array(64+t.length);for(n=0;n<64;n++)i[n]=e[n];for(n=0;n<t.length;n++)i[n+64]=t[n];return crypto_sign_open(s,i,i.length,r)>=0},t.sign.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(64);return crypto_sign_keypair(t,e),{publicKey:t,secretKey:e}},t.sign.keyPair.fromSecretKey=function(t){if(checkArrayTypes(t),64!==t.length)throw new Error("bad secret key size");for(var e=new Uint8Array(32),r=0;r<e.length;r++)e[r]=t[32+r];return{publicKey:e,secretKey:new Uint8Array(t)}},t.sign.keyPair.fromSeed=function(t){if(checkArrayTypes(t),32!==t.length)throw new Error("bad seed size");for(var e=new Uint8Array(32),r=new Uint8Array(64),n=0;n<32;n++)r[n]=t[n];return crypto_sign_keypair(e,r,!0),{publicKey:e,secretKey:r}},t.sign.publicKeyLength=32,t.sign.secretKeyLength=64,t.sign.seedLength=32,t.sign.signatureLength=64,t.hash=function(t){checkArrayTypes(t);var e=new Uint8Array(64);return crypto_hash(e,t,t.length),e},t.hash.hashLength=64,t.verify=function(t,e){return checkArrayTypes(t,e),0!==t.length&&0!==e.length&&(t.length===e.length&&0===vn(t,0,e,0,t.length))},t.setPRNG=function(t){randombytes=t},function(){var e="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(e&&e.getRandomValues){t.setPRNG((function(t,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)e.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)t[n]=i[n];cleanup(i)}))}else(e=r(5))&&e.randomBytes&&t.setPRNG((function(t,r){var n,i=e.randomBytes(r);for(n=0;n<r;n++)t[n]=i[n];cleanup(i)}))}()}(t.exports?t.exports:self.nacl=self.nacl||{})},function(t,e,r){!function(e,r){"use strict";t.exports?t.exports=r():e.nacl?e.nacl.util=r():(e.nacl={},e.nacl.util=r())}(this,(function(){"use strict";var t={};function validateBase64(t){if(!/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t))throw new TypeError("invalid encoding")}return t.decodeUTF8=function(t){if("string"!=typeof t)throw new TypeError("expected string");var e,r=unescape(encodeURIComponent(t)),n=new Uint8Array(r.length);for(e=0;e<r.length;e++)n[e]=r.charCodeAt(e);return n},t.encodeUTF8=function(t){var e,r=[];for(e=0;e<t.length;e++)r.push(String.fromCharCode(t[e]));return decodeURIComponent(escape(r.join("")))},"undefined"==typeof atob?void 0!==Buffer.from?(t.encodeBase64=function(t){return Buffer.from(t).toString("base64")},t.decodeBase64=function(t){return validateBase64(t),new Uint8Array(Array.prototype.slice.call(Buffer.from(t,"base64"),0))}):(t.encodeBase64=function(t){return new Buffer(t).toString("base64")},t.decodeBase64=function(t){return validateBase64(t),new Uint8Array(Array.prototype.slice.call(new Buffer(t,"base64"),0))}):(t.encodeBase64=function(t){var e,r=[],n=t.length;for(e=0;e<n;e++)r.push(String.fromCharCode(t[e]));return btoa(r.join(""))},t.decodeBase64=function(t){validateBase64(t);var e,r=atob(t),n=new Uint8Array(r.length);for(e=0;e<r.length;e++)n[e]=r.charCodeAt(e);return n}),t}))},function(t,e){t.exports=r(28)},function(t,e,r){"use strict";var n=r(2),i=r(25),s=r(36),o={client:function(t,e){return void 0===(e=e||{}).masking&&(e.masking=!0),new i(t,e)},server:function(t){return void 0===(t=t||{}).requireMasking&&(t.requireMasking=!0),new s(t)},http:function(){return s.http.apply(s,arguments)},isSecureRequest:function(t){return s.isSecureRequest(t)},isWebSocket:function(t){return n.isWebSocket(t)},validateOptions:function(t,e){n.validateOptions(t,e)}};t.exports=o},function(t,e){t.exports=r(20)},function(t,e){t.exports=r(13)},function(t,e){var Event=function(t,e){for(var r in this.type=t,e)this[r]=e[r]};Event.prototype.initEvent=function(t,e,r){this.type=t,this.bubbles=e,this.cancelable=r},Event.prototype.stopPropagation=function(){},Event.prototype.preventDefault=function(){},Event.CAPTURING_PHASE=1,Event.AT_TARGET=2,Event.BUBBLING_PHASE=3,t.exports=Event},function(t,e,r){"use strict";var Headers=function(){this.clear()};Headers.prototype.ALLOWED_DUPLICATES=["set-cookie","set-cookie2","warning","www-authenticate"],Headers.prototype.clear=function(){this._sent={},this._lines=[]},Headers.prototype.set=function(t,e){if(void 0!==e){t=this._strip(t),e=this._strip(e);var r=t.toLowerCase();(!this._sent.hasOwnProperty(r)||this.ALLOWED_DUPLICATES.indexOf(r)>=0)&&(this._sent[r]=!0,this._lines.push(t+": "+e+"\r\n"))}},Headers.prototype.toString=function(){return this._lines.join("")},Headers.prototype._strip=function(t){return t.toString().replace(/^ */,"").replace(/ *$/,"")},t.exports=Headers},function(t,e,r){"use strict";var n=r(26).HTTPParser,i=r(1).Buffer,s={request:n.REQUEST||"request",response:n.RESPONSE||"response"},HttpParser=function(t){this._type=t,this._parser=new n(s[t]),this._complete=!1,this.headers={};var e=null,r=this;this._parser.onHeaderField=function(t,r,n){e=t.toString("utf8",r,r+n).toLowerCase()},this._parser.onHeaderValue=function(t,n,i){var s=t.toString("utf8",n,n+i);r.headers.hasOwnProperty(e)?r.headers[e]+=", "+s:r.headers[e]=s},this._parser.onHeadersComplete=this._parser[n.kOnHeadersComplete]=function(t,e,n,i,s,o){var a=arguments[0];if("object"==typeof a&&(i=a.method,s=a.url,o=a.statusCode,n=a.headers),r.method="number"==typeof i?HttpParser.METHODS[i]:i,r.statusCode=o,r.url=s,n){for(var c,u,h=0,l=n.length;h<l;h+=2)c=n[h].toLowerCase(),u=n[h+1],r.headers.hasOwnProperty(c)?r.headers[c]+=", "+u:r.headers[c]=u;r._complete=!0}}};HttpParser.METHODS={0:"DELETE",1:"GET",2:"HEAD",3:"POST",4:"PUT",5:"CONNECT",6:"OPTIONS",7:"TRACE",8:"COPY",9:"LOCK",10:"MKCOL",11:"MOVE",12:"PROPFIND",13:"PROPPATCH",14:"SEARCH",15:"UNLOCK",16:"BIND",17:"REBIND",18:"UNBIND",19:"ACL",20:"REPORT",21:"MKACTIVITY",22:"CHECKOUT",23:"MERGE",24:"M-SEARCH",25:"NOTIFY",26:"SUBSCRIBE",27:"UNSUBSCRIBE",28:"PATCH",29:"PURGE",30:"MKCALENDAR",31:"LINK",32:"UNLINK"};var o=(process.version||"").match(/[0-9]+/g).map((function(t){return parseInt(t,10)}));0===o[0]&&12===o[1]&&(HttpParser.METHODS[16]="REPORT",HttpParser.METHODS[17]="MKACTIVITY",HttpParser.METHODS[18]="CHECKOUT",HttpParser.METHODS[19]="MERGE",HttpParser.METHODS[20]="M-SEARCH",HttpParser.METHODS[21]="NOTIFY",HttpParser.METHODS[22]="SUBSCRIBE",HttpParser.METHODS[23]="UNSUBSCRIBE",HttpParser.METHODS[24]="PATCH",HttpParser.METHODS[25]="PURGE"),HttpParser.prototype.isComplete=function(){return this._complete},HttpParser.prototype.parse=function(t){var e=this._parser.execute(t,0,t.length);if("number"!=typeof e)return this.error=e,void(this._complete=!0);this._complete&&(this.body=e<t.length?t.slice(e):i.alloc(0))},t.exports=HttpParser},function(t,e,r){var n=r(7).Stream,i=r(0),s=r(6),o=r(17),a=r(9),API=function(t){t=t||{},s.validateOptions(t,["headers","extensions","maxLength","ping","proxy","tls","ca"]),this.readable=this.writable=!0;var e=t.headers;if(e)for(var r in e)this._driver.setHeader(r,e[r]);var n=t.extensions;n&&[].concat(n).forEach(this._driver.addExtension,this._driver),this._ping=t.ping,this._pingId=0,this.readyState=API.CONNECTING,this.bufferedAmount=0,this.protocol="",this.url=this._driver.url,this.version=this._driver.version;var i=this;this._driver.on("open",(function(t){i._open()})),this._driver.on("message",(function(t){i._receiveMessage(t.data)})),this._driver.on("close",(function(t){i._beginClose(t.reason,t.code)})),this._driver.on("error",(function(t){i._emitError(t.message)})),this.on("error",(function(){})),this._driver.messages.on("drain",(function(){i.emit("drain")})),this._ping&&(this._pingTimer=setInterval((function(){i._pingId+=1,i.ping(i._pingId.toString())}),1e3*this._ping)),this._configureStream(),this._proxy||(this._stream.pipe(this._driver.io),this._driver.io.pipe(this._stream))};i.inherits(API,n),API.CONNECTING=0,API.OPEN=1,API.CLOSING=2,API.CLOSED=3;var c={write:function(t){return this.send(t)},end:function(t){void 0!==t&&this.send(t),this.close()},pause:function(){return this._driver.messages.pause()},resume:function(){return this._driver.messages.resume()},send:function(t){return!(this.readyState>API.OPEN)&&(t instanceof Buffer||(t=String(t)),this._driver.messages.write(t))},ping:function(t,e){return!(this.readyState>API.OPEN)&&this._driver.ping(t,e)},close:function(){this.readyState!==API.CLOSED&&(this.readyState=API.CLOSING),this._driver.close()},_configureStream:function(){var t=this;this._stream.setTimeout(0),this._stream.setNoDelay(!0),["close","end"].forEach((function(e){this._stream.on(e,(function(){t._finalizeClose()}))}),this),this._stream.on("error",(function(e){t._emitError("Network error: "+t.url+": "+e.message),t._finalizeClose()}))},_open:function(){if(this.readyState===API.CONNECTING){this.readyState=API.OPEN,this.protocol=this._driver.protocol||"";var t=new a("open");t.initEvent("open",!1,!1),this.dispatchEvent(t)}},_receiveMessage:function(t){if(this.readyState>API.OPEN)return!1;this.readable&&this.emit("data",t);var e=new a("message",{data:t});e.initEvent("message",!1,!1),this.dispatchEvent(e)},_emitError:function(t){if(!(this.readyState>=API.CLOSING)){var e=new a("error",{message:t});e.initEvent("error",!1,!1),this.dispatchEvent(e)}},_beginClose:function(t,e){this.readyState!==API.CLOSED&&(this.readyState=API.CLOSING,this._stream&&(this._stream.end(),this._stream.readable||this._finalizeClose()),this._closeParams=[t,e])},_finalizeClose:function(){if(this.readyState!==API.CLOSED){this.readyState=API.CLOSED,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end(),this.readable&&this.emit("end"),this.readable=this.writable=!1;var t=this._closeParams?this._closeParams[0]:"",e=this._closeParams?this._closeParams[1]:1006,r=new a("close",{code:e,reason:t});r.initEvent("close",!1,!1),this.dispatchEvent(r)}}};for(var u in c)API.prototype[u]=c[u];for(var h in o)API.prototype[h]=o[h];t.exports=API},function(t,e,r){"use strict";var n=r(1).Buffer,i=r(5),s=r(0),o=r(28),a=r(2),c=r(33),u=r(34),Hybi=function(t,e,r){if(a.apply(this,arguments),this._extensions=new o,this._stage=0,this._masking=this._options.masking,this._protocols=this._options.protocols||[],this._requireMasking=this._options.requireMasking,this._pingCallbacks={},"string"==typeof this._protocols&&(this._protocols=this._protocols.split(/ *, */)),this._request){var n=this._request.headers["sec-websocket-protocol"],i=this._protocols;void 0!==n&&("string"==typeof n&&(n=n.split(/ *, */)),this.protocol=n.filter((function(t){return i.indexOf(t)>=0}))[0]),this.version="hybi-"+Hybi.VERSION}};s.inherits(Hybi,a),Hybi.VERSION="13",Hybi.mask=function(t,e,r){if(!e||0===e.length)return t;r=r||0;for(var n=0,i=t.length-r;n<i;n++)t[r+n]=t[r+n]^e[n%4];return t},Hybi.generateAccept=function(t){var e=i.createHash("sha1");return e.update(t+Hybi.GUID),e.digest("base64")},Hybi.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";var h={FIN:128,MASK:128,RSV1:64,RSV2:32,RSV3:16,OPCODE:15,LENGTH:127,OPCODES:{continuation:0,text:1,binary:2,close:8,ping:9,pong:10},OPCODE_CODES:[0,1,2,8,9,10],MESSAGE_OPCODES:[0,1,2],OPENING_OPCODES:[1,2],ERRORS:{normal_closure:1e3,going_away:1001,protocol_error:1002,unacceptable:1003,encoding_error:1007,policy_violation:1008,too_large:1009,extension_error:1010,unexpected_condition:1011},ERROR_CODES:[1e3,1001,1002,1003,1007,1008,1009,1010,1011],DEFAULT_ERROR_CODE:1e3,MIN_RESERVED_ERROR:3e3,MAX_RESERVED_ERROR:4999,UTF8_MATCH:/^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/,addExtension:function(t){return this._extensions.add(t),!0},parse:function(t){this._reader.put(t);for(var e=!0;e;)switch(this._stage){case 0:(e=this._reader.read(1))&&this._parseOpcode(e[0]);break;case 1:(e=this._reader.read(1))&&this._parseLength(e[0]);break;case 2:(e=this._reader.read(this._frame.lengthBytes))&&this._parseExtendedLength(e);break;case 3:(e=this._reader.read(4))&&(this._stage=4,this._frame.maskingKey=e);break;case 4:(e=this._reader.read(this._frame.length))&&(this._stage=0,this._emitFrame(e));break;default:e=null}},text:function(t){return!(this.readyState>1)&&this.frame(t,"text")},binary:function(t){return!(this.readyState>1)&&this.frame(t,"binary")},ping:function(t,e){return!(this.readyState>1)&&(t=t||"",e&&(this._pingCallbacks[t]=e),this.frame(t,"ping"))},pong:function(t){return!(this.readyState>1)&&(t=t||"",this.frame(t,"pong"))},close:function(t,e){return t=t||"",e=e||this.ERRORS.normal_closure,this.readyState<=0?(this.readyState=3,this.emit("close",new a.CloseEvent(e,t)),!0):1===this.readyState&&(this.readyState=2,this._extensions.close((function(){this.frame(t,"close",e)}),this),!0)},frame:function(t,e,r){if(this.readyState<=0)return this._queue([t,e,r]);if(this.readyState>2)return!1;t instanceof Array&&(t=n.from(t)),"number"==typeof t&&(t=t.toString());var s,o,a=new u,h="string"==typeof t;a.rsv1=a.rsv2=a.rsv3=!1,a.opcode=this.OPCODES[e||(h?"text":"binary")],s=h?n.from(t,"utf8"):t,r&&(o=s,(s=n.allocUnsafe(2+o.length)).writeUInt16BE(r,0),o.copy(s,2)),a.data=s;var onMessageReady=function(t){var e=new c;e.final=!0,e.rsv1=t.rsv1,e.rsv2=t.rsv2,e.rsv3=t.rsv3,e.opcode=t.opcode,e.masked=!!this._masking,e.length=t.data.length,e.payload=t.data,e.masked&&(e.maskingKey=i.randomBytes(4)),this._sendFrame(e)};return this.MESSAGE_OPCODES.indexOf(a.opcode)>=0?this._extensions.processOutgoingMessage(a,(function(t,e){if(t)return this._fail("extension_error",t.message);onMessageReady.call(this,e)}),this):onMessageReady.call(this,a),!0},_sendFrame:function(t){var e=t.length,r=e<=125?2:e<=65535?4:10,i=r+(t.masked?4:0),s=n.allocUnsafe(i+e),o=t.masked?this.MASK:0;s[0]=(t.final?this.FIN:0)|(t.rsv1?this.RSV1:0)|(t.rsv2?this.RSV2:0)|(t.rsv3?this.RSV3:0)|t.opcode,e<=125?s[1]=o|e:e<=65535?(s[1]=126|o,s.writeUInt16BE(e,2)):(s[1]=127|o,s.writeUInt32BE(Math.floor(e/4294967296),2),s.writeUInt32BE(e%4294967296,6)),t.payload.copy(s,i),t.masked&&(t.maskingKey.copy(s,r),Hybi.mask(s,t.maskingKey,i)),this._write(s)},_handshakeResponse:function(){var t=this._request.headers["sec-websocket-key"],e=this._request.headers["sec-websocket-version"];if(e!==Hybi.VERSION)throw new Error("Unsupported WebSocket version: "+e);if("string"!=typeof t)throw new Error("Missing handshake request header: Sec-WebSocket-Key");this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Accept",Hybi.generateAccept(t)),this.protocol&&this._headers.set("Sec-WebSocket-Protocol",this.protocol);var r=this._extensions.generateResponse(this._request.headers["sec-websocket-extensions"]);r&&this._headers.set("Sec-WebSocket-Extensions",r);var i=["HTTP/1.1 101 Switching Protocols",this._headers.toString(),""];return n.from(i.join("\r\n"),"utf8")},_shutdown:function(t,e,r){delete this._frame,delete this._message,this._stage=5;var n=1===this.readyState;this.readyState=2,this._extensions.close((function(){n&&this.frame(e,"close",t),this.readyState=3,r&&this.emit("error",new Error(e)),this.emit("close",new a.CloseEvent(t,e))}),this)},_fail:function(t,e){this.readyState>1||this._shutdown(this.ERRORS[t],e,!0)},_parseOpcode:function(t){var e=[this.RSV1,this.RSV2,this.RSV3].map((function(e){return(t&e)===e})),r=this._frame=new c;return r.final=(t&this.FIN)===this.FIN,r.rsv1=e[0],r.rsv2=e[1],r.rsv3=e[2],r.opcode=t&this.OPCODE,this._stage=1,this._extensions.validFrameRsv(r)?this.OPCODE_CODES.indexOf(r.opcode)<0?this._fail("protocol_error","Unrecognized frame opcode: "+r.opcode):this.MESSAGE_OPCODES.indexOf(r.opcode)<0&&!r.final?this._fail("protocol_error","Received fragmented control frame: opcode = "+r.opcode):this._message&&this.OPENING_OPCODES.indexOf(r.opcode)>=0?this._fail("protocol_error","Received new data frame but previous continuous frame is unfinished"):void 0:this._fail("protocol_error","One or more reserved bits are on: reserved1 = "+(r.rsv1?1:0)+", reserved2 = "+(r.rsv2?1:0)+", reserved3 = "+(r.rsv3?1:0))},_parseLength:function(t){var e=this._frame;if(e.masked=(t&this.MASK)===this.MASK,e.length=t&this.LENGTH,e.length>=0&&e.length<=125){if(this._stage=e.masked?3:4,!this._checkFrameLength())return}else this._stage=2,e.lengthBytes=126===e.length?2:8;if(this._requireMasking&&!e.masked)return this._fail("unacceptable","Received unmasked frame but masking is required")},_parseExtendedLength:function(t){var e=this._frame;if(e.length=this._readUInt(t),this._stage=e.masked?3:4,this.MESSAGE_OPCODES.indexOf(e.opcode)<0&&e.length>125)return this._fail("protocol_error","Received control frame having too long payload: "+e.length);this._checkFrameLength()},_checkFrameLength:function(){return!((this._message?this._message.length:0)+this._frame.length>this._maxLength)||(this._fail("too_large","WebSocket frame length too large"),!1)},_emitFrame:function(t){var e,r,n,i,s,o=this._frame,c=o.payload=Hybi.mask(t,o.maskingKey),h=o.opcode;if(delete this._frame,h===this.OPCODES.continuation){if(!this._message)return this._fail("protocol_error","Received unexpected continuation frame");this._message.pushFrame(o)}if(h!==this.OPCODES.text&&h!==this.OPCODES.binary||(this._message=new u,this._message.pushFrame(o)),o.final&&this.MESSAGE_OPCODES.indexOf(h)>=0)return this._emitMessage(this._message);h===this.OPCODES.close&&(r=c.length>=2?c.readUInt16BE(0):null,n=c.length>2?this._encode(c.slice(2)):null,0!==c.length&&!(null!==r&&r>=this.MIN_RESERVED_ERROR&&r<=this.MAX_RESERVED_ERROR)&&this.ERROR_CODES.indexOf(r)<0&&(r=this.ERRORS.protocol_error),(c.length>125||c.length>2&&!n)&&(r=this.ERRORS.protocol_error),this._shutdown(r||this.DEFAULT_ERROR_CODE,n||"")),h===this.OPCODES.ping&&(this.frame(c,"pong"),this.emit("ping",new a.PingEvent(c.toString()))),h===this.OPCODES.pong&&(s=(i=this._pingCallbacks)[e=this._encode(c)],delete i[e],s&&s(),this.emit("pong",new a.PongEvent(c.toString())))},_emitMessage:function(t){(t=this._message).read(),delete this._message,this._extensions.processIncomingMessage(t,(function(t,e){if(t)return this._fail("extension_error",t.message);var r=e.data;if(e.opcode===this.OPCODES.text&&(r=this._encode(r)),null===r)return this._fail("encoding_error","Could not decode a text frame as UTF-8");this.emit("message",new a.MessageEvent(r))}),this)},_encode:function(t){try{var e=t.toString("binary",0,t.length);if(!this.UTF8_MATCH.test(e))return null}catch(t){}return t.toString("utf8",0,t.length)},_readUInt:function(t){return 2===t.length?t.readUInt16BE(0):4294967296*t.readUInt32BE(0)+t.readUInt32BE(4)}};for(var l in h)Hybi.prototype[l]=h[l];t.exports=Hybi},function(t,e,r){"use strict";var RingBuffer=function(t){this._bufferSize=t,this.clear()};RingBuffer.prototype.clear=function(){this._buffer=new Array(this._bufferSize),this._ringOffset=0,this._ringSize=this._bufferSize,this._head=0,this._tail=0,this.length=0},RingBuffer.prototype.push=function(t){var e=!1,r=!1;this._ringSize<this._bufferSize?e=0===this._tail:this._ringOffset===this._ringSize&&(e=!0,r=0===this._tail),e&&(this._tail=this._bufferSize,this._buffer=this._buffer.concat(new Array(this._bufferSize)),this._bufferSize=this._buffer.length,r&&(this._ringSize=this._bufferSize)),this._buffer[this._tail]=t,this.length+=1,this._tail<this._ringSize&&(this._ringOffset+=1),this._tail=(this._tail+1)%this._bufferSize},RingBuffer.prototype.peek=function(){if(0!==this.length)return this._buffer[this._head]},RingBuffer.prototype.shift=function(){if(0!==this.length){var t=this._buffer[this._head];return this._buffer[this._head]=void 0,this.length-=1,this._ringOffset-=1,0===this._ringOffset&&this.length>0?(this._head=this._ringSize,this._ringOffset=this.length,this._ringSize=this._bufferSize):this._head=(this._head+1)%this._ringSize,t}},t.exports=RingBuffer},function(t,e,r){"use strict";var n=r(14),Pledge=function(){this._complete=!1,this._callbacks=new n(Pledge.QUEUE_SIZE)};Pledge.QUEUE_SIZE=4,Pledge.all=function(t){var e=new Pledge,r=t.length,n=r;for(0===r&&e.done();n--;)t[n].then((function(){0===(r-=1)&&e.done()}));return e},Pledge.prototype.then=function(t){this._complete?t():this._callbacks.push(t)},Pledge.prototype.done=function(){this._complete=!0;for(var t,e=this._callbacks;t=e.shift();)t()},t.exports=Pledge},function(t,e,r){"use strict";var n=r(1).Buffer,i=r(2),Draft75=function(t,e,r){i.apply(this,arguments),this._stage=0,this.version="hixie-75",this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("WebSocket-Origin",this._request.headers.origin),this._headers.set("WebSocket-Location",this.url)};r(0).inherits(Draft75,i);var s={close:function(){return 3!==this.readyState&&(this.readyState=3,this.emit("close",new i.CloseEvent(null,null)),!0)},parse:function(t){this.readyState>1||(this._reader.put(t),this._reader.eachByte((function(t){var e;switch(this._stage){case-1:this._body.push(t),this._sendHandshakeBody();break;case 0:this._parseLeadingByte(t);break;case 1:if(this._length=(127&t)+128*this._length,this._closing&&0===this._length)return this.close();128!=(128&t)&&(0===this._length?this._stage=0:(this._skipped=0,this._stage=2));break;case 2:if(255===t)this._stage=0,e=n.from(this._buffer).toString("utf8",0,this._buffer.length),this.emit("message",new i.MessageEvent(e));else if(this._length)this._skipped+=1,this._skipped===this._length&&(this._stage=0);else if(this._buffer.push(t),this._buffer.length>this._maxLength)return this.close()}}),this))},frame:function(t){if(0===this.readyState)return this._queue([t]);if(this.readyState>1)return!1;"string"!=typeof t&&(t=t.toString());var e=n.byteLength(t),r=n.allocUnsafe(e+2);return r[0]=0,r.write(t,1),r[r.length-1]=255,this._write(r),!0},_handshakeResponse:function(){var t=["HTTP/1.1 101 Web Socket Protocol Handshake",this._headers.toString(),""];return n.from(t.join("\r\n"),"utf8")},_parseLeadingByte:function(t){128==(128&t)?(this._length=0,this._stage=1):(delete this._length,delete this._skipped,this._buffer=[],this._stage=2)}};for(var o in s)Draft75.prototype[o]=s[o];t.exports=Draft75},function(t,e,r){var n=r(9),i={onopen:null,onmessage:null,onerror:null,onclose:null,addEventListener:function(t,e,r){this.on(t,e)},removeEventListener:function(t,e,r){this.removeListener(t,e)},dispatchEvent:function(t){t.target=t.currentTarget=this,t.eventPhase=n.AT_TARGET,this["on"+t.type]&&this["on"+t.type](t),this.emit(t.type,t)}};t.exports=i},function(t,e,r){var n=r(0),i=r(6),s=r(12),WebSocket=function(t,e,r,n,o){o=o||{},this._stream=e,this._driver=i.http(t,{maxLength:o.maxLength,protocols:n});var a=this;if(this._stream&&this._stream.writable){if(!this._stream.readable)return this._stream.end();var catchup=function(){a._stream.removeListener("data",catchup)};this._stream.on("data",catchup),s.call(this,o),process.nextTick((function(){a._driver.start(),a._driver.io.write(r)}))}};n.inherits(WebSocket,s),WebSocket.isWebSocket=function(t){return i.isWebSocket(t)},WebSocket.validateOptions=function(t,e){i.validateOptions(t,e)},WebSocket.WebSocket=WebSocket,WebSocket.Client=r(38),WebSocket.EventSource=r(41),t.exports=WebSocket},function(t,e,r){
/**
 * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
 *
 * This can be used with JS designed for browsers to improve reuse of code and
 * allow the use of existing libraries.
 *
 * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
 *
 * @author Dan DeFelippi <dan@driverdan.com>
 * @contributor David Ellis <d.f.ellis@ieee.org>
 * @license MIT
 */
var n=r(8),i=r(42).spawn,s=r(43);e.XMLHttpRequest=function(){"use strict";var t,e,o=this,a=r(44),c=r(45),u={},h=!1,l={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},f={},p={},d=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],g=["TRACE","TRACK","CONNECT"],y=!1,v=!1,m={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1;this.open=function(t,e,r,n,i){if(this.abort(),v=!1,!function(t){return t&&-1===g.indexOf(t)}(t))throw new Error("SecurityError: Request method not allowed");u={method:t,url:e.toString(),async:"boolean"!=typeof r||r,user:n||null,password:i||null},setState(this.OPENED)},this.setDisableHeaderCheck=function(t){h=t},this.setRequestHeader=function(t,e){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(function(t){return h||t&&-1===d.indexOf(t.toLowerCase())}(t)){if(y)throw new Error("INVALID_STATE_ERR: send flag is true");t=p[t.toLowerCase()]||t,p[t.toLowerCase()]=t,f[t]=f[t]?f[t]+", "+e:e}else console.warn('Refused to set unsafe header "'+t+'"')},this.getResponseHeader=function(t){return"string"==typeof t&&this.readyState>this.OPENED&&e&&e.headers&&e.headers[t.toLowerCase()]&&!v?e.headers[t.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||v)return"";var t="";for(var r in e.headers)"set-cookie"!==r&&"set-cookie2"!==r&&(t+=r+": "+e.headers[r]+"\r\n");return t.substr(0,t.length-2)},this.getRequestHeader=function(t){return"string"==typeof t&&p[t.toLowerCase()]?f[p[t.toLowerCase()]]:""},this.send=function(r){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(y)throw new Error("INVALID_STATE_ERR: send has already been called");var h,d=!1,g=!1,m=n.parse(u.url);switch(m.protocol){case"https:":d=!0;case"http:":h=m.hostname;break;case"file:":g=!0;break;case void 0:case null:case"":h="localhost";break;default:throw new Error("Protocol not supported.")}if(g){if("GET"!==u.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(u.async)s.readFile(m.pathname,"utf8",(function(t,e){t?o.handleError(t):(o.status=200,o.responseText=e,setState(o.DONE))}));else try{this.responseText=s.readFileSync(m.pathname,"utf8"),this.status=200,setState(o.DONE)}catch(t){this.handleError(t)}}else{var b=m.port||(d?443:80),S=m.pathname+(m.search?m.search:"");for(var x in l)p[x.toLowerCase()]||(f[x]=l[x]);if(f.Host=h,d&&443===b||80===b||(f.Host+=":"+m.port),u.user){void 0===u.password&&(u.password="");var w=new Buffer(u.user+":"+u.password);f.Authorization="Basic "+w.toString("base64")}"GET"===u.method||"HEAD"===u.method?r=null:r?(f["Content-Length"]=Buffer.isBuffer(r)?r.length:Buffer.byteLength(r),f["Content-Type"]||(f["Content-Type"]="text/plain;charset=UTF-8")):"POST"===u.method&&(f["Content-Length"]=0);var E={host:h,port:b,path:S,method:u.method,headers:f,agent:!1,withCredentials:o.withCredentials};if(v=!1,u.async){var _=d?c.request:a.request;y=!0,o.dispatchEvent("readystatechange");var F=function errorHandler(t){o.handleError(t)};t=_(E,(function responseHandler(r){if(301!==(e=r).statusCode&&302!==e.statusCode&&303!==e.statusCode&&307!==e.statusCode)e.setEncoding("utf8"),setState(o.HEADERS_RECEIVED),o.status=e.statusCode,e.on("data",(function(t){t&&(o.responseText+=t),y&&setState(o.LOADING)})),e.on("end",(function(){y&&(setState(o.DONE),y=!1)})),e.on("error",(function(t){o.handleError(t)}));else{u.url=e.headers.location;var i=n.parse(u.url);h=i.hostname;var s={hostname:i.hostname,port:i.port,path:i.path,method:303===e.statusCode?"GET":u.method,headers:f,withCredentials:o.withCredentials};(t=_(s,responseHandler).on("error",F)).end()}})).on("error",F),r&&t.write(r),t.end(),o.dispatchEvent("loadstart")}else{var A=".node-xmlhttprequest-content-"+process.pid,C=".node-xmlhttprequest-sync-"+process.pid;s.writeFileSync(C,"","utf8");for(var T="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(d?"s":"")+".request;var options = "+JSON.stringify(E)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+A+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+C+"');});response.on('error', function(error) {fs.writeFileSync('"+A+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+C+"');});}).on('error', function(error) {fs.writeFileSync('"+A+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+C+"');});"+(r?"req.write('"+JSON.stringify(r).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",P=i(process.argv[0],["-e",T]);s.existsSync(C););var I=JSON.parse(s.readFileSync(A,"utf8"));P.stdin.end(),s.unlinkSync(A),I.err?o.handleError(I.err):(e=I.data,o.status=I.data.statusCode,o.responseText=I.data.text,setState(o.DONE))}}},this.handleError=function(t){this.status=0,this.statusText=t,this.responseText=t.stack,v=!0,setState(this.DONE),this.dispatchEvent("error")},this.abort=function(){t&&(t.abort(),t=null),f=l,this.status=0,this.responseText="",this.responseXML="",v=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!y||this.readyState===this.DONE||(y=!1,setState(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(t,e){t in m||(m[t]=[]),m[t].push(e)},this.removeEventListener=function(t,e){t in m&&(m[t]=m[t].filter((function(t){return t!==e})))},this.dispatchEvent=function(t){if("function"==typeof o["on"+t]&&o["on"+t](),t in m)for(var e=0,r=m[t].length;e<r;e++)m[t][e].call(o)};var setState=function(t){t!=o.LOADING&&o.readyState===t||(o.readyState=t,(u.async||o.readyState<o.OPENED||o.readyState===o.DONE)&&o.dispatchEvent("readystatechange"),o.readyState!==o.DONE||v||(o.dispatchEvent("load"),o.dispatchEvent("loadend")))}}},function(t,e,r){t.exports=r(46).default},function(t,e){t.exports=r(82)},function(t,e){t.exports=r(83)},function(t,e,r){"use strict";var n=r(7).Stream,i=r(0),IO=function(t){this.readable=this.writable=!0,this._paused=!1,this._driver=t};i.inherits(IO,n),IO.prototype.pause=function(){this._paused=!0,this._driver.messages._paused=!0},IO.prototype.resume=function(){this._paused=!1,this.emit("drain");var t=this._driver.messages;t._paused=!1,t.emit("drain")},IO.prototype.write=function(t){return!!this.writable&&(this._driver.parse(t),!this._paused)},IO.prototype.end=function(t){if(this.writable){void 0!==t&&this.write(t),this.writable=!1;var e=this._driver.messages;e.readable&&(e.readable=e.writable=!1,e.emit("end"))}},IO.prototype.destroy=function(){this.end()};var Messages=function(t){this.readable=this.writable=!0,this._paused=!1,this._driver=t};i.inherits(Messages,n),Messages.prototype.pause=function(){this._driver.io._paused=!0},Messages.prototype.resume=function(){this._driver.io._paused=!1,this._driver.io.emit("drain")},Messages.prototype.write=function(t){return!!this.writable&&("string"==typeof t?this._driver.text(t):this._driver.binary(t),!this._paused)},Messages.prototype.end=function(t){void 0!==t&&this.write(t)},Messages.prototype.destroy=function(){},e.IO=IO,e.Messages=Messages},function(t,e,r){"use strict";var n=r(1).Buffer,StreamReader=function(){this._queue=[],this._queueSize=0,this._offset=0};StreamReader.prototype.put=function(t){t&&0!==t.length&&(n.isBuffer(t)||(t=n.from(t)),this._queue.push(t),this._queueSize+=t.length)},StreamReader.prototype.read=function(t){if(t>this._queueSize)return null;if(0===t)return n.alloc(0);this._queueSize-=t;var e,r,i=this._queue,s=t,o=i[0];if(o.length>=t)return o.length===t?i.shift():(r=o.slice(0,t),i[0]=o.slice(t),r);for(var a=0,c=i.length;a<c&&!(s<i[a].length);a++)s-=i[a].length;return e=i.splice(0,a),s>0&&i.length>0&&(e.push(i[0].slice(0,s)),i[0]=i[0].slice(s)),n.concat(e,t)},StreamReader.prototype.eachByte=function(t,e){for(var r,n,i;this._queue.length>0;){for(n=(r=this._queue[0]).length;this._offset<n;)i=this._offset,this._offset+=1,t.call(e,r[i]);this._offset=0,this._queue.shift()}},t.exports=StreamReader},function(t,e,r){"use strict";var n=r(1).Buffer,i=r(5),s=r(8),o=r(0),a=r(11),c=r(2),u=r(13),h=r(35),Client=function(t,e){this.version="hybi-"+u.VERSION,u.call(this,null,t,e),this.readyState=-1,this._key=Client.generateKey(),this._accept=u.generateAccept(this._key),this._http=new a("response");var r=s.parse(this.url),i=r.auth&&n.from(r.auth,"utf8").toString("base64");if(this.VALID_PROTOCOLS.indexOf(r.protocol)<0)throw new Error(this.url+" is not a valid WebSocket URL");this._pathname=(r.pathname||"/")+(r.search||""),this._headers.set("Host",r.host),this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Key",this._key),this._headers.set("Sec-WebSocket-Version",u.VERSION),this._protocols.length>0&&this._headers.set("Sec-WebSocket-Protocol",this._protocols.join(", ")),i&&this._headers.set("Authorization","Basic "+i)};o.inherits(Client,u),Client.generateKey=function(){return i.randomBytes(16).toString("base64")};var l={VALID_PROTOCOLS:["ws:","wss:"],proxy:function(t,e){return new h(this,t,e)},start:function(){return-1===this.readyState&&(this._write(this._handshakeRequest()),this.readyState=0,!0)},parse:function(t){if(3!==this.readyState){if(this.readyState>0)return u.prototype.parse.call(this,t);this._http.parse(t),this._http.isComplete()&&(this._validateHandshake(),3!==this.readyState&&(this._open(),this.parse(this._http.body)))}},_handshakeRequest:function(){var t=this._extensions.generateOffer();t&&this._headers.set("Sec-WebSocket-Extensions",t);var e=["GET "+this._pathname+" HTTP/1.1",this._headers.toString(),""];return n.from(e.join("\r\n"),"utf8")},_failHandshake:function(t){t="Error during WebSocket handshake: "+t,this.readyState=3,this.emit("error",new Error(t)),this.emit("close",new c.CloseEvent(this.ERRORS.protocol_error,t))},_validateHandshake:function(){if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this._http.error)return this._failHandshake(this._http.error.message);if(101!==this._http.statusCode)return this._failHandshake("Unexpected response code: "+this._http.statusCode);var t=this._http.headers,e=t.upgrade||"",r=t.connection||"",n=t["sec-websocket-accept"]||"",i=t["sec-websocket-protocol"]||"";if(""===e)return this._failHandshake("'Upgrade' header is missing");if("websocket"!==e.toLowerCase())return this._failHandshake("'Upgrade' header value is not 'WebSocket'");if(""===r)return this._failHandshake("'Connection' header is missing");if("upgrade"!==r.toLowerCase())return this._failHandshake("'Connection' header value is not 'Upgrade'");if(n!==this._accept)return this._failHandshake("Sec-WebSocket-Accept mismatch");if(this.protocol=null,""!==i){if(this._protocols.indexOf(i)<0)return this._failHandshake("Sec-WebSocket-Protocol mismatch");this.protocol=i}try{this._extensions.activate(this.headers["sec-websocket-extensions"])}catch(t){return this._failHandshake(t.message)}}};for(var f in l)Client.prototype[f]=l[f];t.exports=Client},function(t,e,r){var n=r(27);function HTTPParser(t){n.ok(t===HTTPParser.REQUEST||t===HTTPParser.RESPONSE),this.type=t,this.state=t+"_LINE",this.info={headers:[],upgrade:!1},this.trailers=[],this.line="",this.isChunked=!1,this.connection="",this.headerSize=0,this.body_bytes=null,this.isUserCall=!1,this.hadError=!1}e.HTTPParser=HTTPParser,HTTPParser.maxHeaderSize=81920,HTTPParser.REQUEST="REQUEST",HTTPParser.RESPONSE="RESPONSE";var i=HTTPParser.kOnHeaders=0,s=HTTPParser.kOnHeadersComplete=1,o=HTTPParser.kOnBody=2,a=HTTPParser.kOnMessageComplete=3;HTTPParser.prototype[i]=HTTPParser.prototype[s]=HTTPParser.prototype[o]=HTTPParser.prototype[a]=function(){};var c=!0;Object.defineProperty(HTTPParser,"kOnExecute",{get:function(){return c=!1,4}});var u=e.methods=HTTPParser.methods=["DELETE","GET","HEAD","POST","PUT","CONNECT","OPTIONS","TRACE","COPY","LOCK","MKCOL","MOVE","PROPFIND","PROPPATCH","SEARCH","UNLOCK","BIND","REBIND","UNBIND","ACL","REPORT","MKACTIVITY","CHECKOUT","MERGE","M-SEARCH","NOTIFY","SUBSCRIBE","UNSUBSCRIBE","PATCH","PURGE","MKCALENDAR","LINK","UNLINK"];HTTPParser.prototype.reinitialize=HTTPParser,HTTPParser.prototype.close=HTTPParser.prototype.pause=HTTPParser.prototype.resume=HTTPParser.prototype.free=function(){},HTTPParser.prototype._compatMode0_11=!1,HTTPParser.prototype.getAsyncId=function(){return 0};var h={REQUEST_LINE:!0,RESPONSE_LINE:!0,HEADER:!0};HTTPParser.prototype.execute=function(t,e,r){if(!(this instanceof HTTPParser))throw new TypeError("not a HTTPParser");e=e||0,r="number"==typeof r?r:t.length,this.chunk=t,this.offset=e;var n=this.end=e+r;try{for(;this.offset<n&&!this[this.state](););}catch(t){if(this.isUserCall)throw t;return this.hadError=!0,t}return this.chunk=null,r=this.offset-e,h[this.state]&&(this.headerSize+=r,this.headerSize>HTTPParser.maxHeaderSize)?new Error("max header size exceeded"):r};var l={REQUEST_LINE:!0,RESPONSE_LINE:!0,BODY_RAW:!0};HTTPParser.prototype.finish=function(){if(!this.hadError)return l[this.state]?void("BODY_RAW"===this.state&&this.userCall()(this[a]())):new Error("invalid state for EOF")},HTTPParser.prototype.consume=HTTPParser.prototype.unconsume=HTTPParser.prototype.getCurrentBuffer=function(){},HTTPParser.prototype.userCall=function(){this.isUserCall=!0;var t=this;return function(e){return t.isUserCall=!1,e}},HTTPParser.prototype.nextRequest=function(){this.userCall()(this[a]()),this.reinitialize(this.type)},HTTPParser.prototype.consumeLine=function(){for(var t=this.end,e=this.chunk,r=this.offset;r<t;r++)if(10===e[r]){var n=this.line+e.toString("ascii",this.offset,r);return"\r"===n.charAt(n.length-1)&&(n=n.substr(0,n.length-1)),this.line="",this.offset=r+1,n}this.line+=e.toString("ascii",this.offset,this.end),this.offset=this.end};var f=/^([^: \t]+):[ \t]*((?:.*[^ \t])|)/,p=/^[ \t]+(.*[^ \t])/;HTTPParser.prototype.parseHeader=function(t,e){if(-1!==t.indexOf("\r"))throw parseErrorCode("HPE_LF_EXPECTED");var r=f.exec(t),n=r&&r[1];if(n)e.push(n),e.push(r[2]);else{var i=p.exec(t);i&&e.length&&(e[e.length-1]&&(e[e.length-1]+=" "),e[e.length-1]+=i[1])}};var d=/^([A-Z-]+) ([^ ]+) HTTP\/(\d)\.(\d)$/;HTTPParser.prototype.REQUEST_LINE=function(){var t=this.consumeLine();if(t){var e=d.exec(t);if(null===e)throw parseErrorCode("HPE_INVALID_CONSTANT");if(this.info.method=this._compatMode0_11?e[1]:u.indexOf(e[1]),-1===this.info.method)throw new Error("invalid request method");"CONNECT"===e[1]&&(this.info.upgrade=!0),this.info.url=e[2],this.info.versionMajor=+e[3],this.info.versionMinor=+e[4],this.body_bytes=0,this.state="HEADER"}};var g=/^HTTP\/(\d)\.(\d) (\d{3}) ?(.*)$/;function parseErrorCode(t){var e=new Error("Parse Error");return e.code=t,e}HTTPParser.prototype.RESPONSE_LINE=function(){var t=this.consumeLine();if(t){var e=g.exec(t);if(null===e)throw parseErrorCode("HPE_INVALID_CONSTANT");this.info.versionMajor=+e[1],this.info.versionMinor=+e[2];var r=this.info.statusCode=+e[3];this.info.statusMessage=e[4],1!=(r/100|0)&&204!==r&&304!==r||(this.body_bytes=0),this.state="HEADER"}},HTTPParser.prototype.shouldKeepAlive=function(){if(this.info.versionMajor>0&&this.info.versionMinor>0){if(-1!==this.connection.indexOf("close"))return!1}else if(-1===this.connection.indexOf("keep-alive"))return!1;return!(null===this.body_bytes&&!this.isChunked)},HTTPParser.prototype.HEADER=function(){var t=this.consumeLine();if(void 0!==t){var e=this.info;if(t)this.parseHeader(t,e.headers);else{for(var r,n,i=e.headers,o=!1,a=0;a<i.length;a+=2)switch(i[a].toLowerCase()){case"transfer-encoding":this.isChunked="chunked"===i[a+1].toLowerCase();break;case"content-length":if(r=+i[a+1],o){if(r!==this.body_bytes)throw parseErrorCode("HPE_UNEXPECTED_CONTENT_LENGTH")}else o=!0,this.body_bytes=r;break;case"connection":this.connection+=i[a+1].toLowerCase();break;case"upgrade":e.upgrade=!0}if(this.isChunked&&o)throw parseErrorCode("HPE_UNEXPECTED_CONTENT_LENGTH");if(e.shouldKeepAlive=this.shouldKeepAlive(),n=c?this.userCall()(this[s](e)):this.userCall()(this[s](e.versionMajor,e.versionMinor,e.headers,e.method,e.url,e.statusCode,e.statusMessage,e.upgrade,e.shouldKeepAlive)),e.upgrade||2===n)return this.nextRequest(),!0;this.isChunked&&!n?this.state="BODY_CHUNKHEAD":n||0===this.body_bytes?this.nextRequest():null===this.body_bytes?this.state="BODY_RAW":this.state="BODY_SIZED"}}},HTTPParser.prototype.BODY_CHUNKHEAD=function(){var t=this.consumeLine();void 0!==t&&(this.body_bytes=parseInt(t,16),this.body_bytes?this.state="BODY_CHUNK":this.state="BODY_CHUNKTRAILERS")},HTTPParser.prototype.BODY_CHUNK=function(){var t=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[o](this.chunk,this.offset,t)),this.offset+=t,this.body_bytes-=t,this.body_bytes||(this.state="BODY_CHUNKEMPTYLINE")},HTTPParser.prototype.BODY_CHUNKEMPTYLINE=function(){var t=this.consumeLine();void 0!==t&&(n.equal(t,""),this.state="BODY_CHUNKHEAD")},HTTPParser.prototype.BODY_CHUNKTRAILERS=function(){var t=this.consumeLine();void 0!==t&&(t?this.parseHeader(t,this.trailers):(this.trailers.length&&this.userCall()(this[i](this.trailers,"")),this.nextRequest()))},HTTPParser.prototype.BODY_RAW=function(){var t=this.end-this.offset;this.userCall()(this[o](this.chunk,this.offset,t)),this.offset=this.end},HTTPParser.prototype.BODY_SIZED=function(){var t=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[o](this.chunk,this.offset,t)),this.offset+=t,this.body_bytes-=t,this.body_bytes||this.nextRequest()},["Headers","HeadersComplete","Body","MessageComplete"].forEach((function(t){var e=HTTPParser["kOn"+t];Object.defineProperty(HTTPParser.prototype,"on"+t,{get:function(){return this[e]},set:function(t){return this._compatMode0_11=!0,this[e]=t}})}))},function(t,e){t.exports=r(37)},function(t,e,r){"use strict";var n=r(29),i=r(30),Extensions=function(){this._rsv1=this._rsv2=this._rsv3=null,this._byName={},this._inOrder=[],this._sessions=[],this._index={}};Extensions.MESSAGE_OPCODES=[1,2];var s={add:function(t){if("string"!=typeof t.name)throw new TypeError("extension.name must be a string");if("permessage"!==t.type)throw new TypeError('extension.type must be "permessage"');if("boolean"!=typeof t.rsv1)throw new TypeError("extension.rsv1 must be true or false");if("boolean"!=typeof t.rsv2)throw new TypeError("extension.rsv2 must be true or false");if("boolean"!=typeof t.rsv3)throw new TypeError("extension.rsv3 must be true or false");if(this._byName.hasOwnProperty(t.name))throw new TypeError('An extension with name "'+t.name+'" is already registered');this._byName[t.name]=t,this._inOrder.push(t)},generateOffer:function(){var t=[],e=[],r={};return this._inOrder.forEach((function(i){var s=i.createClientSession();if(s){var o=[i,s];t.push(o),r[i.name]=o;var a=s.generateOffer();(a=a?[].concat(a):[]).forEach((function(t){e.push(n.serializeParams(i.name,t))}),this)}}),this),this._sessions=t,this._index=r,e.length>0?e.join(", "):null},activate:function(t){var e=n.parseHeader(t),r=[];e.eachOffer((function(t,e){var i=this._index[t];if(!i)throw new Error('Server sent an extension response for unknown extension "'+t+'"');var s=i[0],o=i[1],a=this._reserved(s);if(a)throw new Error("Server sent two extension responses that use the RSV"+a[0]+' bit: "'+a[1]+'" and "'+s.name+'"');if(!0!==o.activate(e))throw new Error("Server sent unacceptable extension parameters: "+n.serializeParams(t,e));this._reserve(s),r.push(i)}),this),this._sessions=r,this._pipeline=new i(r)},generateResponse:function(t){var e=[],r=[],s=n.parseHeader(t);return this._inOrder.forEach((function(t){var i=s.byName(t.name);if(0!==i.length&&!this._reserved(t)){var o=t.createServerSession(i);o&&(this._reserve(t),e.push([t,o]),r.push(n.serializeParams(t.name,o.generateResponse())))}}),this),this._sessions=e,this._pipeline=new i(e),r.length>0?r.join(", "):null},validFrameRsv:function(t){var e,r={rsv1:!1,rsv2:!1,rsv3:!1};if(Extensions.MESSAGE_OPCODES.indexOf(t.opcode)>=0)for(var n=0,i=this._sessions.length;n<i;n++)e=this._sessions[n][0],r.rsv1=r.rsv1||e.rsv1,r.rsv2=r.rsv2||e.rsv2,r.rsv3=r.rsv3||e.rsv3;return(r.rsv1||!t.rsv1)&&(r.rsv2||!t.rsv2)&&(r.rsv3||!t.rsv3)},processIncomingMessage:function(t,e,r){this._pipeline.processIncomingMessage(t,e,r)},processOutgoingMessage:function(t,e,r){this._pipeline.processOutgoingMessage(t,e,r)},close:function(t,e){if(!this._pipeline)return t.call(e);this._pipeline.close(t,e)},_reserve:function(t){this._rsv1=this._rsv1||t.rsv1&&t.name,this._rsv2=this._rsv2||t.rsv2&&t.name,this._rsv3=this._rsv3||t.rsv3&&t.name},_reserved:function(t){return this._rsv1&&t.rsv1?[1,this._rsv1]:this._rsv2&&t.rsv2?[2,this._rsv2]:!(!this._rsv3||!t.rsv3)&&[3,this._rsv3]}};for(var o in s)Extensions.prototype[o]=s[o];t.exports=Extensions},function(t,e,r){"use strict";var n=/([!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+)/,i=/([^!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z])/g,s=new RegExp(n.source+"(?:=(?:"+n.source+"|"+/"((?:\\[\x00-\x7f]|[^\x00-\x08\x0a-\x1f\x7f"])*)"/.source+"))?"),o=new RegExp(n.source+"(?: *; *"+s.source+")*","g"),a=new RegExp("^"+o.source+"(?: *, *"+o.source+")*$"),c=/^-?(0|[1-9][0-9]*)(\.[0-9]+)?$/,u=Object.prototype.hasOwnProperty,h={parseHeader:function(t){var e=new Offers;if(""===t||void 0===t)return e;if(!a.test(t))throw new SyntaxError("Invalid Sec-WebSocket-Extensions header: "+t);return t.match(o).forEach((function(t){var r=t.match(new RegExp(s.source,"g")),n=r.shift(),i={};r.forEach((function(t){var e,r=t.match(s),n=r[1];e=void 0!==r[2]?r[2]:void 0===r[3]||r[3].replace(/\\/g,""),c.test(e)&&(e=parseFloat(e)),u.call(i,n)?(i[n]=[].concat(i[n]),i[n].push(e)):i[n]=e}),this),e.push(n,i)}),this),e},serializeParams:function(t,e){var r=[],print=function(t,e){e instanceof Array?e.forEach((function(e){print(t,e)})):!0===e?r.push(t):"number"==typeof e?r.push(t+"="+e):i.test(e)?r.push(t+'="'+e.replace(/"/g,'\\"')+'"'):r.push(t+"="+e)};for(var n in e)print(n,e[n]);return[t].concat(r).join("; ")}},Offers=function(){this._byName={},this._inOrder=[]};Offers.prototype.push=function(t,e){u.call(this._byName,t)||(this._byName[t]=[]),this._byName[t].push(e),this._inOrder.push({name:t,params:e})},Offers.prototype.eachOffer=function(t,e){for(var r=this._inOrder,n=0,i=r.length;n<i;n++)t.call(e,r[n].name,r[n].params)},Offers.prototype.byName=function(t){return this._byName[t]||[]},Offers.prototype.toArray=function(){return this._inOrder.slice()},t.exports=h},function(t,e,r){"use strict";var n=r(31),i=r(15),Pipeline=function(t){this._cells=t.map((function(t){return new n(t)})),this._stopped={incoming:!1,outgoing:!1}};Pipeline.prototype.processIncomingMessage=function(t,e,r){this._stopped.incoming||this._loop("incoming",this._cells.length-1,-1,-1,t,e,r)},Pipeline.prototype.processOutgoingMessage=function(t,e,r){this._stopped.outgoing||this._loop("outgoing",0,this._cells.length,1,t,e,r)},Pipeline.prototype.close=function(t,e){this._stopped={incoming:!0,outgoing:!0};var r=this._cells.map((function(t){return t.close()}));t&&i.all(r).then((function(){t.call(e)}))},Pipeline.prototype._loop=function(t,e,r,n,i,s,o){for(var a=this._cells,c=a.length,u=this;c--;)a[c].pending(t);var pipe=function(e,i,c){if(e===r)return s.call(o,i,c);a[e][t](i,c,(function(r,i){r&&(u._stopped[t]=!0),pipe(e+n,r,i)}))};pipe(e,null,i)},t.exports=Pipeline},function(t,e,r){"use strict";var n=r(32),i=r(15),Cell=function(t){this._ext=t[0],this._session=t[1],this._functors={incoming:new n(this._session,"processIncomingMessage"),outgoing:new n(this._session,"processOutgoingMessage")}};Cell.prototype.pending=function(t){var e=this._functors[t];e._stopped||(e.pending+=1)},Cell.prototype.incoming=function(t,e,r,n){this._exec("incoming",t,e,r,n)},Cell.prototype.outgoing=function(t,e,r,n){this._exec("outgoing",t,e,r,n)},Cell.prototype.close=function(){return this._closed=this._closed||new i,this._doClose(),this._closed},Cell.prototype._exec=function(t,e,r,n,i){this._functors[t].call(e,r,(function(t,e){t&&(t.message=this._ext.name+": "+t.message),n.call(i,t,e),this._doClose()}),this)},Cell.prototype._doClose=function(){var t=this._functors.incoming,e=this._functors.outgoing;this._closed&&t.pending+e.pending===0&&(this._session&&this._session.close(),this._session=null,this._closed.done())},t.exports=Cell},function(t,e,r){"use strict";var n=r(14),Functor=function(t,e){this._session=t,this._method=e,this._queue=new n(Functor.QUEUE_SIZE),this._stopped=!1,this.pending=0};Functor.QUEUE_SIZE=8,Functor.prototype.call=function(t,e,r,n){if(!this._stopped){var i={error:t,message:e,callback:r,context:n,done:!1},s=!1,o=this;if(this._queue.push(i),i.error)return i.done=!0,this._stop(),this._flushQueue();var handler=function(t,e){s^(s=!0)&&(t?(o._stop(),i.error=t,i.message=null):i.message=e,i.done=!0,o._flushQueue())};try{this._session[this._method](e,handler)}catch(t){handler(t)}}},Functor.prototype._stop=function(){this.pending=this._queue.length,this._stopped=!0},Functor.prototype._flushQueue=function(){for(var t,e=this._queue;e.length>0&&e.peek().done;)(t=e.shift()).error?(this.pending=0,e.clear()):this.pending-=1,t.callback.call(t.context,t.error,t.message)},t.exports=Functor},function(t,e,r){"use strict";var Frame=function(){},n={final:!1,rsv1:!1,rsv2:!1,rsv3:!1,opcode:null,masked:!1,maskingKey:null,lengthBytes:1,length:0,payload:null};for(var i in n)Frame.prototype[i]=n[i];t.exports=Frame},function(t,e,r){"use strict";var n=r(1).Buffer,Message=function(){this.rsv1=!1,this.rsv2=!1,this.rsv3=!1,this.opcode=null,this.length=0,this._chunks=[]},i={read:function(){return this.data=this.data||n.concat(this._chunks,this.length)},pushFrame:function(t){this.rsv1=this.rsv1||t.rsv1,this.rsv2=this.rsv2||t.rsv2,this.rsv3=this.rsv3||t.rsv3,null===this.opcode&&(this.opcode=t.opcode),this._chunks.push(t.payload),this.length+=t.length}};for(var s in i)Message.prototype[s]=i[s];t.exports=Message},function(t,e,r){"use strict";var n=r(1).Buffer,i=r(7).Stream,s=r(8),o=r(0),a=r(2),c=r(10),u=r(11),h={"ws:":80,"wss:":443},Proxy=function(t,e,r){this._client=t,this._http=new u("response"),this._origin="object"==typeof t.url?t.url:s.parse(t.url),this._url="object"==typeof e?e:s.parse(e),this._options=r||{},this._state=0,this.readable=this.writable=!0,this._paused=!1,this._headers=new c,this._headers.set("Host",this._origin.host),this._headers.set("Connection","keep-alive"),this._headers.set("Proxy-Connection","keep-alive");var i=this._url.auth&&n.from(this._url.auth,"utf8").toString("base64");i&&this._headers.set("Proxy-Authorization","Basic "+i)};o.inherits(Proxy,i);var l={setHeader:function(t,e){return 0===this._state&&(this._headers.set(t,e),!0)},start:function(){if(0!==this._state)return!1;this._state=1;var t=this._origin,e=t.port||h[t.protocol],r=["CONNECT "+t.hostname+":"+e+" HTTP/1.1",this._headers.toString(),""];return this.emit("data",n.from(r.join("\r\n"),"utf8")),!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1,this.emit("drain")},write:function(t){if(!this.writable)return!1;if(this._http.parse(t),!this._http.isComplete())return!this._paused;if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,200===this.statusCode)this.emit("connect",new a.ConnectEvent);else{var e="Can't establish a connection to the server at "+this._origin.href;this.emit("error",new Error(e))}return this.end(),!this._paused},end:function(t){this.writable&&(void 0!==t&&this.write(t),this.readable=this.writable=!1,this.emit("close"),this.emit("end"))},destroy:function(){this.end()}};for(var f in l)Proxy.prototype[f]=l[f];t.exports=Proxy},function(t,e,r){"use strict";var n=r(0),i=r(11),s=r(2),o=r(16),a=r(37),c=r(13),Server=function(t){s.call(this,null,null,t),this._http=new i("request")};n.inherits(Server,s);var u={EVENTS:["open","message","error","close"],_bindEventListeners:function(){this.messages.on("error",(function(){})),this.on("error",(function(){}))},parse:function(t){if(this._delegate)return this._delegate.parse(t);if(this._http.parse(t),this._http.isComplete()){this.method=this._http.method,this.url=this._http.url,this.headers=this._http.headers,this.body=this._http.body;var e=this;this._delegate=Server.http(this,this._options),this._delegate.messages=this.messages,this._delegate.io=this.io,this._open(),this.EVENTS.forEach((function(t){this._delegate.on(t,(function(r){e.emit(t,r)}))}),this),this.protocol=this._delegate.protocol,this.version=this._delegate.version,this.parse(this._http.body),this.emit("connect",new s.ConnectEvent)}},_open:function(){this.__queue.forEach((function(t){this._delegate[t[0]].apply(this._delegate,t[1])}),this),this.__queue=[]}};for(var h in["addExtension","setHeader","start","frame","text","binary","ping","close"].forEach((function(t){u[t]=function(){return this._delegate?this._delegate[t].apply(this._delegate,arguments):(this.__queue.push([t,arguments]),!0)}})),u)Server.prototype[h]=u[h];Server.isSecureRequest=function(t){if(t.connection&&void 0!==t.connection.authorized)return!0;if(t.socket&&t.socket.secure)return!0;var e=t.headers;return!!e&&("on"===e.https||("on"===e["x-forwarded-ssl"]||("https"===e["x-forwarded-scheme"]||"https"===e["x-forwarded-proto"])))},Server.determineUrl=function(t){return(this.isSecureRequest(t)?"wss:":"ws:")+"//"+t.headers.host+t.url},Server.http=function(t,e){void 0===(e=e||{}).requireMasking&&(e.requireMasking=!0);var r=t.headers,n=r["sec-websocket-version"],i=r["sec-websocket-key"],s=r["sec-websocket-key1"],u=r["sec-websocket-key2"],h=this.determineUrl(t);return n||i?new c(t,h,e):s||u?new a(t,h,e):new o(t,h,e)},t.exports=Server},function(t,e,r){"use strict";var n=r(1).Buffer,i=r(2),s=r(16),o=r(5),a=r(0),numberFromKey=function(t){return parseInt((t.match(/[0-9]/g)||[]).join(""),10)},spacesInKey=function(t){return(t.match(/ /g)||[]).length},Draft76=function(t,e,r){s.apply(this,arguments),this._stage=-1,this._body=[],this.version="hixie-76",this._headers.clear(),this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Origin",this._request.headers.origin),this._headers.set("Sec-WebSocket-Location",this.url)};a.inherits(Draft76,s);var c={BODY_SIZE:8,start:function(){return!!s.prototype.start.call(this)&&(this._started=!0,this._sendHandshakeBody(),!0)},close:function(){return 3!==this.readyState&&(1===this.readyState&&this._write(n.from([255,0])),this.readyState=3,this.emit("close",new i.CloseEvent(null,null)),!0)},_handshakeResponse:function(){var t=(a=this._request.headers)["sec-websocket-key1"],e=a["sec-websocket-key2"];if(!t)throw new Error("Missing required header: Sec-WebSocket-Key1");if(!e)throw new Error("Missing required header: Sec-WebSocket-Key2");var r=numberFromKey(t),i=spacesInKey(t),s=numberFromKey(e),o=spacesInKey(e);if(r%i!=0||s%o!=0)throw new Error("Client sent invalid Sec-WebSocket-Key headers");this._keyValues=[r/i,s/o];var a=["HTTP/1.1 101 WebSocket Protocol Handshake",this._headers.toString(),""];return n.from(a.join("\r\n"),"binary")},_handshakeSignature:function(){if(this._body.length<this.BODY_SIZE)return null;var t=o.createHash("md5"),e=n.allocUnsafe(8+this.BODY_SIZE);return e.writeUInt32BE(this._keyValues[0],0),e.writeUInt32BE(this._keyValues[1],4),n.from(this._body).copy(e,8,0,this.BODY_SIZE),t.update(e),n.from(t.digest("binary"),"binary")},_sendHandshakeBody:function(){if(this._started){var t=this._handshakeSignature();t&&(this._write(t),this._stage=0,this._open(),this._body.length>this.BODY_SIZE&&this.parse(this._body.slice(this.BODY_SIZE)))}},_parseLeadingByte:function(t){if(255!==t)return s.prototype._parseLeadingByte.call(this,t);this._closing=!0,this._length=0,this._stage=1}};for(var u in c)Draft76.prototype[u]=c[u];t.exports=Draft76},function(t,e,r){var n=r(0),i=r(39),s=r(40),o=(r(5),r(8)),a=r(6),c=r(12),u=(r(9),{"http:":80,"https:":443,"ws:":80,"wss:":443}),h=["https:","wss:"],Client=function(t,e,r){r=r||{},this.url=t,this._driver=a.client(this.url,{maxLength:r.maxLength,protocols:e}),["open","error"].forEach((function(t){this._driver.on(t,(function(){y.headers=y._driver.headers,y.statusCode=y._driver.statusCode}))}),this);var n=r.proxy||{},l=o.parse(n.origin||this.url),f=l.port||u[l.protocol],p=h.indexOf(l.protocol)>=0,onConnect=function(){y._onConnect()},d=r.tls||{},g=n.origin?n.tls||{}:d,y=this;d.ca=d.ca||r.ca,this._stream=p?s.connect(f,l.hostname,g,onConnect):i.connect(f,l.hostname,onConnect),n.origin&&this._configureProxy(n,d),c.call(this,r)};n.inherits(Client,c),Client.prototype._onConnect=function(){(this._proxy||this._driver).start()},Client.prototype._configureProxy=function(t,e){var r,n=o.parse(this.url),i=h.indexOf(n.protocol)>=0,a=this;if(this._proxy=this._driver.proxy(t.origin),t.headers)for(r in t.headers)this._proxy.setHeader(r,t.headers[r]);this._proxy.pipe(this._stream,{end:!1}),this._stream.pipe(this._proxy),this._proxy.on("connect",(function(){if(i){var t={socket:a._stream,servername:n.hostname};for(r in e)t[r]=e[r];a._stream=s.connect(t),a._configureStream()}a._driver.io.pipe(a._stream),a._stream.pipe(a._driver.io),a._driver.start()})),this._proxy.on("error",(function(t){a._driver.emit("error",t)}))},t.exports=Client},function(t,e){t.exports=r(84)},function(t,e){t.exports=r(85)},function(t,e,r){var n=r(7).Stream,i=r(0),s=r(6),o=r(10),a=r(12),c=r(17),u=r(9),EventSource=function(t,e,r){this.writable=!0,r=r||{},this._stream=e.socket,this._ping=r.ping||this.DEFAULT_PING,this._retry=r.retry||this.DEFAULT_RETRY;var n=s.isSecureRequest(t)?"https:":"http:";this.url=n+"//"+t.headers.host+t.url,this.lastEventId=t.headers["last-event-id"]||"",this.readyState=a.CONNECTING;var i=new o,c=this;if(r.headers)for(var u in r.headers)i.set(u,r.headers[u]);if(this._stream&&this._stream.writable){process.nextTick((function(){c._open()})),this._stream.setTimeout(0),this._stream.setNoDelay(!0);var h="HTTP/1.1 200 OK\r\nContent-Type: text/event-stream\r\nCache-Control: no-cache, no-store\r\nConnection: close\r\n"+i.toString()+"\r\nretry: "+Math.floor(1e3*this._retry)+"\r\n\r\n";this._write(h),this._stream.on("drain",(function(){c.emit("drain")})),this._ping&&(this._pingTimer=setInterval((function(){c.ping()}),1e3*this._ping)),["error","end"].forEach((function(t){c._stream.on(t,(function(){c.close()}))}))}};i.inherits(EventSource,n),EventSource.isEventSource=function(t){return"GET"===t.method&&(t.headers.accept||"").split(/\s*,\s*/).indexOf("text/event-stream")>=0};var h={DEFAULT_PING:10,DEFAULT_RETRY:5,_write:function(t){if(!this.writable)return!1;try{return this._stream.write(t,"utf8")}catch(t){return!1}},_open:function(){if(this.readyState===a.CONNECTING){this.readyState=a.OPEN;var t=new u("open");t.initEvent("open",!1,!1),this.dispatchEvent(t)}},write:function(t){return this.send(t)},end:function(t){void 0!==t&&this.write(t),this.close()},send:function(t,e){if(this.readyState>a.OPEN)return!1;t=String(t).replace(/(\r\n|\r|\n)/g,"$1data: ");var r="";return(e=e||{}).event&&(r+="event: "+e.event+"\r\n"),e.id&&(r+="id: "+e.id+"\r\n"),r+="data: "+t+"\r\n\r\n",this._write(r)},ping:function(){return this._write(":\r\n\r\n")},close:function(){if(this.readyState>a.OPEN)return!1;this.readyState=a.CLOSED,this.writable=!1,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end();var t=new u("close");return t.initEvent("close",!1,!1),this.dispatchEvent(t),!0}};for(var l in h)EventSource.prototype[l]=h[l];for(var f in c)EventSource.prototype[f]=c[f];t.exports=EventSource},function(t,e){t.exports=r(86)},function(t,e){t.exports=r(87)},function(t,e){t.exports=r(14)},function(t,e){t.exports=r(19)},function(t,e,r){"use strict";r.r(e);for(var n=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s={},o=0,a=i.length;o<a;o++)s[i.charAt(o)]=o;var c,cb_utob=function(t){var e=t.charCodeAt(0);return e<128?t:e<2048?n(192|e>>>6)+n(128|63&e):n(224|e>>>12&15)+n(128|e>>>6&63)+n(128|63&e)},utob=function(t){return t.replace(/[^\x00-\x7F]/g,cb_utob)},cb_encode=function(t){var e=[0,2,1][t.length%3],r=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[i.charAt(r>>>18),i.charAt(r>>>12&63),e>=2?"=":i.charAt(r>>>6&63),e>=1?"=":i.charAt(63&r)].join("")},u=global.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,cb_encode)},h=function(){function Timer(t,e,r,n){var i=this;this.clear=e,this.timer=t((function(){i.timer&&(i.timer=n(i.timer))}),r)}return Timer.prototype.isRunning=function(){return null!==this.timer},Timer.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},Timer}(),l=(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function __(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)});function timers_clearTimeout(t){global.clearTimeout(t)}function timers_clearInterval(t){global.clearInterval(t)}var f=function(t){function OneOffTimer(e,r){return t.call(this,setTimeout,timers_clearTimeout,e,(function(t){return r(),null}))||this}return l(OneOffTimer,t),OneOffTimer}(h),p=function(t){function PeriodicTimer(e,r){return t.call(this,setInterval,timers_clearInterval,e,(function(t){return r(),t}))||this}return l(PeriodicTimer,t),PeriodicTimer}(h),d={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(t){return new f(0,t)},method:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.prototype.slice.call(arguments,1);return function(e){return e[t].apply(e,n.concat(arguments))}}};function extend(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n++){var i=e[n];for(var s in i)i[s]&&i[s].constructor&&i[s].constructor===Object?t[s]=extend(t[s]||{},i[s]):t[s]=i[s]}return t}function stringify(){for(var t=["Pusher"],e=0;e<arguments.length;e++)"string"==typeof arguments[e]?t.push(arguments[e]):t.push(safeJSONStringify(arguments[e]));return t.join(" : ")}function arrayIndexOf(t,e){var r=Array.prototype.indexOf;if(null===t)return-1;if(r&&t.indexOf===r)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function objectApply(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function keys(t){var e=[];return objectApply(t,(function(t,r){e.push(r)})),e}function apply(t,e,r){for(var n=0;n<t.length;n++)e.call(r||global,t[n],n,t)}function map(t,e){for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n,t,r));return r}function filter(t,e){e=e||function(t){return!!t};for(var r=[],n=0;n<t.length;n++)e(t[n],n,t,r)&&r.push(t[n]);return r}function filterObject(t,e){var r={};return objectApply(t,(function(n,i){(e&&e(n,i,t,r)||Boolean(n))&&(r[i]=n)})),r}function any(t,e){for(var r=0;r<t.length;r++)if(e(t[r],r,t))return!0;return!1}function encodeParamsObject(t){return function mapObject(t,e){var r={};return objectApply(t,(function(t,n){r[n]=e(t)})),r}(t,(function(t){return"object"==typeof t&&(t=safeJSONStringify(t)),encodeURIComponent(function encode(t){return u(utob(t))}(t.toString()))}))}function buildQueryString(t){return map(function flatten(t){var e=[];return objectApply(t,(function(t,r){e.push([r,t])})),e}(encodeParamsObject(filterObject(t,(function(t){return void 0!==t})))),d.method("join","=")).join("&")}function safeJSONStringify(t){try{return JSON.stringify(t)}catch(e){return JSON.stringify(function decycleObject(t){var e=[],r=[];return function derez(t,n){var i,s,o;switch(typeof t){case"object":if(!t)return null;for(i=0;i<e.length;i+=1)if(e[i]===t)return{$ref:r[i]};if(e.push(t),r.push(n),"[object Array]"===Object.prototype.toString.apply(t))for(o=[],i=0;i<t.length;i+=1)o[i]=derez(t[i],n+"["+i+"]");else for(s in o={},t)Object.prototype.hasOwnProperty.call(t,s)&&(o[s]=derez(t[s],n+"["+JSON.stringify(s)+"]"));return o;case"number":case"string":case"boolean":return t}}(t,"$")}(t))}}var g={VERSION:"5.0.3",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,ws_path:"",sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12e4,pong_timeout:3e4,unavailable_timeout:1e4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""};function getGenericURL(t,e,r){return t+(e.useTLS?"s":"")+"://"+(e.useTLS?e.hostTLS:e.hostNonTLS)+r}function getGenericPath(t,e){return"/app/"+t+("?protocol="+g.PROTOCOL+"&client=js&version="+g.VERSION+(e?"&"+e:""))}var y={getInitial:function(t,e){return getGenericURL("ws",e,(e.httpPath||"")+getGenericPath(t,"flash=false"))}},v={getInitial:function(t,e){return getGenericURL("http",e,(e.httpPath||"/pusher")+getGenericPath(t))}},m=function(){function CallbackRegistry(){this._callbacks={}}return CallbackRegistry.prototype.get=function(t){return this._callbacks[prefix(t)]},CallbackRegistry.prototype.add=function(t,e,r){var n=prefix(t);this._callbacks[n]=this._callbacks[n]||[],this._callbacks[n].push({fn:e,context:r})},CallbackRegistry.prototype.remove=function(t,e,r){if(t||e||r){var n=t?[prefix(t)]:keys(this._callbacks);e||r?this.removeCallback(n,e,r):this.removeAllCallbacks(n)}else this._callbacks={}},CallbackRegistry.prototype.removeCallback=function(t,e,r){apply(t,(function(t){this._callbacks[t]=filter(this._callbacks[t]||[],(function(t){return e&&e!==t.fn||r&&r!==t.context})),0===this._callbacks[t].length&&delete this._callbacks[t]}),this)},CallbackRegistry.prototype.removeAllCallbacks=function(t){apply(t,(function(t){delete this._callbacks[t]}),this)},CallbackRegistry}();function prefix(t){return"_"+t}var b=function(){function Dispatcher(t){this.callbacks=new m,this.global_callbacks=[],this.failThrough=t}return Dispatcher.prototype.bind=function(t,e,r){return this.callbacks.add(t,e,r),this},Dispatcher.prototype.bind_global=function(t){return this.global_callbacks.push(t),this},Dispatcher.prototype.unbind=function(t,e,r){return this.callbacks.remove(t,e,r),this},Dispatcher.prototype.unbind_global=function(t){return t?(this.global_callbacks=filter(this.global_callbacks||[],(function(e){return e!==t})),this):(this.global_callbacks=[],this)},Dispatcher.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},Dispatcher.prototype.emit=function(t,e,r){for(var n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](t,e);var i=this.callbacks.get(t),s=[];if(r?s.push(e,r):e&&s.push(e),i&&i.length>0)for(n=0;n<i.length;n++)i[n].fn.apply(i[n].context||global,s);else this.failThrough&&this.failThrough(t,e);return this},Dispatcher}(),S=new(function(){function Logger(){this.globalLog=function(t){global.console&&global.console.log&&global.console.log(t)}}return Logger.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLog,t)},Logger.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLogWarn,t)},Logger.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLogError,t)},Logger.prototype.globalLogWarn=function(t){global.console&&global.console.warn?global.console.warn(t):this.globalLog(t)},Logger.prototype.globalLogError=function(t){global.console&&global.console.error?global.console.error(t):this.globalLogWarn(t)},Logger.prototype.log=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=stringify.apply(this,arguments);if(Nt.log)Nt.log(n);else if(Nt.logToConsole){var i=t.bind(this);i(n)}},Logger}()),x=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),w=function(t){function TransportConnection(e,r,n,i,s){var o=t.call(this)||this;return o.initialize=It.transportConnectionInitializer,o.hooks=e,o.name=r,o.priority=n,o.key=i,o.options=s,o.state="new",o.timeline=s.timeline,o.activityTimeout=s.activityTimeout,o.id=o.timeline.generateUniqueID(),o}return x(TransportConnection,t),TransportConnection.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},TransportConnection.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},TransportConnection.prototype.connect=function(){var t=this;if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(e){return d.defer((function(){t.onError(e),t.changeState("closed")})),!1}return this.bindListeners(),S.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0},TransportConnection.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},TransportConnection.prototype.send=function(t){var e=this;return"open"===this.state&&(d.defer((function(){e.socket&&e.socket.send(t)})),!0)},TransportConnection.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},TransportConnection.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},TransportConnection.prototype.onError=function(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({error:t.toString()}))},TransportConnection.prototype.onClose=function(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},TransportConnection.prototype.onMessage=function(t){this.emit("message",t)},TransportConnection.prototype.onActivity=function(){this.emit("activity")},TransportConnection.prototype.bindListeners=function(){var t=this;this.socket.onopen=function(){t.onOpen()},this.socket.onerror=function(e){t.onError(e)},this.socket.onclose=function(e){t.onClose(e)},this.socket.onmessage=function(e){t.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=function(){t.onActivity()})},TransportConnection.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},TransportConnection.prototype.changeState=function(t,e){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:e})),this.emit(t,e)},TransportConnection.prototype.buildTimelineMessage=function(t){return extend({cid:this.id},t)},TransportConnection}(b),E=function(){function Transport(t){this.hooks=t}return Transport.prototype.isSupported=function(t){return this.hooks.isSupported(t)},Transport.prototype.createConnection=function(t,e,r,n){return new w(this.hooks,t,e,r,n)},Transport}(),_=new E({urls:y,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(It.getWebSocketAPI())},isSupported:function(){return Boolean(It.getWebSocketAPI())},getSocket:function(t){return It.createWebSocket(t)}}),F={urls:v,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},A=extend({getSocket:function(t){return It.HTTPFactory.createStreamingSocket(t)}},F),C=extend({getSocket:function(t){return It.HTTPFactory.createPollingSocket(t)}},F),T={isSupported:function(){return It.isXHRSupported()}},P={ws:_,xhr_streaming:new E(extend({},A,T)),xhr_polling:new E(extend({},C,T))},I=function(){function AssistantToTheTransportManager(t,e,r){this.manager=t,this.transport=e,this.minPingDelay=r.minPingDelay,this.maxPingDelay=r.maxPingDelay,this.pingDelay=void 0}return AssistantToTheTransportManager.prototype.createConnection=function(t,e,r,n){var i=this;n=extend({},n,{activityTimeout:this.pingDelay});var s=this.transport.createConnection(t,e,r,n),o=null,onOpen=function(){s.unbind("open",onOpen),s.bind("closed",onClosed),o=d.now()},onClosed=function(t){if(s.unbind("closed",onClosed),1002===t.code||1003===t.code)i.manager.reportDeath();else if(!t.wasClean&&o){var e=d.now()-o;e<2*i.maxPingDelay&&(i.manager.reportDeath(),i.pingDelay=Math.max(e/2,i.minPingDelay))}};return s.bind("open",onOpen),s},AssistantToTheTransportManager.prototype.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},AssistantToTheTransportManager}(),R={decodeMessage:function(t){try{var e=JSON.parse(t.data),r=e.data;if("string"==typeof r)try{r=JSON.parse(e.data)}catch(t){}var n={event:e.event,channel:e.channel,data:r};return e.user_id&&(n.user_id=e.user_id),n}catch(e){throw{type:"MessageParseError",error:e,data:t.data}}},encodeMessage:function(t){return JSON.stringify(t)},processHandshake:function(t){var e=R.decodeMessage(t);if("pusher:connection_established"===e.event){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:1e3*e.data.activity_timeout}}if("pusher:error"===e.event)return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"},getCloseAction:function(t){return t.code<4e3?t.code>=1002&&t.code<=1004?"backoff":null:4e3===t.code?"tls_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},getCloseError:function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},O=R,B=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),k=function(t){function Connection(e,r){var n=t.call(this)||this;return n.id=e,n.transport=r,n.activityTimeout=r.activityTimeout,n.bindListeners(),n}return B(Connection,t),Connection.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},Connection.prototype.send=function(t){return this.transport.send(t)},Connection.prototype.send_event=function(t,e,r){var n={event:t,data:e};return r&&(n.channel=r),S.debug("Event sent",n),this.send(O.encodeMessage(n))},Connection.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},Connection.prototype.close=function(){this.transport.close()},Connection.prototype.bindListeners=function(){var t=this,e={message:function(e){var r;try{r=O.decodeMessage(e)}catch(r){t.emit("error",{type:"MessageParseError",error:r,data:e.data})}if(void 0!==r){switch(S.debug("Event recd",r),r.event){case"pusher:error":t.emit("error",{type:"PusherError",data:r.data});break;case"pusher:ping":t.emit("ping");break;case"pusher:pong":t.emit("pong")}t.emit("message",r)}},activity:function(){t.emit("activity")},error:function(e){t.emit("error",{type:"WebSocketError",error:e})},closed:function(e){unbindListeners(),e&&e.code&&t.handleCloseEvent(e),t.transport=null,t.emit("closed")}},unbindListeners=function(){objectApply(e,(function(e,r){t.transport.unbind(r,e)}))};objectApply(e,(function(e,r){t.transport.bind(r,e)}))},Connection.prototype.handleCloseEvent=function(t){var e=O.getCloseAction(t),r=O.getCloseError(t);r&&this.emit("error",r),e&&this.emit(e,{action:e,error:r})},Connection}(b),D=function(){function Handshake(t,e){this.transport=t,this.callback=e,this.bindListeners()}return Handshake.prototype.close=function(){this.unbindListeners(),this.transport.close()},Handshake.prototype.bindListeners=function(){var t=this;this.onMessage=function(e){var r;t.unbindListeners();try{r=O.processHandshake(e)}catch(e){return t.finish("error",{error:e}),void t.transport.close()}"connected"===r.action?t.finish("connected",{connection:new k(r.id,t.transport),activityTimeout:r.activityTimeout}):(t.finish(r.action,{error:r.error}),t.transport.close())},this.onClosed=function(e){t.unbindListeners();var r=O.getCloseAction(e)||"backoff",n=O.getCloseError(e);t.finish(r,{error:n})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},Handshake.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},Handshake.prototype.finish=function(t,e){this.callback(extend({transport:this.transport,action:t},e))},Handshake}(),H=function(){function PusherAuthorizer(t,e){this.channel=t;var r=e.authTransport;if(void 0===It.getAuthorizers()[r])throw"'"+r+"' is not a recognized auth transport";this.type=r,this.options=e,this.authOptions=(e||{}).auth||{}}return PusherAuthorizer.prototype.composeQuery=function(t){var e="socket_id="+encodeURIComponent(t)+"&channel_name="+encodeURIComponent(this.channel.name);for(var r in this.authOptions.params)e+="&"+encodeURIComponent(r)+"="+encodeURIComponent(this.authOptions.params[r]);return e},PusherAuthorizer.prototype.authorize=function(t,e){return PusherAuthorizer.authorizers=PusherAuthorizer.authorizers||It.getAuthorizers(),PusherAuthorizer.authorizers[this.type].call(this,It,t,e)},PusherAuthorizer}(),N=function(){function TimelineSender(t,e){this.timeline=t,this.options=e||{}}return TimelineSender.prototype.send=function(t,e){this.timeline.isEmpty()||this.timeline.send(It.TimelineTransport.getAgent(this,t),e)},TimelineSender}(),j=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),L=function(t){function BadEventName(e){var r=this.constructor,n=t.call(this,e)||this;return Object.setPrototypeOf(n,r.prototype),n}return j(BadEventName,t),BadEventName}(Error),M=(function(t){function RequestTimedOut(e){var r=this.constructor,n=t.call(this,e)||this;return Object.setPrototypeOf(n,r.prototype),n}j(RequestTimedOut,t)}(Error),function(t){function TransportPriorityTooLow(e){var r=this.constructor,n=t.call(this,e)||this;return Object.setPrototypeOf(n,r.prototype),n}return j(TransportPriorityTooLow,t),TransportPriorityTooLow}(Error)),U=function(t){function TransportClosed(e){var r=this.constructor,n=t.call(this,e)||this;return Object.setPrototypeOf(n,r.prototype),n}return j(TransportClosed,t),TransportClosed}(Error),q=function(t){function UnsupportedFeature(e){var r=this.constructor,n=t.call(this,e)||this;return Object.setPrototypeOf(n,r.prototype),n}return j(UnsupportedFeature,t),UnsupportedFeature}(Error),V=function(t){function UnsupportedTransport(e){var r=this.constructor,n=t.call(this,e)||this;return Object.setPrototypeOf(n,r.prototype),n}return j(UnsupportedTransport,t),UnsupportedTransport}(Error),K=function(t){function UnsupportedStrategy(e){var r=this.constructor,n=t.call(this,e)||this;return Object.setPrototypeOf(n,r.prototype),n}return j(UnsupportedStrategy,t),UnsupportedStrategy}(Error),z={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"}}},G={buildLogSuffix:function(t){var e,r=z.urls[t];return r?(r.fullUrl?e=r.fullUrl:r.path&&(e=z.baseUrl+r.path),e?"See: "+e:""):""}},W=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),J=function(t){function Channel(e,r){var n=t.call(this,(function(t,r){S.debug("No callbacks on "+e+" for "+t)}))||this;return n.name=e,n.pusher=r,n.subscribed=!1,n.subscriptionPending=!1,n.subscriptionCancelled=!1,n}return W(Channel,t),Channel.prototype.authorize=function(t,e){return e(!1,{})},Channel.prototype.trigger=function(t,e){if(0!==t.indexOf("client-"))throw new L("Event '"+t+"' does not start with 'client-'");if(!this.subscribed){var r=G.buildLogSuffix("triggeringClientEvents");S.warn("Client event triggered before channel 'subscription_succeeded' event . "+r)}return this.pusher.send_event(t,e,this.name)},Channel.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},Channel.prototype.handleEvent=function(t){var e=t.event,r=t.data;if("pusher_internal:subscription_succeeded"===e)this.handleSubscriptionSucceededEvent(t);else if(0!==e.indexOf("pusher_internal:")){this.emit(e,r,{})}},Channel.prototype.handleSubscriptionSucceededEvent=function(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",t.data)},Channel.prototype.subscribe=function(){var t=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(function(e,r){e?(S.error(r),t.emit("pusher:subscription_error",r)):t.pusher.send_event("pusher:subscribe",{auth:r.auth,channel_data:r.channel_data,channel:t.name})})))},Channel.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},Channel.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},Channel.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},Channel}(b),Y=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),X=function(t){function PrivateChannel(){return null!==t&&t.apply(this,arguments)||this}return Y(PrivateChannel,t),PrivateChannel.prototype.authorize=function(t,e){return at.createAuthorizer(this,this.pusher.config).authorize(t,e)},PrivateChannel}(J),$=function(){function Members(){this.reset()}return Members.prototype.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},Members.prototype.each=function(t){var e=this;objectApply(this.members,(function(r,n){t(e.get(n))}))},Members.prototype.setMyID=function(t){this.myID=t},Members.prototype.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},Members.prototype.addMember=function(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},Members.prototype.removeMember=function(t){var e=this.get(t.user_id);return e&&(delete this.members[t.user_id],this.count--),e},Members.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},Members}(),Z=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Q=function(t){function PresenceChannel(e,r){var n=t.call(this,e,r)||this;return n.members=new $,n}return Z(PresenceChannel,t),PresenceChannel.prototype.authorize=function(e,r){var n=this;t.prototype.authorize.call(this,e,(function(t,e){if(!t){if(void 0===e.channel_data){var i=G.buildLogSuffix("authenticationEndpoint");return S.error("Invalid auth response for channel '"+n.name+"',expected 'channel_data' field. "+i),void r("Invalid auth response")}var s=JSON.parse(e.channel_data);n.members.setMyID(s.user_id)}r(t,e)}))},PresenceChannel.prototype.handleEvent=function(t){var e=t.event;if(0===e.indexOf("pusher_internal:"))this.handleInternalEvent(t);else{var r=t.data,n={};t.user_id&&(n.user_id=t.user_id),this.emit(e,r,n)}},PresenceChannel.prototype.handleInternalEvent=function(t){var e=t.event,r=t.data;switch(e){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(t);break;case"pusher_internal:member_added":var n=this.members.addMember(r);this.emit("pusher:member_added",n);break;case"pusher_internal:member_removed":var i=this.members.removeMember(r);i&&this.emit("pusher:member_removed",i)}},PresenceChannel.prototype.handleSubscriptionSucceededEvent=function(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(t.data),this.emit("pusher:subscription_succeeded",this.members))},PresenceChannel.prototype.disconnect=function(){this.members.reset(),t.prototype.disconnect.call(this)},PresenceChannel}(X),tt=r(3),et=r(4),rt=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),nt=function(t){function EncryptedChannel(){var e=null!==t&&t.apply(this,arguments)||this;return e.key=null,e}return rt(EncryptedChannel,t),EncryptedChannel.prototype.authorize=function(e,r){var n=this;t.prototype.authorize.call(this,e,(function(t,e){if(t)r(!0,e);else{var i=e.shared_secret;if(i)n.key=Object(et.decodeBase64)(i),delete e.shared_secret,r(!1,e);else{var s="No shared_secret key in auth payload for encrypted channel: "+n.name;r(!0,s)}}}))},EncryptedChannel.prototype.trigger=function(t,e){throw new q("Client events are not currently supported for encrypted channels")},EncryptedChannel.prototype.handleEvent=function(e){var r=e.event,n=e.data;0!==r.indexOf("pusher_internal:")&&0!==r.indexOf("pusher:")?this.handleEncryptedEvent(r,n):t.prototype.handleEvent.call(this,e)},EncryptedChannel.prototype.handleEncryptedEvent=function(t,e){var r=this;if(this.key)if(e.ciphertext&&e.nonce){var n=Object(et.decodeBase64)(e.ciphertext);if(n.length<tt.secretbox.overheadLength)S.error("Expected encrypted event ciphertext length to be "+tt.secretbox.overheadLength+", got: "+n.length);else{var i=Object(et.decodeBase64)(e.nonce);if(i.length<tt.secretbox.nonceLength)S.error("Expected encrypted event nonce length to be "+tt.secretbox.nonceLength+", got: "+i.length);else{var s=tt.secretbox.open(n,i,this.key);if(null===s)return S.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,(function(e,o){e?S.error("Failed to make a request to the authEndpoint: "+o+". Unable to fetch new key, so dropping encrypted event"):null!==(s=tt.secretbox.open(n,i,r.key))?r.emitJSON(t,Object(et.encodeUTF8)(s)):S.error("Failed to decrypt event with new key. Dropping encrypted event")}));this.emitJSON(t,Object(et.encodeUTF8)(s))}}}else S.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+e);else S.debug("Received encrypted event before key has been retrieved from the authEndpoint")},EncryptedChannel.prototype.emitJSON=function(t,e){try{this.emit(t,JSON.parse(e))}catch(r){this.emit(t,e)}return this},EncryptedChannel}(X),it=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),st=function(t){function ConnectionManager(e,r){var n=t.call(this)||this;n.key=e,n.options=r||{},n.state="initialized",n.connection=null,n.usingTLS=!!r.useTLS,n.timeline=n.options.timeline,n.errorCallbacks=n.buildErrorCallbacks(),n.connectionCallbacks=n.buildConnectionCallbacks(n.errorCallbacks),n.handshakeCallbacks=n.buildHandshakeCallbacks(n.errorCallbacks);var i=It.getNetwork();return i.bind("online",(function(){n.timeline.info({netinfo:"online"}),"connecting"!==n.state&&"unavailable"!==n.state||n.retryIn(0)})),i.bind("offline",(function(){n.timeline.info({netinfo:"offline"}),n.connection&&n.sendActivityCheck()})),n.updateStrategy(),n}return it(ConnectionManager,t),ConnectionManager.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))},ConnectionManager.prototype.send=function(t){return!!this.connection&&this.connection.send(t)},ConnectionManager.prototype.send_event=function(t,e,r){return!!this.connection&&this.connection.send_event(t,e,r)},ConnectionManager.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},ConnectionManager.prototype.isUsingTLS=function(){return this.usingTLS},ConnectionManager.prototype.startConnecting=function(){var t=this,callback=function(e,r){e?t.runner=t.strategy.connect(0,callback):"error"===r.action?(t.emit("error",{type:"HandshakeError",error:r.error}),t.timeline.error({handshakeError:r.error})):(t.abortConnecting(),t.handshakeCallbacks[r.action](r))};this.runner=this.strategy.connect(0,callback)},ConnectionManager.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},ConnectionManager.prototype.disconnectInternally=function(){(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection)&&this.abandonConnection().close()},ConnectionManager.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},ConnectionManager.prototype.retryIn=function(t){var e=this;this.timeline.info({action:"retry",delay:t}),t>0&&this.emit("connecting_in",Math.round(t/1e3)),this.retryTimer=new f(t||0,(function(){e.disconnectInternally(),e.connect()}))},ConnectionManager.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},ConnectionManager.prototype.setUnavailableTimer=function(){var t=this;this.unavailableTimer=new f(this.options.unavailableTimeout,(function(){t.updateState("unavailable")}))},ConnectionManager.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},ConnectionManager.prototype.sendActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new f(this.options.pongTimeout,(function(){t.timeline.error({pong_timed_out:t.options.pongTimeout}),t.retryIn(0)}))},ConnectionManager.prototype.resetActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new f(this.activityTimeout,(function(){t.sendActivityCheck()})))},ConnectionManager.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},ConnectionManager.prototype.buildConnectionCallbacks=function(t){var e=this;return extend({},t,{message:function(t){e.resetActivityCheck(),e.emit("message",t)},ping:function(){e.send_event("pusher:pong",{})},activity:function(){e.resetActivityCheck()},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(){e.abandonConnection(),e.shouldRetry()&&e.retryIn(1e3)}})},ConnectionManager.prototype.buildHandshakeCallbacks=function(t){var e=this;return extend({},t,{connected:function(t){e.activityTimeout=Math.min(e.options.activityTimeout,t.activityTimeout,t.connection.activityTimeout||1/0),e.clearUnavailableTimer(),e.setConnection(t.connection),e.socket_id=e.connection.id,e.updateState("connected",{socket_id:e.socket_id})}})},ConnectionManager.prototype.buildErrorCallbacks=function(){var t=this,withErrorEmitted=function(e){return function(r){r.error&&t.emit("error",{type:"WebSocketError",error:r.error}),e(r)}};return{tls_only:withErrorEmitted((function(){t.usingTLS=!0,t.updateStrategy(),t.retryIn(0)})),refused:withErrorEmitted((function(){t.disconnect()})),backoff:withErrorEmitted((function(){t.retryIn(1e3)})),retry:withErrorEmitted((function(){t.retryIn(0)}))}},ConnectionManager.prototype.setConnection=function(t){for(var e in this.connection=t,this.connectionCallbacks)this.connection.bind(e,this.connectionCallbacks[e]);this.resetActivityCheck()},ConnectionManager.prototype.abandonConnection=function(){if(this.connection){for(var t in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);var e=this.connection;return this.connection=null,e}},ConnectionManager.prototype.updateState=function(t,e){var r=this.state;if(this.state=t,r!==t){var n=t;"connected"===n&&(n+=" with new socket ID "+e.socket_id),S.debug("State changed",r+" -> "+n),this.timeline.info({state:t,params:e}),this.emit("state_change",{previous:r,current:t}),this.emit(t,e)}},ConnectionManager.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},ConnectionManager}(b),ot=function(){function Channels(){this.channels={}}return Channels.prototype.add=function(t,e){return this.channels[t]||(this.channels[t]=function createChannel(t,e){return 0===t.indexOf("private-encrypted-")?at.createEncryptedChannel(t,e):0===t.indexOf("private-")?at.createPrivateChannel(t,e):0===t.indexOf("presence-")?at.createPresenceChannel(t,e):at.createChannel(t,e)}(t,e)),this.channels[t]},Channels.prototype.all=function(){return function values(t){var e=[];return objectApply(t,(function(t){e.push(t)})),e}(this.channels)},Channels.prototype.find=function(t){return this.channels[t]},Channels.prototype.remove=function(t){var e=this.channels[t];return delete this.channels[t],e},Channels.prototype.disconnect=function(){objectApply(this.channels,(function(t){t.disconnect()}))},Channels}();var at={createChannels:function(){return new ot},createConnectionManager:function(t,e){return new st(t,e)},createChannel:function(t,e){return new J(t,e)},createPrivateChannel:function(t,e){return new X(t,e)},createPresenceChannel:function(t,e){return new Q(t,e)},createEncryptedChannel:function(t,e){return new nt(t,e)},createTimelineSender:function(t,e){return new N(t,e)},createAuthorizer:function(t,e){return e.authorizer?e.authorizer(t,e):new H(t,e)},createHandshake:function(t,e){return new D(t,e)},createAssistantToTheTransportManager:function(t,e,r){return new I(t,e,r)}},ct=function(){function TransportManager(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}return TransportManager.prototype.getAssistant=function(t){return at.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},TransportManager.prototype.isAlive=function(){return this.livesLeft>0},TransportManager.prototype.reportDeath=function(){this.livesLeft-=1},TransportManager}(),ut=function(){function SequentialStrategy(t,e){this.strategies=t,this.loop=Boolean(e.loop),this.failFast=Boolean(e.failFast),this.timeout=e.timeout,this.timeoutLimit=e.timeoutLimit}return SequentialStrategy.prototype.isSupported=function(){return any(this.strategies,d.method("isSupported"))},SequentialStrategy.prototype.connect=function(t,e){var r=this,n=this.strategies,i=0,s=this.timeout,o=null,tryNextStrategy=function(a,c){c?e(null,c):(i+=1,r.loop&&(i%=n.length),i<n.length?(s&&(s*=2,r.timeoutLimit&&(s=Math.min(s,r.timeoutLimit))),o=r.tryStrategy(n[i],t,{timeout:s,failFast:r.failFast},tryNextStrategy)):e(!0))};return o=this.tryStrategy(n[i],t,{timeout:s,failFast:this.failFast},tryNextStrategy),{abort:function(){o.abort()},forceMinPriority:function(e){t=e,o&&o.forceMinPriority(e)}}},SequentialStrategy.prototype.tryStrategy=function(t,e,r,n){var i=null,s=null;return r.timeout>0&&(i=new f(r.timeout,(function(){s.abort(),n(!0)}))),s=t.connect(e,(function(t,e){t&&i&&i.isRunning()&&!r.failFast||(i&&i.ensureAborted(),n(t,e))})),{abort:function(){i&&i.ensureAborted(),s.abort()},forceMinPriority:function(t){s.forceMinPriority(t)}}},SequentialStrategy}(),ht=function(){function BestConnectedEverStrategy(t){this.strategies=t}return BestConnectedEverStrategy.prototype.isSupported=function(){return any(this.strategies,d.method("isSupported"))},BestConnectedEverStrategy.prototype.connect=function(t,e){return function connect(t,e,r){var n=map(t,(function(t,n,i,s){return t.connect(e,r(n,s))}));return{abort:function(){apply(n,abortRunner)},forceMinPriority:function(t){apply(n,(function(e){e.forceMinPriority(t)}))}}}(this.strategies,t,(function(t,r){return function(n,i){r[t].error=n,n?function allRunnersFailed(t){return function collections_all(t,e){for(var r=0;r<t.length;r++)if(!e(t[r],r,t))return!1;return!0}(t,(function(t){return Boolean(t.error)}))}(r)&&e(!0):(apply(r,(function(t){t.forceMinPriority(i.transport.priority)})),e(null,i))}}))},BestConnectedEverStrategy}();function abortRunner(t){t.error||t.aborted||(t.abort(),t.aborted=!0)}var lt=function(){function CachedStrategy(t,e,r){this.strategy=t,this.transports=e,this.ttl=r.ttl||18e5,this.usingTLS=r.useTLS,this.timeline=r.timeline}return CachedStrategy.prototype.isSupported=function(){return this.strategy.isSupported()},CachedStrategy.prototype.connect=function(t,e){var r=this.usingTLS,n=function fetchTransportCache(t){var e=It.getLocalStorage();if(e)try{var r=e[getTransportCacheKey(t)];if(r)return JSON.parse(r)}catch(e){flushTransportCache(t)}return null}(r),i=[this.strategy];if(n&&n.timestamp+this.ttl>=d.now()){var s=this.transports[n.transport];s&&(this.timeline.info({cached:!0,transport:n.transport,latency:n.latency}),i.push(new ut([s],{timeout:2*n.latency+1e3,failFast:!0})))}var o=d.now(),a=i.pop().connect(t,(function cb(n,s){n?(flushTransportCache(r),i.length>0?(o=d.now(),a=i.pop().connect(t,cb)):e(n)):(!function storeTransportCache(t,e,r){var n=It.getLocalStorage();if(n)try{n[getTransportCacheKey(t)]=safeJSONStringify({timestamp:d.now(),transport:e,latency:r})}catch(t){}}(r,s.transport.name,d.now()-o),e(null,s))}));return{abort:function(){a.abort()},forceMinPriority:function(e){t=e,a&&a.forceMinPriority(e)}}},CachedStrategy}();function getTransportCacheKey(t){return"pusherTransport"+(t?"TLS":"NonTLS")}function flushTransportCache(t){var e=It.getLocalStorage();if(e)try{delete e[getTransportCacheKey(t)]}catch(t){}}var ft=function(){function DelayedStrategy(t,e){var r=e.delay;this.strategy=t,this.options={delay:r}}return DelayedStrategy.prototype.isSupported=function(){return this.strategy.isSupported()},DelayedStrategy.prototype.connect=function(t,e){var r,n=this.strategy,i=new f(this.options.delay,(function(){r=n.connect(t,e)}));return{abort:function(){i.ensureAborted(),r&&r.abort()},forceMinPriority:function(e){t=e,r&&r.forceMinPriority(e)}}},DelayedStrategy}(),pt=function(){function IfStrategy(t,e,r){this.test=t,this.trueBranch=e,this.falseBranch=r}return IfStrategy.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},IfStrategy.prototype.connect=function(t,e){return(this.test()?this.trueBranch:this.falseBranch).connect(t,e)},IfStrategy}(),dt=function(){function FirstConnectedStrategy(t){this.strategy=t}return FirstConnectedStrategy.prototype.isSupported=function(){return this.strategy.isSupported()},FirstConnectedStrategy.prototype.connect=function(t,e){var r=this.strategy.connect(t,(function(t,n){n&&r.abort(),e(t,n)}));return r},FirstConnectedStrategy}();function testSupportsStrategy(t){return function(){return t.isSupported()}}var gt,default_strategy=function(t,e){var r={};function defineTransportStrategy(n,i,s,o,a){var c=e(t,n,i,s,o,a);return r[n]=c,c}var n,i={hostNonTLS:t.wsHost+":"+t.wsPort,hostTLS:t.wsHost+":"+t.wssPort,httpPath:t.wsPath},s=extend({},i,{useTLS:!0}),o={hostNonTLS:t.httpHost+":"+t.httpPort,hostTLS:t.httpHost+":"+t.httpsPort,httpPath:t.httpPath},a={loop:!0,timeout:15e3,timeoutLimit:6e4},c=new ct({lives:2,minPingDelay:1e4,maxPingDelay:t.activity_timeout}),u=new ct({lives:2,minPingDelay:1e4,maxPingDelay:t.activity_timeout}),h=defineTransportStrategy("ws","ws",3,i,c),l=defineTransportStrategy("wss","ws",3,s,c),f=defineTransportStrategy("xhr_streaming","xhr_streaming",1,o,u),p=defineTransportStrategy("xhr_polling","xhr_polling",1,o),d=new ut([h],a),g=new ut([l],a),y=new ut([f],a),v=new ut([p],a),m=new ut([new pt(testSupportsStrategy(y),new ht([y,new ft(v,{delay:4e3})]),v)],a);return n=t.useTLS?new ht([d,new ft(m,{delay:2e3})]):new ht([d,new ft(g,{delay:2e3}),new ft(m,{delay:5e3})]),new lt(new dt(new pt(testSupportsStrategy(h),n,m)),r,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},yt=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),vt=function(t){function HTTPRequest(e,r,n){var i=t.call(this)||this;return i.hooks=e,i.method=r,i.url=n,i}return yt(HTTPRequest,t),HTTPRequest.prototype.start=function(t){var e=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){e.close()},It.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(t)},HTTPRequest.prototype.close=function(){this.unloader&&(It.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},HTTPRequest.prototype.onChunk=function(t,e){for(;;){var r=this.advanceBuffer(e);if(!r)break;this.emit("chunk",{status:t,data:r})}this.isBufferTooLong(e)&&this.emit("buffer_too_long")},HTTPRequest.prototype.advanceBuffer=function(t){var e=t.slice(this.position),r=e.indexOf("\n");return-1!==r?(this.position+=r+1,e.slice(0,r)):null},HTTPRequest.prototype.isBufferTooLong=function(t){return this.position===t.length&&t.length>262144},HTTPRequest}(b);!function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSED=3]="CLOSED"}(gt||(gt={}));var mt=gt,bt=1;function getUniqueURL(t){var e=-1===t.indexOf("?")?"?":"&";return t+e+"t="+ +new Date+"&n="+bt++}function randomNumber(t){return Math.floor(Math.random()*t)}var St,xt=function(){function HTTPSocket(t,e){this.hooks=t,this.session=randomNumber(1e3)+"/"+function randomString(t){for(var e=[],r=0;r<t;r++)e.push(randomNumber(32).toString(32));return e.join("")}(8),this.location=function getLocation(t){var e=/([^\?]*)\/*(\??.*)/.exec(t);return{base:e[1],queryString:e[2]}}(e),this.readyState=mt.CONNECTING,this.openStream()}return HTTPSocket.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},HTTPSocket.prototype.ping=function(){this.hooks.sendHeartbeat(this)},HTTPSocket.prototype.close=function(t,e){this.onClose(t,e,!0)},HTTPSocket.prototype.sendRaw=function(t){if(this.readyState!==mt.OPEN)return!1;try{return It.createSocketRequest("POST",getUniqueURL(function getSendURL(t,e){return t.base+"/"+e+"/xhr_send"}(this.location,this.session))).start(t),!0}catch(t){return!1}},HTTPSocket.prototype.reconnect=function(){this.closeStream(),this.openStream()},HTTPSocket.prototype.onClose=function(t,e,r){this.closeStream(),this.readyState=mt.CLOSED,this.onclose&&this.onclose({code:t,reason:e,wasClean:r})},HTTPSocket.prototype.onChunk=function(t){var e;if(200===t.status)switch(this.readyState===mt.OPEN&&this.onActivity(),t.data.slice(0,1)){case"o":e=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(e);break;case"a":e=JSON.parse(t.data.slice(1)||"[]");for(var r=0;r<e.length;r++)this.onEvent(e[r]);break;case"m":e=JSON.parse(t.data.slice(1)||"null"),this.onEvent(e);break;case"h":this.hooks.onHeartbeat(this);break;case"c":e=JSON.parse(t.data.slice(1)||"[]"),this.onClose(e[0],e[1],!0)}},HTTPSocket.prototype.onOpen=function(t){this.readyState===mt.CONNECTING?(t&&t.hostname&&(this.location.base=function replaceHost(t,e){var r=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t);return r[1]+e+r[3]}(this.location.base,t.hostname)),this.readyState=mt.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},HTTPSocket.prototype.onEvent=function(t){this.readyState===mt.OPEN&&this.onmessage&&this.onmessage({data:t})},HTTPSocket.prototype.onActivity=function(){this.onactivity&&this.onactivity()},HTTPSocket.prototype.onError=function(t){this.onerror&&this.onerror(t)},HTTPSocket.prototype.openStream=function(){var t=this;this.stream=It.createSocketRequest("POST",getUniqueURL(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",(function(e){t.onChunk(e)})),this.stream.bind("finished",(function(e){t.hooks.onFinished(t,e)})),this.stream.bind("buffer_too_long",(function(){t.reconnect()}));try{this.stream.start()}catch(e){d.defer((function(){t.onError(e),t.onClose(1006,"Could not start streaming",!1)}))}},HTTPSocket.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},HTTPSocket}(),wt={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}},Et={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){200===e?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}},_t={getRequest:function(t){var e=new(It.getXHRAPI());return e.onreadystatechange=e.onprogress=function(){switch(e.readyState){case 3:e.responseText&&e.responseText.length>0&&t.onChunk(e.status,e.responseText);break;case 4:e.responseText&&e.responseText.length>0&&t.onChunk(e.status,e.responseText),t.emit("finished",e.status),t.close()}},e},abortRequest:function(t){t.onreadystatechange=null,t.abort()}},Ft={getDefaultStrategy:default_strategy,Transports:P,transportConnectionInitializer:function(){this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.useTLS?"s":"")})),this.hooks.isInitialized()?this.changeState("initialized"):this.onClose()},HTTPFactory:{createStreamingSocket:function(t){return this.createSocket(wt,t)},createPollingSocket:function(t){return this.createSocket(Et,t)},createSocket:function(t,e){return new xt(t,e)},createXHR:function(t,e){return this.createRequest(_t,t,e)},createRequest:function(t,e,r){return new vt(t,e,r)}},setup:function(t){t.ready()},getLocalStorage:function(){},getClientFeatures:function(){return keys(filterObject({ws:P.ws},(function(t){return t.isSupported({})})))},getProtocol:function(){return"http:"},isXHRSupported:function(){return!0},createSocketRequest:function(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);throw"Cross-origin HTTP requests are not supported"},createXHR:function(){return new(this.getXHRAPI())},createWebSocket:function(t){return new(this.getWebSocketAPI())(t)},addUnloadListener:function(t){},removeUnloadListener:function(t){}},At=r(18),Ct=r(19),Tt=function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}(),Pt=new(function(t){function NetInfo(){return null!==t&&t.apply(this,arguments)||this}return Tt(NetInfo,t),NetInfo.prototype.isOnline=function(){return!0},NetInfo}(b)),xhr_auth=function(t,e,r){var n,i=this;for(var s in(n=It.createXHR()).open("POST",i.options.authEndpoint,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)n.setRequestHeader(s,this.authOptions.headers[s]);return n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var t,e=!1;try{t=JSON.parse(n.responseText),e=!0}catch(t){r(!0,"JSON returned from auth endpoint was invalid, yet status code was 200. Data was: "+n.responseText)}e&&r(!1,t)}else{var s=G.buildLogSuffix("authenticationEndpoint");S.error("Unable to retrieve auth string from auth endpoint - received status "+n.status+" from "+i.options.authEndpoint+". Clients must be authenticated to join private or presence channels. "+s),r(!0,n.status)}},n.send(this.composeQuery(e)),n},It={getDefaultStrategy:Ft.getDefaultStrategy,Transports:Ft.Transports,setup:Ft.setup,getProtocol:Ft.getProtocol,isXHRSupported:Ft.isXHRSupported,createSocketRequest:Ft.createSocketRequest,getLocalStorage:Ft.getLocalStorage,createXHR:Ft.createXHR,createWebSocket:Ft.createWebSocket,addUnloadListener:Ft.addUnloadListener,removeUnloadListener:Ft.removeUnloadListener,transportConnectionInitializer:Ft.transportConnectionInitializer,HTTPFactory:Ft.HTTPFactory,TimelineTransport:{name:"xhr",getAgent:function(t,e){return function(r,n){var i="http"+(e?"s":"")+"://"+(t.host||t.options.host)+t.options.path;i+="/2?"+buildQueryString(r);var s=It.createXHR();s.open("GET",i,!0),s.onreadystatechange=function(){if(4===s.readyState){var e=s.status,r=s.responseText;if(200!==e)return void S.debug("TimelineSender Error: received "+e+" from stats.pusher.com");try{var n=JSON.parse(r).host}catch(t){S.debug("TimelineSenderError: invalid response "+r)}n&&(t.host=n)}},s.send()}}},getAuthorizers:function(){return{ajax:xhr_auth}},getWebSocketAPI:function(){return At.Client},getXHRAPI:function(){return Ct.XMLHttpRequest},getNetwork:function(){return Pt}};!function(t){t[t.ERROR=3]="ERROR",t[t.INFO=6]="INFO",t[t.DEBUG=7]="DEBUG"}(St||(St={}));var Rt=St,Ot=function(){function Timeline(t,e,r){this.key=t,this.session=e,this.events=[],this.options=r||{},this.sent=0,this.uniqueID=0}return Timeline.prototype.log=function(t,e){t<=this.options.level&&(this.events.push(extend({},e,{timestamp:d.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},Timeline.prototype.error=function(t){this.log(Rt.ERROR,t)},Timeline.prototype.info=function(t){this.log(Rt.INFO,t)},Timeline.prototype.debug=function(t){this.log(Rt.DEBUG,t)},Timeline.prototype.isEmpty=function(){return 0===this.events.length},Timeline.prototype.send=function(t,e){var r=this,n=extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(n,(function(t,n){t||r.sent++,e&&e(t,n)})),!0},Timeline.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},Timeline}(),Bt=function(){function TransportStrategy(t,e,r,n){this.name=t,this.priority=e,this.transport=r,this.options=n||{}}return TransportStrategy.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},TransportStrategy.prototype.connect=function(t,e){var r=this;if(!this.isSupported())return failAttempt(new K,e);if(this.priority<t)return failAttempt(new M,e);var n=!1,i=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),s=null,onInitialized=function(){i.unbind("initialized",onInitialized),i.connect()},onOpen=function(){s=at.createHandshake(i,(function(t){n=!0,unbindListeners(),e(null,t)}))},onError=function(t){unbindListeners(),e(t)},onClosed=function(){var t;unbindListeners(),t=safeJSONStringify(i),e(new U(t))},unbindListeners=function(){i.unbind("initialized",onInitialized),i.unbind("open",onOpen),i.unbind("error",onError),i.unbind("closed",onClosed)};return i.bind("initialized",onInitialized),i.bind("open",onOpen),i.bind("error",onError),i.bind("closed",onClosed),i.initialize(),{abort:function(){n||(unbindListeners(),s?s.close():i.close())},forceMinPriority:function(t){n||r.priority<t&&(s?s.close():i.close())}}},TransportStrategy}();function failAttempt(t,e){return d.defer((function(){e(t)})),{abort:function(){},forceMinPriority:function(){}}}var kt=It.Transports,strategy_builder_defineTransport=function(t,e,r,n,i,s){var o=kt[r];if(!o)throw new V(r);return!(t.enabledTransports&&-1===arrayIndexOf(t.enabledTransports,e)||t.disabledTransports&&-1!==arrayIndexOf(t.disabledTransports,e))?new Bt(e,n,s?s.getAssistant(o):o,extend({key:t.key,useTLS:t.useTLS,timeline:t.timeline,ignoreNullOrigin:t.ignoreNullOrigin},i)):Dt},Dt={isSupported:function(){return!1},connect:function(t,e){var r=d.defer((function(){e(new K)}));return{abort:function(){r.ensureAborted()},forceMinPriority:function(){}}}},getGlobalConfig=function(){return{wsHost:g.host,wsPort:g.ws_port,wssPort:g.wss_port,wsPath:g.ws_path,httpHost:g.sockjs_host,httpPort:g.sockjs_http_port,httpsPort:g.sockjs_https_port,httpPath:g.sockjs_path,statsHost:g.stats_host,authEndpoint:g.channel_auth_endpoint,authTransport:g.channel_auth_transport,activity_timeout:g.activity_timeout,pong_timeout:g.pong_timeout,unavailable_timeout:g.unavailable_timeout}},getClusterConfig=function(t){return{wsHost:"ws-"+t+".pusher.com",httpHost:"sockjs-"+t+".pusher.com"}},Ht=function(){function Pusher(t,e){var r=this;if(function checkAppKey(t){if(null==t)throw"You must pass your app key when you instantiate Pusher."}(t),!(e=e||{}).cluster&&!e.wsHost&&!e.httpHost){var n=G.buildLogSuffix("javascriptQuickStart");S.warn("You should always specify a cluster when connecting. "+n)}this.key=t,this.config=extend(getGlobalConfig(),e.cluster?getClusterConfig(e.cluster):{},e),this.channels=at.createChannels(),this.global_emitter=new b,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new Ot(this.key,this.sessionID,{cluster:this.config.cluster,features:Pusher.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Rt.INFO,version:g.VERSION}),this.config.disableStats||(this.timelineSender=at.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+It.TimelineTransport.name}));this.connection=at.createConnectionManager(this.key,extend({getStrategy:function(t){var e=extend({},r.config,t);return It.getDefaultStrategy(e,strategy_builder_defineTransport)},timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{useTLS:this.shouldUseTLS()})),this.connection.bind("connected",(function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isUsingTLS())})),this.connection.bind("message",(function(t){var e=0===t.event.indexOf("pusher_internal:");if(t.channel){var n=r.channel(t.channel);n&&n.handleEvent(t)}e||r.global_emitter.emit(t.event,t.data)})),this.connection.bind("connecting",(function(){r.channels.disconnect()})),this.connection.bind("disconnected",(function(){r.channels.disconnect()})),this.connection.bind("error",(function(t){S.warn(t)})),Pusher.instances.push(this),this.timeline.info({instances:Pusher.instances.length}),Pusher.isReady&&this.connect()}return Pusher.ready=function(){Pusher.isReady=!0;for(var t=0,e=Pusher.instances.length;t<e;t++)Pusher.instances[t].connect()},Pusher.getClientFeatures=function(){return keys(filterObject({ws:It.Transports.ws},(function(t){return t.isSupported({})})))},Pusher.prototype.channel=function(t){return this.channels.find(t)},Pusher.prototype.allChannels=function(){return this.channels.all()},Pusher.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isUsingTLS(),e=this.timelineSender;this.timelineSenderTimer=new p(6e4,(function(){e.send(t)}))}},Pusher.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},Pusher.prototype.bind=function(t,e,r){return this.global_emitter.bind(t,e,r),this},Pusher.prototype.unbind=function(t,e,r){return this.global_emitter.unbind(t,e,r),this},Pusher.prototype.bind_global=function(t){return this.global_emitter.bind_global(t),this},Pusher.prototype.unbind_global=function(t){return this.global_emitter.unbind_global(t),this},Pusher.prototype.unbind_all=function(t){return this.global_emitter.unbind_all(),this},Pusher.prototype.subscribeAll=function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},Pusher.prototype.subscribe=function(t){var e=this.channels.add(t,this);return e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==this.connection.state||e.subscribe(),e},Pusher.prototype.unsubscribe=function(t){var e=this.channels.find(t);e&&e.subscriptionPending?e.cancelSubscription():(e=this.channels.remove(t))&&"connected"===this.connection.state&&e.unsubscribe()},Pusher.prototype.send_event=function(t,e,r){return this.connection.send_event(t,e,r)},Pusher.prototype.shouldUseTLS=function(){return"https:"===It.getProtocol()||(!0===this.config.forceTLS||Boolean(this.config.encrypted))},Pusher.instances=[],Pusher.isReady=!1,Pusher.logToConsole=!1,Pusher.Runtime=It,Pusher.ScriptReceivers=It.ScriptReceivers,Pusher.DependenciesReceivers=It.DependenciesReceivers,Pusher.auth_callbacks=It.auth_callbacks,Pusher}(),Nt=e.default=Ht;It.setup(Ht)}])},function(t,e,r){t.exports=r.p+"assets/29a621d83b8d6e1411fe1ce7ca0d755f.png"},function(t,e,r){var n=r(89),i=r(22),s=i;s.v1=n,s.v4=i,t.exports=s},function(t,e,r){"use strict";t.exports=r(90)},function(t,e){t.exports=function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function _setPrototypeOf(e,r){return t.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,e){return t.__proto__=e,t},_setPrototypeOf(e,r)}t.exports=_setPrototypeOf},function(t,e,r){"use strict";
/** @license React v16.12.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(24),i="function"==typeof Symbol&&Symbol.for,s=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,c=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,h=i?Symbol.for("react.provider"):60109,l=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113;i&&Symbol.for("react.suspense_list");var d=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var y="function"==typeof Symbol&&Symbol.iterator;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function E(t,e,r){this.props=t,this.context=e,this.refs=m,this.updater=r||v}function F(){}function G(t,e,r){this.props=t,this.context=e,this.refs=m,this.updater=r||v}E.prototype.isReactComponent={},E.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(B(85));this.updater.enqueueSetState(this,t,e,"setState")},E.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},F.prototype=E.prototype;var b=G.prototype=new F;b.constructor=G,n(b,E.prototype),b.isPureReactComponent=!0;var x={current:null},w={current:null},_=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function M(t,e,r){var n,i={},o=null,a=null;if(null!=e)for(n in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)_.call(e,n)&&!A.hasOwnProperty(n)&&(i[n]=e[n]);var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(n in c=t.defaultProps)void 0===i[n]&&(i[n]=c[n]);return{$$typeof:s,type:t,key:o,ref:a,props:i,_owner:w.current}}function N(t){return"object"==typeof t&&null!==t&&t.$$typeof===s}var C=/\/+/g,P=[];function Q(t,e,r,n){if(P.length){var i=P.pop();return i.result=t,i.keyPrefix=e,i.func=r,i.context=n,i.count=0,i}return{result:t,keyPrefix:e,func:r,context:n,count:0}}function R(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>P.length&&P.push(t)}function U(t,e,r){return null==t?0:function S(t,e,r,n){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var a=!1;if(null===t)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case s:case o:a=!0}}if(a)return r(n,t,""===e?"."+T(t,0):e),1;if(a=0,e=""===e?".":e+":",Array.isArray(t))for(var c=0;c<t.length;c++){var u=e+T(i=t[c],c);a+=S(i,u,r,n)}else if(null===t||"object"!=typeof t?u=null:u="function"==typeof(u=y&&t[y]||t["@@iterator"])?u:null,"function"==typeof u)for(t=u.call(t),c=0;!(i=t.next()).done;)a+=S(i=i.value,u=e+T(i,c++),r,n);else if("object"===i)throw r=""+t,Error(B(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return a}(t,"",e,r)}function T(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function escape(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function ca(t,e){t.func.call(t.context,e,t.count++)}function da(t,e,r){var n=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?V(t,n,r,(function(t){return t})):null!=t&&(N(t)&&(t=function ba(t,e){return{$$typeof:s,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(C,"$&/")+"/")+r)),n.push(t))}function V(t,e,r,n,i){var s="";null!=r&&(s=(""+r).replace(C,"$&/")+"/"),U(t,da,e=Q(e,s,n,i)),R(e)}function W(){var t=x.current;if(null===t)throw Error(B(321));return t}var I={Children:{map:function(t,e,r){if(null==t)return t;var n=[];return V(t,n,null,e,r),n},forEach:function(t,e,r){if(null==t)return t;U(t,ca,e=Q(null,null,e,r)),R(e)},count:function(t){return U(t,(function(){return null}),null)},toArray:function(t){var e=[];return V(t,e,null,(function(t){return t})),e},only:function(t){if(!N(t))throw Error(B(143));return t}},createRef:function(){return{current:null}},Component:E,PureComponent:G,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:l,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:h,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:f,render:t}},lazy:function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return W().useCallback(t,e)},useContext:function(t,e){return W().useContext(t,e)},useEffect:function(t,e){return W().useEffect(t,e)},useImperativeHandle:function(t,e,r){return W().useImperativeHandle(t,e,r)},useDebugValue:function(){},useLayoutEffect:function(t,e){return W().useLayoutEffect(t,e)},useMemo:function(t,e){return W().useMemo(t,e)},useReducer:function(t,e,r){return W().useReducer(t,e,r)},useRef:function(t){return W().useRef(t)},useState:function(t){return W().useState(t)},Fragment:a,Profiler:u,StrictMode:c,Suspense:p,createElement:M,cloneElement:function(t,e,r){if(null==t)throw Error(B(267,t));var i=n({},t.props),o=t.key,a=t.ref,c=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,c=w.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)_.call(e,h)&&!A.hasOwnProperty(h)&&(i[h]=void 0===e[h]&&void 0!==u?u[h]:e[h])}var h=arguments.length-2;if(1===h)i.children=r;else if(1<h){u=Array(h);for(var l=0;l<h;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:s,type:t.type,key:o,ref:a,props:i,_owner:c}},createFactory:function(t){var e=M.bind(null,t);return e.type=t,e},isValidElement:N,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:x,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:n}},O={default:I},k=O&&I||O;t.exports=k.default||k},function(t,e){t.exports=function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw s}}return r}}},function(t,e){t.exports=function _objectWithoutPropertiesLoose(t,e){if(null==t)return{};var r,n,i={},s=Object.keys(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}},function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,s=Object.create(i.prototype),o=new Context(n||[]);return s._invoke=function makeInvokeMethod(t,e,r){var n=c;return function invoke(i,s){if(n===h)throw new Error("Generator is already running");if(n===l){if("throw"===i)throw s;return doneResult()}for(r.method=i,r.arg=s;;){var o=r.delegate;if(o){var a=maybeInvokeDelegate(o,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===c)throw n=l,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var p=tryCatch(t,e,r);if("normal"===p.type){if(n=r.done?l:u,p.arg===f)continue;return{value:p.arg,done:r.done}}"throw"===p.type&&(n=l,r.method="throw",r.arg=p.arg)}}}(t,r,o),s}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var c="suspendedStart",u="suspendedYield",h="executing",l="completed",f={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};p[s]=function(){return this};var d=Object.getPrototypeOf,g=d&&d(d(values([])));g&&g!==r&&n.call(g,s)&&(p=g);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function AsyncIterator(t){var e;this._invoke=function enqueue(r,i){function callInvokeWithMethodAndArg(){return new Promise((function(e,s){!function invoke(e,r,i,s){var o=tryCatch(t[e],t,r);if("throw"!==o.type){var a=o.arg,c=a.value;return c&&"object"==typeof c&&n.call(c,"__await")?Promise.resolve(c.__await).then((function(t){invoke("next",t,i,s)}),(function(t){invoke("throw",t,i,s)})):Promise.resolve(c).then((function(t){a.value=t,i(a)}),(function(t){return invoke("throw",t,i,s)}))}s(o.arg)}(r,i,e,s)}))}return e=e?e.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,maybeInvokeDelegate(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var i=tryCatch(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var s=i.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,f):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function next(){for(;++i<t.length;)if(n.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=e,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:e,done:!0}}return GeneratorFunction.prototype=y.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[a]=GeneratorFunction.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[o]=function(){return this},t.AsyncIterator=AsyncIterator,t.async=function(e,r,n,i){var s=new AsyncIterator(wrap(e,r,n,i));return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},defineIteratorMethods(y),y[a]="Generator",y[s]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function next(){for(;e.length;){var r=e.pop();if(r in t)return next.value=r,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function handle(n,i){return o.type="throw",o.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return handle("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(a&&c){if(this.prev<s.catchLoc)return handle(s.catchLoc,!0);if(this.prev<s.finallyLoc)return handle(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return handle(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return handle(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;resetTryEntry(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:values(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){"use strict";var n=r(6),i=r(31),s=r(56),o=r(40);function createInstance(t){var e=new s(t),r=i(s.prototype.request,e);return n.extend(r,s.prototype,e),n.extend(r,e),r}var a=createInstance(r(33));a.Axios=s,a.create=function create(t){return createInstance(o(a.defaults,t))},a.Cancel=r(41),a.CancelToken=r(78),a.isCancel=r(32),a.all=function all(t){return Promise.all(t)},a.spread=r(79),t.exports=a,t.exports.default=a},function(t,e){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function isBuffer(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,r){"use strict";var n=r(6),i=r(17),s=r(57),o=r(58),a=r(40);function Axios(t){this.defaults=t,this.interceptors={request:new s,response:new s}}Axios.prototype.request=function request(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method=t.method?t.method.toLowerCase():"get";var e=[o,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach((function unshiftRequestInterceptors(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function pushResponseInterceptors(t){e.push(t.fulfilled,t.rejected)}));e.length;)r=r.then(e.shift(),e.shift());return r},Axios.prototype.getUri=function getUri(t){return t=a(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function forEachMethodNoData(t){Axios.prototype[t]=function(e,r){return this.request(n.merge(r||{},{method:t,url:e}))}})),n.forEach(["post","put","patch"],(function forEachMethodWithData(t){Axios.prototype[t]=function(e,r,i){return this.request(n.merge(i||{},{method:t,url:e,data:r}))}})),t.exports=Axios},function(t,e,r){"use strict";var n=r(6);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},InterceptorManager.prototype.eject=function eject(t){this.handlers[t]&&(this.handlers[t]=null)},InterceptorManager.prototype.forEach=function forEach(t){n.forEach(this.handlers,(function forEachHandler(e){null!==e&&t(e)}))},t.exports=InterceptorManager},function(t,e,r){"use strict";var n=r(6),i=r(59),s=r(32),o=r(33),a=r(76),c=r(77);function throwIfCancellationRequested(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function dispatchRequest(t){return throwIfCancellationRequested(t),t.baseURL&&!a(t.url)&&(t.url=c(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],(function cleanHeaderConfig(e){delete t.headers[e]})),(t.adapter||o.adapter)(t).then((function onAdapterResolution(e){return throwIfCancellationRequested(t),e.data=i(e.data,e.headers,t.transformResponse),e}),(function onAdapterRejection(e){return s(e)||(throwIfCancellationRequested(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,r){"use strict";var n=r(6);t.exports=function transformData(t,e,r){return n.forEach(r,(function transform(r){t=r(t,e)})),t}},function(t,e,r){"use strict";var n=r(6);t.exports=function normalizeHeaderName(t,e){n.forEach(t,(function processHeader(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])}))}},function(t,e,r){"use strict";var n=r(6),i=r(34),s=r(17),o=r(14),a=r(19),c=r(36).http,u=r(36).https,h=r(13),l=r(70),f=r(71),p=r(18),d=r(35),g=/https:?/;t.exports=function httpAdapter(t){return new Promise((function dispatchHttpRequest(e,r){var y,v=function resolve(t){clearTimeout(y),e(t)},m=function reject(t){clearTimeout(y),r(t)},b=t.data,S=t.headers;if(S["User-Agent"]||S["user-agent"]||(S["User-Agent"]="axios/"+f.version),b&&!n.isStream(b)){if(Buffer.isBuffer(b));else if(n.isArrayBuffer(b))b=Buffer.from(new Uint8Array(b));else{if(!n.isString(b))return m(p("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",t));b=Buffer.from(b,"utf-8")}S["Content-Length"]=b.length}var x=void 0;t.auth&&(x=(t.auth.username||"")+":"+(t.auth.password||""));var w=h.parse(t.url),E=w.protocol||"http:";if(!x&&w.auth){var _=w.auth.split(":");x=(_[0]||"")+":"+(_[1]||"")}x&&delete S.Authorization;var F=g.test(E),A=F?t.httpsAgent:t.httpAgent,C={path:s(w.path,t.params,t.paramsSerializer).replace(/^\?/,""),method:t.method.toUpperCase(),headers:S,agent:A,auth:x};t.socketPath?C.socketPath=t.socketPath:(C.hostname=w.hostname,C.port=w.port);var T,P=t.proxy;if(!P&&!1!==P){var I=E.slice(0,-1)+"_proxy",R=process.env[I]||process.env[I.toUpperCase()];if(R){var O=h.parse(R),B=process.env.no_proxy||process.env.NO_PROXY,k=!0;if(B)k=!B.split(",").map((function trim(t){return t.trim()})).some((function proxyMatch(t){return!!t&&("*"===t||("."===t[0]&&w.hostname.substr(w.hostname.length-t.length)===t&&t.match(/\./g).length===w.hostname.match(/\./g).length||w.hostname===t))}));if(k&&(P={host:O.hostname,port:O.port},O.auth)){var D=O.auth.split(":");P.auth={username:D[0],password:D[1]}}}}if(P&&(C.hostname=P.host,C.host=P.host,C.headers.host=w.hostname+(w.port?":"+w.port:""),C.port=P.port,C.path=E+"//"+w.hostname+(w.port?":"+w.port:"")+C.path,P.auth)){var H=Buffer.from(P.auth.username+":"+P.auth.password,"utf8").toString("base64");C.headers["Proxy-Authorization"]="Basic "+H}var N=F&&(!P||g.test(P.protocol));t.transport?T=t.transport:0===t.maxRedirects?T=N?a:o:(t.maxRedirects&&(C.maxRedirects=t.maxRedirects),T=N?u:c),t.maxContentLength&&t.maxContentLength>-1&&(C.maxBodyLength=t.maxContentLength);var j=T.request(C,(function handleResponse(e){if(!j.aborted){var r=e;switch(e.headers["content-encoding"]){case"gzip":case"compress":case"deflate":r=204===e.statusCode?r:r.pipe(l.createUnzip()),delete e.headers["content-encoding"]}var n=e.req||j,s={status:e.statusCode,statusText:e.statusMessage,headers:e.headers,config:t,request:n};if("stream"===t.responseType)s.data=r,i(v,m,s);else{var o=[];r.on("data",(function handleStreamData(e){o.push(e),t.maxContentLength>-1&&Buffer.concat(o).length>t.maxContentLength&&(r.destroy(),m(p("maxContentLength size of "+t.maxContentLength+" exceeded",t,null,n)))})),r.on("error",(function handleStreamError(e){j.aborted||m(d(e,t,null,n))})),r.on("end",(function handleStreamEnd(){var e=Buffer.concat(o);"arraybuffer"!==t.responseType&&(e=e.toString(t.responseEncoding)),s.data=e,i(v,m,s)}))}}}));j.on("error",(function handleRequestError(e){j.aborted||m(d(e,t,null,j))})),t.timeout&&(y=setTimeout((function handleRequestTimeout(){j.abort(),m(p("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",j))}),t.timeout)),t.cancelToken&&t.cancelToken.promise.then((function onCanceled(t){j.aborted||(j.abort(),m(t))})),n.isStream(b)?b.on("error",(function handleStreamError(e){m(d(e,t,null,j))})).pipe(j):j.end(b)}))}},function(t,e,r){"undefined"==typeof process||"renderer"===process.type?t.exports=r(63):t.exports=r(65)},function(t,e,r){function load(){var t;try{t=e.storage.debug}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=r(38)).log=function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function formatArgs(t){var r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var i=0,s=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(i++,"%c"===t&&(s=i))})),t.splice(s,0,n)},e.save=function save(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=load,e.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function localstorage(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(load())},function(t,e){var r=1e3,n=60*r,i=60*n,s=24*i,o=365.25*s;function plural(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}t.exports=function(t,e){e=e||{};var a=typeof t;if("string"===a&&t.length>0)return function parse(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*o;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(t);if("number"===a&&!1===isNaN(t))return e.long?function fmtLong(t){return plural(t,s,"day")||plural(t,i,"hour")||plural(t,n,"minute")||plural(t,r,"second")||t+" ms"}(t):function fmtShort(t){if(t>=s)return Math.round(t/s)+"d";if(t>=i)return Math.round(t/i)+"h";if(t>=n)return Math.round(t/n)+"m";if(t>=r)return Math.round(t/r)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,r){var n=r(66),i=r(39);(e=t.exports=r(38)).init=function init(t){t.inspectOpts={};for(var r=Object.keys(e.inspectOpts),n=0;n<r.length;n++)t.inspectOpts[r[n]]=e.inspectOpts[r[n]]},e.log=function log(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},e.formatArgs=function formatArgs(t){var r=this.namespace;if(this.useColors){var n=this.color,i="[3"+(n<8?n:"8;5;"+n),s="  "+i+";1m"+r+" [0m";t[0]=s+t[0].split("\n").join("\n"+s),t.push(i+"m+"+e.humanize(this.diff)+"[0m")}else t[0]=function getDate(){return e.inspectOpts.hideDate?"":(new Date).toISOString()+" "}()+r+" "+t[0]},e.save=function save(t){null==t?delete process.env.DEBUG:process.env.DEBUG=t},e.load=load,e.useColors=function useColors(){return"colors"in e.inspectOpts?Boolean(e.inspectOpts.colors):n.isatty(process.stderr.fd)},e.colors=[6,2,3,4,5,1];try{var s=r(67);s&&s.level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}function load(){return process.env.DEBUG}e.inspectOpts=Object.keys(process.env).filter((function(t){return/^debug_/i.test(t)})).reduce((function(t,e){var r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(function(t,e){return e.toUpperCase()})),n=process.env[e];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),t[r]=n,t}),{}),e.formatters.o=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts).split("\n").map((function(t){return t.trim()})).join(" ")},e.formatters.O=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts)},e.enable(load())},function(t,e){t.exports=require("tty")},function(t,e,r){"use strict";const n=r(68),i=r(69),s=process.env;let o;function getSupportLevel(t){return function translateLevel(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}(function supportsColor(t){if(!1===o)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(t&&!t.isTTY&&!0!==o)return 0;const e=o?1:0;if("win32"===process.platform){const t=n.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(t=>t in s)||"codeship"===s.CI_NAME?1:e;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if("truecolor"===s.COLORTERM)return 3;if("TERM_PROGRAM"in s){const t=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)?1:"COLORTERM"in s?1:(s.TERM,e)}(t))}i("no-color")||i("no-colors")||i("color=false")?o=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(o=!0),"FORCE_COLOR"in s&&(o=0===s.FORCE_COLOR.length||0!==parseInt(s.FORCE_COLOR,10)),t.exports={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)}},function(t,e){t.exports=require("os")},function(t,e,r){"use strict";t.exports=(t,e)=>{e=e||process.argv;const r=t.startsWith("-")?"":1===t.length?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return-1!==n&&(-1===i||n<i)}},function(t,e){t.exports=require("zlib")},function(t){t.exports=JSON.parse('{"_from":"axios@latest","_id":"axios@0.19.0","_inBundle":false,"_integrity":"sha512-1uvKqKQta3KBxIz14F2v06AEHZ/dIoeKfbTRkK1E5oqjDnuEerLmYTgJB5AiQZHJcljpg1TuRzdjDR06qNk0DQ==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"tag","registry":true,"raw":"axios@latest","name":"axios","escapedName":"axios","rawSpec":"latest","saveSpec":null,"fetchSpec":"latest"},"_requiredBy":["/@botonic/core","/@botonic/plugin-dialogflow","/@botonic/react"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.19.0.tgz","_shasum":"8e09bff3d9122e133f7b8101c8fbdd00ed3d2ab8","_spec":"axios@latest","_where":"/home/vikram/Desktop/Grassroots/node_modules/@botonic/plugin-dialogflow","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundleDependencies":false,"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"1.5.10","is-buffer":"^2.0.2"},"deprecated":false,"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"bundlesize":"^0.17.0","coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^5.2.0","sinon":"^4.5.0","typescript":"^2.8.1","url-search-params":"^0.10.0","webpack":"^1.13.1","webpack-dev-server":"^1.14.1"},"homepage":"https://github.com/axios/axios","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test && bundlesize","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","version":"0.19.0"}')},function(t,e,r){"use strict";var n=r(6),i=r(34),s=r(17),o=r(73),a=r(74),c=r(18);t.exports=function xhrAdapter(t){return new Promise((function dispatchXhrRequest(e,u){var h=t.data,l=t.headers;n.isFormData(h)&&delete l["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",d=t.auth.password||"";l.Authorization="Basic "+btoa(p+":"+d)}if(f.open(t.method.toUpperCase(),s(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f.onreadystatechange=function handleLoad(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in f?o(f.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:t,request:f};i(e,u,n),f=null}},f.onabort=function handleAbort(){f&&(u(c("Request aborted",t,"ECONNABORTED",f)),f=null)},f.onerror=function handleError(){u(c("Network Error",t,null,f)),f=null},f.ontimeout=function handleTimeout(){u(c("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},n.isStandardBrowserEnv()){var g=r(75),y=(t.withCredentials||a(t.url))&&t.xsrfCookieName?g.read(t.xsrfCookieName):void 0;y&&(l[t.xsrfHeaderName]=y)}if("setRequestHeader"in f&&n.forEach(l,(function setRequestHeader(t,e){void 0===h&&"content-type"===e.toLowerCase()?delete l[e]:f.setRequestHeader(e,t)})),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function onCanceled(t){f&&(f.abort(),u(t),f=null)})),void 0===h&&(h=null),f.send(h)}))}},function(t,e,r){"use strict";var n=r(6),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function parseHeaders(t){var e,r,s,o={};return t?(n.forEach(t.split("\n"),(function parser(t){if(s=t.indexOf(":"),e=n.trim(t.substr(0,s)).toLowerCase(),r=n.trim(t.substr(s+1)),e){if(o[e]&&i.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([r]):o[e]?o[e]+", "+r:r}})),o):o}},function(t,e,r){"use strict";var n=r(6);t.exports=n.isStandardBrowserEnv()?function standardBrowserEnv(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function resolveURL(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=resolveURL(window.location.href),function isURLSameOrigin(e){var r=n.isString(e)?resolveURL(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function isURLSameOrigin(){return!0}},function(t,e,r){"use strict";var n=r(6);t.exports=n.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(t,e,r,i,s,o){var a=[];a.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function read(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function remove(t){this.write(t,"",Date.now()-864e5)}}}():{write:function write(){},read:function read(){return null},remove:function remove(){}}},function(t,e,r){"use strict";t.exports=function isAbsoluteURL(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function combineURLs(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var n=r(41);function CancelToken(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function promiseExecutor(t){e=t}));var r=this;t((function cancel(t){r.reason||(r.reason=new n(t),e(r.reason))}))}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason)throw this.reason},CancelToken.source=function source(){var t;return{token:new CancelToken((function executor(e){t=e})),cancel:t}},t.exports=CancelToken},function(t,e,r){"use strict";t.exports=function spread(t){return function wrap(e){return t.apply(null,e)}}},function(t,e){t.exports=function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}},function(t,e){t.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e){t.exports=require("buffer")},function(t,e){t.exports=require("events")},function(t,e){t.exports=require("net")},function(t,e){t.exports=require("tls")},function(t,e){t.exports=require("child_process")},function(t,e){t.exports=require("fs")},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return d}));var n=r(1),i=r.n(n),s=r(4),o=r.n(s),a=r(5),c=r.n(a),u=r(46),h=r.n(u),l=r(9),f=r.n(l),p=r(15),d=function(){function BotonicPluginDialogflow(t){o()(this,BotonicPluginDialogflow),this.projectID=t.project_id,this.sessionID=h.a.v4(),this.creds=t,this.token=null}return c()(BotonicPluginDialogflow,[{key:"getToken",value:function getToken(){return i.a.async((function getToken$(t){for(;;)switch(t.prev=t.next){case 0:if(this.token){t.next=4;break}return t.next=3,i.a.awrap(this.generateToken(this.creds));case 3:this.token=t.sent;case 4:return t.abrupt("return",this.token);case 5:case"end":return t.stop()}}),null,this)}},{key:"pre",value:function pre(t){var e,r,n;return i.a.async((function pre$(s){for(;;)switch(s.prev=s.next){case 0:return e=t.input,r=t.session,n=t.lastRoutePath,s.prev=1,s.next=4,i.a.awrap(this.dialogflowToInput({input:e,session:r,lastRoutePath:n}));case 4:s.next=13;break;case 6:return s.prev=6,s.t0=s.catch(1),console.log(s.t0.response),s.next=11,i.a.awrap(this.refreshToken());case 11:return s.next=13,i.a.awrap(this.dialogflowToInput({input:e,session:r,lastRoutePath:n}));case 13:return s.abrupt("return",{input:e,session:r,lastRoutePath:n});case 14:case"end":return s.stop()}}),null,this,[[1,6]])}},{key:"post",value:function post(t){return i.a.async((function post$(e){for(;;)switch(e.prev=e.next){case 0:t.input,t.session,t.lastRoutePath,t.response;case 1:case"end":return e.stop()}}))}},{key:"refreshToken",value:function refreshToken(){return i.a.async((function refreshToken$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(this.generateToken(this.creds));case 2:this.token=t.sent;case 3:case"end":return t.stop()}}),null,this)}},{key:"generateToken",value:function generateToken(t){var e,r,n,s,o;return i.a.async((function generateToken$(i){for(;;)switch(i.prev=i.next){case 0:return e={alg:"RS256",typ:"JWT",kid:t.private_key_id},r={iss:t.client_email,sub:t.client_email,iat:p.KJUR.jws.IntDate.get("now"),exp:p.KJUR.jws.IntDate.get("now + 1hour"),aud:"https://dialogflow.googleapis.com/google.cloud.dialogflow.v2.Sessions"},n=JSON.stringify(e),s=JSON.stringify(r),o=p.KJUR.jws.JWS.sign("RS256",n,s,t.private_key),i.abrupt("return",o);case 6:case"end":return i.stop()}}))}},{key:"query",value:function query(t){var e,r=arguments;return i.a.async((function query$(n){for(;;)switch(n.prev=n.next){case 0:return e=r.length>1&&void 0!==r[1]?r[1]:"en-US",n.t0=f.a,n.t1="https://dialogflow.googleapis.com/v2/projects/".concat(this.projectID,"/agent/sessions/").concat(this.sessionID,":detectIntent"),n.t2="Bearer ",n.next=6,i.a.awrap(this.getToken());case 6:return n.t3=n.sent,n.t4=n.t2.concat.call(n.t2,n.t3),n.t5={Authorization:n.t4,"Content-Type":"application/json"},n.t6={queryInput:{text:{text:t,languageCode:e}}},n.t7={method:"post",url:n.t1,headers:n.t5,data:n.t6},n.abrupt("return",(0,n.t0)(n.t7));case 12:case"end":return n.stop()}}),null,this)}},{key:"dialogflowToInput",value:function dialogflowToInput(t){var e,r,n,s,o,a,c,u,h,l,f;return i.a.async((function dialogflowToInput$(p){for(;;)switch(p.prev=p.next){case 0:return e=t.input,r=t.session,n=t.lastRoutePath,s=0,o=null,a=[],c=[],u="",h=null,l=e.data||e.payload||null,p.next=10,i.a.awrap(this.query(l));case 10:return h=p.sent,f=h.data.queryResult,o=f.intent.displayName,s=f.intentDetectionConfidence,c=f.parameters,u=f.fulfillmentText,h=h.data,Object.assign(e,{intent:o,confidence:s,intents:a,entities:c,defaultFallback:u,dialogflowResponse:h}),p.abrupt("return",{input:e,session:r,lastRoutePath:n});case 19:case"end":return p.stop()}}),null,this)}}]),BotonicPluginDialogflow}()},function(t,e,r){var n,i,s=r(27),o=r(29),a=0,c=0;t.exports=function v1(t,e,r){var u=e&&r||0,h=e||[],l=(t=t||{}).node||n,f=void 0!==t.clockseq?t.clockseq:i;if(null==l||null==f){var p=s();null==l&&(l=n=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:c+1,y=d-a+(g-c)/1e4;if(y<0&&void 0===t.clockseq&&(f=f+1&16383),(y<0||d>a)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=d,c=g,i=f;var v=(1e4*(268435455&(d+=122192928e5))+g)%4294967296;h[u++]=v>>>24&255,h[u++]=v>>>16&255,h[u++]=v>>>8&255,h[u++]=255&v;var m=d/4294967296*1e4&268435455;h[u++]=m>>>8&255,h[u++]=255&m,h[u++]=m>>>24&15|16,h[u++]=m>>>16&255,h[u++]=f>>>8|128,h[u++]=255&f;for(var b=0;b<6;++b)h[u+b]=l[b];return e||o(h)}},function(t,e,r){"use strict";t.exports=r(91)},function(t,e,n){"use strict";
/** @license React v16.12.0
 * react-dom-server.node.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(24),s=n(0),o=n(20);function r(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c="function"==typeof Symbol&&Symbol.for,u=c?Symbol.for("react.portal"):60106,h=c?Symbol.for("react.fragment"):60107,l=c?Symbol.for("react.strict_mode"):60108,f=c?Symbol.for("react.profiler"):60114,p=c?Symbol.for("react.provider"):60109,g=c?Symbol.for("react.context"):60110,y=c?Symbol.for("react.concurrent_mode"):60111,v=c?Symbol.for("react.forward_ref"):60112,m=c?Symbol.for("react.suspense"):60113,S=c?Symbol.for("react.suspense_list"):60120,x=c?Symbol.for("react.memo"):60115,w=c?Symbol.for("react.lazy"):60116,_=c?Symbol.for("react.fundamental"):60117,F=c?Symbol.for("react.scope"):60119,A=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function D(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case h:return"Fragment";case u:return"Portal";case f:return"Profiler";case l:return"StrictMode";case m:return"Suspense";case S:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case g:return"Context.Consumer";case p:return"Context.Provider";case v:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case x:return D(t.type);case w:if(t=1===t._status?t._result:null)return D(t)}return null}A.hasOwnProperty("ReactCurrentDispatcher")||(A.ReactCurrentDispatcher={current:null}),A.hasOwnProperty("ReactCurrentBatchConfig")||(A.ReactCurrentBatchConfig={suspense:null});var C={};function E(t,e){for(var r=0|t._threadCount;r<=e;r++)t[r]=t._currentValue2,t._threadCount=r+1}for(var T=new Uint16Array(16),P=0;15>P;P++)T[P]=P+1;T[15]=0;var I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R=Object.prototype.hasOwnProperty,O={},B={};function ua(t){return!!R.call(B,t)||!R.call(O,t)&&(I.test(t)?B[t]=!0:(O[t]=!0,!1))}function J(t,e,r,n,i,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){k[t]=new J(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];k[e]=new J(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){k[t]=new J(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){k[t]=new J(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){k[t]=new J(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){k[t]=new J(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){k[t]=new J(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){k[t]=new J(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){k[t]=new J(t,5,!1,t.toLowerCase(),null,!1)}));var H=/[\-:]([a-z])/g;function M(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(H,M);k[e]=new J(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(H,M);k[e]=new J(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(H,M);k[e]=new J(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){k[t]=new J(t,1,!1,t.toLowerCase(),null,!1)})),k.xlinkHref=new J("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){k[t]=new J(t,1,!1,t.toLowerCase(),null,!0)}));var j=/["'&<>]/;function N(t){if("boolean"==typeof t||"number"==typeof t)return""+t;t=""+t;var e=j.exec(t);if(e){var r,n="",i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}function ya(t,e){var r,n=k.hasOwnProperty(t)?k[t]:null;return(r="style"!==t)&&(r=null!==n?0===n.type:2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])),r||function wa(t,e,r,n){if(null==e||function va(t,e,r,n){if(null!==r&&0===r.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(t,e,n,!1)?"":null!==n?(t=n.attributeName,3===(r=n.type)||4===r&&!0===e?t+'=""':(n.sanitizeURL&&(e=""+e),t+'="'+N(e)+'"')):ua(t)?t+'="'+N(e)+'"':""}var L="function"==typeof Object.is?Object.is:function za(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},U=null,q=null,V=null,K=!1,z=!1,G=null,Y=0;function W(){if(null===U)throw Error(r(321));return U}function Ba(){if(0<Y)throw Error(r(312));return{memoizedState:null,queue:null,next:null}}function Ca(){return null===V?null===q?(K=!1,q=V=Ba()):(K=!0,V=q):null===V.next?(K=!1,V=V.next=Ba()):(K=!0,V=V.next),V}function Da(t,e,r,n){for(;z;)z=!1,Y+=1,V=null,r=t(e,n);return q=U=null,Y=0,V=G=null,r}function Ea(t,e){return"function"==typeof e?e(t):e}function Fa(t,e,r){if(U=W(),V=Ca(),K){var n=V.queue;if(e=n.dispatch,null!==G&&void 0!==(r=G.get(n))){G.delete(n),n=V.memoizedState;do{n=t(n,r.action),r=r.next}while(null!==r);return V.memoizedState=n,[n,e]}return[V.memoizedState,e]}return t=t===Ea?"function"==typeof e?e():e:void 0!==r?r(e):e,V.memoizedState=t,t=(t=V.queue={last:null,dispatch:null}).dispatch=Ga.bind(null,U,t),[V.memoizedState,t]}function Ga(t,e,n){if(!(25>Y))throw Error(r(301));if(t===U)if(z=!0,t={action:n,next:null},null===G&&(G=new Map),void 0===(n=G.get(e)))G.set(e,t);else{for(e=n;null!==e.next;)e=e.next;e.next=t}}function Ha(){}var X=0,$={readContext:function(t){var e=X;return E(t,e),t[e]},useContext:function(t){W();var e=X;return E(t,e),t[e]},useMemo:function(t,e){if(U=W(),e=void 0===e?null:e,null!==(V=Ca())){var r=V.memoizedState;if(null!==r&&null!==e){t:{var n=r[1];if(null===n)n=!1;else{for(var i=0;i<n.length&&i<e.length;i++)if(!L(e[i],n[i])){n=!1;break t}n=!0}}if(n)return r[0]}}return t=t(),V.memoizedState=[t,e],t},useReducer:Fa,useRef:function(t){U=W();var e=(V=Ca()).memoizedState;return null===e?(t={current:t},V.memoizedState=t):e},useState:function(t){return Fa(Ea,t)},useLayoutEffect:function(){},useCallback:function(t){return t},useImperativeHandle:Ha,useEffect:Ha,useDebugValue:Ha,useResponder:function(t,e){return{props:e,responder:t}},useDeferredValue:function(t){return W(),t},useTransition:function(){return W(),[function(t){t()},!1]}},Z={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Ka(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var Q={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},tt=i({menuitem:!0},Q),et={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rt=["Webkit","ms","Moz","O"];Object.keys(et).forEach((function(t){rt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),et[e]=et[t]}))}));var nt=/([A-Z])/g,it=/^ms-/,st=s.Children.toArray,ot=A.ReactCurrentDispatcher,at={listing:!0,pre:!0,textarea:!0},ct=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ut={},ht={};var lt=Object.prototype.hasOwnProperty,ft={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Ya(t,e){if(void 0===t)throw Error(r(152,D(e)||"Component"))}function Za(t,e,n){function d(s,o){var a=o.prototype&&o.prototype.isReactComponent,c=function pa(t,e,r,n){if(n&&("object"==typeof(n=t.contextType)&&null!==n))return E(n,r),n[r];if(t=t.contextTypes){for(var i in r={},t)r[i]=e[i];e=r}else e=C;return e}(o,e,n,a),u=[],h=!1,l={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===u)return null},enqueueReplaceState:function(t,e){h=!0,u=[e]},enqueueSetState:function(t,e){if(null===u)return null;u.push(e)}};if(a){if(a=new o(s.props,c,l),"function"==typeof o.getDerivedStateFromProps){var f=o.getDerivedStateFromProps.call(null,s.props,a.state);null!=f&&(a.state=i({},a.state,f))}}else if(U={},a=o(s.props,c,l),null==(a=Da(o,s.props,a,c))||null==a.render)return void Ya(t=a,o);if(a.props=s.props,a.context=c,a.updater=l,void 0===(l=a.state)&&(a.state=l=null),"function"==typeof a.UNSAFE_componentWillMount||"function"==typeof a.componentWillMount)if("function"==typeof a.componentWillMount&&"function"!=typeof o.getDerivedStateFromProps&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&"function"!=typeof o.getDerivedStateFromProps&&a.UNSAFE_componentWillMount(),u.length){l=u;var p=h;if(u=null,h=!1,p&&1===l.length)a.state=l[0];else{f=p?l[0]:a.state;var d=!0;for(p=p?1:0;p<l.length;p++){var g=l[p];null!=(g="function"==typeof g?g.call(a,f,s.props,c):g)&&(d?(d=!1,f=i({},f,g)):i(f,g))}a.state=f}}else u=null;if(Ya(t=a.render(),o),"function"==typeof a.getChildContext&&"object"==typeof(s=o.childContextTypes)){var y=a.getChildContext();for(var v in y)if(!(v in s))throw Error(r(108,D(o)||"Unknown",v))}y&&(e=i({},e,y))}for(;s.isValidElement(t);){var o=t,a=o.type;if("function"!=typeof a)break;d(o,a)}return{child:t,context:e}}var pt=function(){function a(t,e){s.isValidElement(t)?t.type!==h?t=[t]:(t=t.props.children,t=s.isValidElement(t)?[t]:st(t)):t=st(t),t={type:null,domNamespace:Z.html,children:t,childIndex:0,context:C,footer:""};var n=T[0];if(0===n){var i=T,o=2*(n=i.length);if(!(65536>=o))throw Error(r(304));var a=new Uint16Array(o);for(a.set(i),(T=a)[0]=n+1,i=n;i<o-1;i++)T[i]=i+1;T[o-1]=0}else T[0]=T[n];this.threadID=n,this.stack=[t],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=e,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}var t=a.prototype;return t.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var t=this.threadID;T[t]=T[0],T[0]=t}},t.pushProvider=function(t){var e=++this.contextIndex,r=t.type._context,n=this.threadID;E(r,n);var i=r[n];this.contextStack[e]=r,this.contextValueStack[e]=i,r[n]=t.props.value},t.popProvider=function(){var t=this.contextIndex,e=this.contextStack[t],r=this.contextValueStack[t];this.contextStack[t]=null,this.contextValueStack[t]=null,this.contextIndex--,e[this.threadID]=r},t.clearProviders=function(){for(var t=this.contextIndex;0<=t;t--)this.contextStack[t][this.threadID]=this.contextValueStack[t]},t.read=function(t){if(this.exhausted)return null;var e=X;X=this.threadID;var n=ot.current;ot.current=$;try{for(var i=[""],s=!1;i[0].length<t;){if(0===this.stack.length){this.exhausted=!0;var o=this.threadID;T[o]=T[0],T[0]=o;break}var a=this.stack[this.stack.length-1];if(s||a.childIndex>=a.children.length){var c=a.footer;if(""!==c&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===a.type)this.currentSelectValue=null;else if(null!=a.type&&null!=a.type.type&&a.type.type.$$typeof===p)this.popProvider(a.type);else if(a.type===m){this.suspenseDepth--;var u=i.pop();if(s){s=!1;var h=a.fallbackFrame;if(!h)throw Error(r(303));this.stack.push(h),i[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}i[this.suspenseDepth]+=u}i[this.suspenseDepth]+=c}else{var l=a.children[a.childIndex++],f="";try{f+=this.render(l,a.context,a.domNamespace)}catch(t){if(null!=t&&"function"==typeof t.then)throw Error(r(294));throw t}i.length<=this.suspenseDepth&&i.push(""),i[this.suspenseDepth]+=f}}return i[0]}finally{ot.current=n,X=e}},t.render=function(t,e,n){if("string"==typeof t||"number"==typeof t)return""===(n=""+t)?"":this.makeStaticMarkup?N(n):this.previousWasTextNode?"\x3c!-- --\x3e"+N(n):(this.previousWasTextNode=!0,N(n));if(t=(e=Za(t,e,this.threadID)).child,e=e.context,null===t||!1===t)return"";if(!s.isValidElement(t)){if(null!=t&&null!=t.$$typeof){if((n=t.$$typeof)===u)throw Error(r(257));throw Error(r(258,n.toString()))}return t=st(t),this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),""}var o=t.type;if("string"==typeof o)return this.renderDOM(t,e,n);switch(o){case l:case y:case f:case S:case h:return t=st(t.props.children),this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),"";case m:throw Error(r(294))}if("object"==typeof o&&null!==o)switch(o.$$typeof){case v:U={};var a=o.render(t.props,t.ref);return a=Da(o.render,t.props,a,t.ref),a=st(a),this.stack.push({type:null,domNamespace:n,children:a,childIndex:0,context:e,footer:""}),"";case x:return t=[s.createElement(o.type,i({ref:t.ref},t.props))],this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),"";case p:return n={type:t,domNamespace:n,children:o=st(t.props.children),childIndex:0,context:e,footer:""},this.pushProvider(t),this.stack.push(n),"";case g:o=t.type,a=t.props;var c=this.threadID;return E(o,c),o=st(a.children(o[c])),this.stack.push({type:t,domNamespace:n,children:o,childIndex:0,context:e,footer:""}),"";case _:throw Error(r(338));case w:switch(function na(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(o=t.type),o._status){case 1:return t=[s.createElement(o._result,i({ref:t.ref},t.props))],this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),"";case 2:throw o._result;default:throw Error(r(295))}case F:throw Error(r(343))}throw Error(r(130,null==o?o:typeof o,""))},t.renderDOM=function(t,e,n){var o=t.type.toLowerCase();if(n===Z.html&&Ka(o),!ut.hasOwnProperty(o)){if(!ct.test(o))throw Error(r(65,o));ut[o]=!0}var a=t.props;if("input"===o)a=i({type:void 0},a,{defaultChecked:void 0,defaultValue:void 0,value:null!=a.value?a.value:a.defaultValue,checked:null!=a.checked?a.checked:a.defaultChecked});else if("textarea"===o){var c=a.value;if(null==c){c=a.defaultValue;var u=a.children;if(null!=u){if(null!=c)throw Error(r(92));if(Array.isArray(u)){if(!(1>=u.length))throw Error(r(93));u=u[0]}c=""+u}null==c&&(c="")}a=i({},a,{value:void 0,children:""+c})}else if("select"===o)this.currentSelectValue=null!=a.value?a.value:a.defaultValue,a=i({},a,{value:void 0});else if("option"===o){u=this.currentSelectValue;var h=function Va(t){if(null==t)return t;var e="";return s.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(a.children);if(null!=u){var l=null!=a.value?a.value+"":h;if(c=!1,Array.isArray(u)){for(var f=0;f<u.length;f++)if(""+u[f]===l){c=!0;break}}else c=""+u===l;a=i({selected:void 0,children:void 0},a,{selected:c,children:h})}}if(c=a){if(tt[o]&&(null!=c.children||null!=c.dangerouslySetInnerHTML))throw Error(r(137,o,""));if(null!=c.dangerouslySetInnerHTML){if(null!=c.children)throw Error(r(60));if(!("object"==typeof c.dangerouslySetInnerHTML&&"__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=c.style&&"object"!=typeof c.style)throw Error(r(62,""))}for(S in c=a,u=this.makeStaticMarkup,h=1===this.stack.length,l="<"+t.type,c)if(lt.call(c,S)){var p=c[S];if(null!=p){if("style"===S){f=void 0;var d="",g="";for(f in p)if(p.hasOwnProperty(f)){var y=0===f.indexOf("--"),v=p[f];if(null!=v){if(y)var m=f;else if(m=f,ht.hasOwnProperty(m))m=ht[m];else{var b=m.replace(nt,"-$1").toLowerCase().replace(it,"-ms-");m=ht[m]=b}d+=g+m+":",g=f,d+=y=null==v||"boolean"==typeof v||""===v?"":y||"number"!=typeof v||0===v||et.hasOwnProperty(g)&&et[g]?(""+v).trim():v+"px",g=";"}}p=d||null}f=null;t:if(y=o,v=c,-1===y.indexOf("-"))y="string"==typeof v.is;else switch(y){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":y=!1;break t;default:y=!0}y?ft.hasOwnProperty(S)||(f=ua(f=S)&&null!=p?f+'="'+N(p)+'"':""):f=ya(S,p),f&&(l+=" "+f)}}u||h&&(l+=' data-reactroot=""');var S=l;c="",Q.hasOwnProperty(o)?S+="/>":(S+=">",c="</"+t.type+">");t:{if(null!=(u=a.dangerouslySetInnerHTML)){if(null!=u.__html){u=u.__html;break t}}else if("string"==typeof(u=a.children)||"number"==typeof u){u=N(u);break t}u=null}return null!=u?(a=[],at[o]&&"\n"===u.charAt(0)&&(S+="\n"),S+=u):a=st(a.children),t=t.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?Ka(t):"http://www.w3.org/2000/svg"===n&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:o,children:a,childIndex:0,context:e,footer:c}),this.previousWasTextNode=!1,S},a}();var dt=function(t){function b(e,r){var n=t.call(this,{})||this;return n.partialRenderer=new pt(e,r),n}!function ab(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(b,t);var e=b.prototype;return e._destroy=function(t,e){this.partialRenderer.destroy(),e(t)},e._read=function(t){try{this.push(this.partialRenderer.read(t))}catch(t){this.destroy(t)}},b}(o.Readable),gt={renderToString:function(t){t=new pt(t,!1);try{return t.read(1/0)}finally{t.destroy()}},renderToStaticMarkup:function(t){t=new pt(t,!0);try{return t.read(1/0)}finally{t.destroy()}},renderToNodeStream:function(t){return new dt(t,!1)},renderToStaticNodeStream:function(t){return new dt(t,!0)},version:"16.12.0"},yt={default:gt},vt=yt&&gt||yt;t.exports=vt.default||vt},function(t,e,r){"use strict";r.r(e);var n=r(2),i=r.n(n),s=r(1),o=r.n(s),a=r(4),c=r.n(a),u=r(5),h=r.n(u),l=r(47),f=r(10),p=r.n(f),d=r(11),g=r.n(d),y=r(12),v=r.n(y),m=r(0),b=r.n(m),S=r(42),x=r.n(S),w=r(43),E=r.n(w),_=r(7),F=r.n(_),A=r(13),C=function isBrowser(){return"undefined"!=typeof window&&!window.process},T=function isNode(){return!C()&&"undefined"!=typeof process};function isFunction(t){return"function"==typeof t}var P=function params2queryString(t){return Object.entries(t).map((function(t){var e=F()(t,2),r=e[0],n=e[1];return"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(n))})).join("&")},I=function(){function Router(t){c()(this,Router),this.routes=t}return h()(Router,[{key:"processInput",value:function processInput(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s={};try{(e=t.payload.split("__PATH_PAYLOAD__")[1].split("?")).length>0&&(t.path=e[0])}catch(t){}var o=!1,a=this.getRouteByPath(n,this.routes);a&&a.childRoutes&&(s=this.getRoute(t,a.childRoutes)),s&&Object.keys(s).length||(o=Boolean(n),s=this.getRoute(t,this.routes,r));try{if(e.length>1){var c="";C()&&(c=new URLSearchParams(e[1])),T()&&(c=new A.URLSearchParams(e[1]));var u=!0,h=!1,l=void 0;try{for(var f,p=c[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var d=F()(f.value,2),g=d[0],y=d[1];s.params?s.params[g]=y:s.params=i()({},g,y)}}catch(t){h=!0,l=t}finally{try{u||null==p.return||p.return()}finally{if(h)throw l}}}}catch(t){}if(s&&Object.keys(s).length){var v;if(!s.route.path&&s.route&&s.route.childRoutes&&s.route.childRoutes.length&&(v=this.getRoute({path:""},s.route.childRoutes)),"action"in s.route)return o&&1!=s.route.ignoreRetry&&a&&r.__retries<a.retry&&s.route.path!=a.action?(r.__retries=r.__retries?r.__retries+1:1,{action:s.route.action,params:s.params,retryAction:a?a.action:null,defaultAction:v?v.route.action:null,lastRoutePath:n}):(r.__retries=0,n=n&&!o?"".concat(n,"/").concat(s.route.path):s.route.path,{action:s.route.action,params:s.params,retryAction:null,defaultAction:v?v.route.action:null,lastRoutePath:n});if(v)return{action:v.route.action,params:v.params,lastRoutePath:n};if("redirect"in s.route){n=s.route.redirect;var m=this.getRouteByPath(n,this.routes);if(m)return{action:m.action,params:m.params,lastRoutePath:n}}}var b=this.getRouteByPath("404",this.routes);return a&&r.__retries<a.retry?(r.__retries=r.__retries?r.__retries+1:1,{action:b.action,params:{},retryAction:a.action,lastRoutePath:n}):(this.lastRoutePath=null,r.__retries=0,{action:b.action,params:{},retryAction:null,lastRoutePath:n})}},{key:"getRoute",value:function getRoute(t,e,r){var n=this,i={},s=e.find((function(e){return Object.entries(e).filter((function(t){var e=F()(t,2),r=e[0];return E()(e[1]),"action"!=r&&"childRoutes"!=r})).some((function(e){var s=F()(e,2),o=s[0],a=s[1],c=n.matchRoute(o,a,t,r);try{i=c.groups}catch(t){}return Boolean(c)}))}));return s?{route:s,params:i}:null}},{key:"getRouteByPath",value:function getRouteByPath(t,e){if(!t)return null;var r=null;e=e||this.routes;var n=t.split("/"),i=x()(n),s=i[0],o=i.slice(1),a=!0,c=!1,u=void 0;try{for(var h,l=e[Symbol.iterator]();!(a=(h=l.next()).done);a=!0){var f=h.value;if(f.path==s)if(r=f,f.childRoutes&&f.childRoutes.length&&o.length>0){if(r=this.getRouteByPath(o.join("/"),f.childRoutes))return r}else if(0==o.length)return r}}catch(t){c=!0,u=t}finally{try{a||null==l.return||l.return()}finally{if(c)throw u}}return null}},{key:"matchRoute",value:function matchRoute(t,e,r,n){var i="";return Object.keys(r).indexOf(t)>-1&&(i=r[t]),"text"==t?"text"==r.type&&(i=r.data):"input"==t?i=r:"session"==t&&(i=n),"string"==typeof e?i==e:e instanceof RegExp?e.exec(i):"function"==typeof e&&e(i)}}]),Router}(),R=function getString(t,e,r){var n=r.split(".").reduce((function(t,e){return t[e]}),t[e]);return n instanceof Array&&(n=n[Math.floor(Math.random()*n.length)]),String(n)},O=r(9),B=r.n(O);function getNLU(t,e){var r,n,i,s,a,c,u,h;return o.a.async((function getNLU$(l){for(;;)switch(l.prev=l.next){case 0:if(r=Math.random(),n=null,i=0,s=[],a=[],e){l.next=7;break}return l.abrupt("return",{intent:n,confidence:i,intents:s,entities:a});case 7:if(!e.dialogflow){l.next=19;break}return l.prev=8,l.next=11,o.a.awrap(B()({headers:{Authorization:"Bearer "+e.dialogflow.token},url:"https://api.dialogflow.com/v1/query",params:{query:t.data,lang:"en",sessionId:r}}));case 11:(c=l.sent)&&c.data&&(n=c.data.result.metadata.intentName,a=c.data.result.parameters),l.next=17;break;case 15:l.prev=15,l.t0=l.catch(8);case 17:l.next=33;break;case 19:if(!e.watson){l.next=22;break}l.next=33;break;case 22:if(!e.luis){l.next=33;break}return u=e.luis,l.prev=24,l.next=27,o.a.awrap(B()({url:"https://".concat(u.region,".api.cognitive.microsoft.com/luis/v2.0/apps/").concat(u.appID),params:{"subscription-key":u.endpointKey,q:t.data,verbose:!0}}));case 27:(h=l.sent)&&h.data&&(n=h.data.topScoringIntent.intent,i=h.data.topScoringIntent.score,s=h.data.intents,a=h.data.entities),l.next=33;break;case 31:l.prev=31,l.t1=l.catch(24);case 33:return l.abrupt("return",{intent:n,confidence:i,intents:s,entities:a});case 34:case"end":return l.stop()}}),null,null,[[8,15],[24,31]])}var k=r(8),D=r.n(k);function loadPlugins(t){if(t){for(var e={},r=t.length,n=0;n<r;n++){var i=t[n].resolve,s=t[n].options,o=new(0,i.default)(s);e[t[n].id||"".concat(o.constructor.name)]=o}return e}}function runPlugins(t,e,r,n,i){var s,a,c,u=arguments;return o.a.async((function runPlugins$(h){for(;;)switch(h.prev=h.next){case 0:s=u.length>5&&void 0!==u[5]?u[5]:null,h.t0=o.a.keys(t);case 2:if((h.t1=h.t0()).done){h.next=21;break}return a=h.t1.value,h.next=6,o.a.awrap(t[a]);case 6:if(c=h.sent,h.prev=7,"pre"!=e){h.next=11;break}return h.next=11,o.a.awrap(c.pre({input:r,session:n,lastRoutePath:i}));case 11:if("post"!=e){h.next=14;break}return h.next=14,o.a.awrap(c.post({input:r,session:n,lastRoutePath:i,response:s}));case 14:h.next=19;break;case 16:h.prev=16,h.t2=h.catch(7),console.log(h.t2);case 19:h.next=2;break;case 21:case"end":return h.stop()}}),null,null,[[7,16]])}var H=function(){function CoreBot(t){var e=t.renderer,r=t.routes,n=t.locales,i=t.integrations,s=t.theme,o=t.plugins,a=t.appId,u=t.defaultTyping,h=t.defaultDelay,l=t.defaultRoutes;c()(this,CoreBot),this.renderer=e,this.plugins=loadPlugins(o),this.theme=s||{},this.defaultTyping=u||.6,this.defaultDelay=h||.4,this.locales=n,this.integrations=i,a?this.appId=a:(this.rootElement=null,this.routes=r,this.defaultRoutes=l||[],this.router=isFunction(this.routes)?null:new I([].concat(D()(this.routes),D()(this.defaultRoutes))))}return h()(CoreBot,[{key:"getString",value:function getString(t,e){return R(this.locales,e.__locale,t)}},{key:"setLocale",value:function setLocale(t,e){e.__locale=t}},{key:"input",value:function input(t){var e,r,n,i,s,a,c,u,h=this;return o.a.async((function input$(l){for(;;)switch(l.prev=l.next){case 0:if(e=t.input,r=t.session,n=t.lastRoutePath,(r=r||{}).__locale||(r.__locale="en"),!this.plugins){l.next=8;break}return l.next=6,o.a.awrap(runPlugins(this.plugins,"pre",e,r,n));case 6:l.next=18;break;case 8:if(!this.integrations||"text"!=e.type){l.next=18;break}return l.prev=9,l.next=12,o.a.awrap(getNLU(e,this.integrations));case 12:i=l.sent,Object.assign(e,i),l.next=18;break;case 16:l.prev=16,l.t0=l.catch(9);case 18:if(!isFunction(this.routes)){l.next=29;break}return l.t1=I,l.t2=[],l.t3=D.a,l.next=24,o.a.awrap(this.routes({input:e,session:r}));case 24:l.t4=l.sent,l.t5=(0,l.t3)(l.t4),l.t6=D()(this.defaultRoutes),l.t7=l.t2.concat.call(l.t2,l.t5,l.t6),this.router=new l.t1(l.t7);case 29:return s=this.router.processInput(e,r,n),a={getString:function getString(t){return h.getString(t,r)},setLocale:function setLocale(t){return h.setLocale(t,r)},session:r||{},params:s.params||{},input:e,plugins:this.plugins,defaultTyping:this.defaultTyping,defaultDelay:this.defaultDelay,lastRoutePath:n},c=[s.action,s.retryAction,s.defaultAction],l.next=34,o.a.awrap(this.renderer({request:a,actions:c}));case 34:if(u=l.sent,n=s.lastRoutePath,!this.plugins){l.next=39;break}return l.next=39,o.a.awrap(runPlugins(this.plugins,"post",e,r,n,u));case 39:return r.is_first_interaction=!1,l.abrupt("return",{input:e,response:u,session:r,lastRoutePath:n});case 41:case"end":return l.stop()}}),null,this,[[9,16]])}}]),CoreBot}(),N=(r(44),process.env.WEBCHAT_PUSHER_KEY,r(3)),j=r.n(N),L=r(21),M=r.n(L),U=r(23),q=r.n(U),V=r(22),K=r.n(V);function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var z=function Title(t){return C()?function renderBrowser(){return b.a.createElement("div",{style:_objectSpread({fontSize:14,padding:"10px 15px"},t.style||{})},t.children)}():T()?function renderNode(){return b.a.createElement("title",null,t.children)}():void 0};z.serialize=function(t){return{title:t.children}};r(14);function subtitle_ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function subtitle_objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?subtitle_ownKeys(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):subtitle_ownKeys(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var G=function Subtitle(t){return C()?function renderBrowser(){return b.a.createElement("div",{style:subtitle_objectSpread({fontSize:12,padding:"0px 15px 10px 15px",color:"#696973"},t.style||{})},t.children)}():T()?function renderNode(){return b.a.createElement("desc",null,t.children)}():void 0};G.serialize=function(t){return{subtitle:t.children}};var W=function Element(t){return C()?function renderBrowser(){return b.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:222,marginRight:6,borderRadius:6,border:"1px solid #F1F0F0",overflow:"hidden"}},t.children)}():T()?function renderNode(){return b.a.createElement("element",null,t.children)}():void 0};W.serialize=function(t){var e=Object.assign.apply(Object,[{}].concat(D()(t.children.filter((function(t){return t&&t.type&&"Button"!=t.type.name})).map((function(t){return t.type.serialize&&t.type.serialize(t.props)})))));return e.buttons=D()(t.children.filter((function(t){return t instanceof Array||t&&t.type&&"Button"==t.type.name})).map((function(t){return t instanceof Array?t.map((function(t){return t&&t.type&&t.type.serialize&&t.type.serialize(t.props).button})):t&&t.type&&t.type.serialize&&t.type.serialize(t.props).button}))),e.buttons[0]instanceof Array&&(e.buttons=e.buttons[0]),e};var J={width:300,height:450,messagesJSON:[],messagesComponents:[],replies:[],latestInput:{},typing:!1,webview:null,webviewParams:null,session:{},user:null,lastRoutePath:null,handoff:!1,theme:{brandColor:"#0099ff",textPlaceholder:"Ask me something...",title:"Botonic"},error:{},devSettings:{},isWebchatOpen:!1};var Y=b.a.createContext({getString:function getString(){return""},setLocale:function setLocale(){return""},session:{},params:{},input:{},defaultDelay:0,defaultTyping:0}),X=b.a.createContext({sendText:function sendText(t){return""},sendPayload:function sendPayload(t){return""},setReplies:function setReplies(t){return""},openWebview:function openWebview(t){return""},addMessage:function addMessage(t){return""},updateReplies:function updateReplies(t){return""},closeWebview:function closeWebview(){return""},theme:{},webchatState:J}),$=function Button(t){var e=Object(m.useContext)(X),r=e.webchatState,n=e.openWebview,s=e.sendPayload,o=Object(m.useState)(!1),a=F()(o,2),c=a[0],u=a[1],h=function handleClick(e){e.preventDefault(),t.webview?n(t.webview,t.params):t.path?s("__PATH_PAYLOAD__".concat(t.path)):t.payload?s(t.payload):t.url&&window.open(t.url),t.onClick&&t.onClick()};return C()?function renderBrowser(){var e;if(r.theme.customButton){var n=r.theme.customButton;return b.a.createElement("div",{onClick:function onClick(t){return h(t)}},b.a.createElement(n,null,t.children))}return b.a.createElement("button",{theme:r.theme,onMouseEnter:function onMouseEnter(){return u(!0)},onMouseLeave:function onMouseLeave(){return u(!1)},onClick:function onClick(t){return h(t)},style:(e={display:"flex",width:"100%",maxHeight:80,fontSize:14,textAlign:"center",alignContent:"center",justifyContent:"center",padding:"12px 32px",color:r.theme&&r.theme.brandColor||"#000",backgroundColor:c?"#f3f3f3":"#fff",border:"none"},i()(e,"border","1px solid #f1f0f0"),i()(e,"cursor","pointer"),i()(e,"outline",0),i()(e,"borderTopRightRadius",t.top||0),i()(e,"borderTopLeftRadius",t.top||0),i()(e,"borderBottomRightRadius",t.bottom||0),i()(e,"borderBottomLeftRadius",t.bottom||0),i()(e,"overflow","hidden"),e)},t.children)}():T()?function renderNode(){if(t.webview){var e=t.webview,r="";return t.params&&(r=P(t.params)),b.a.createElement("button",{url:"/webviews/".concat(e.name,"?").concat(r)},t.children)}if(t.path){var n="__PATH_PAYLOAD__".concat(t.path);return b.a.createElement("button",{payload:n},t.children)}return t.payload?b.a.createElement("button",{payload:t.payload},t.children):t.url?b.a.createElement("button",{url:t.url},t.children):void 0}():void 0};$.serialize=function(t){var e=t.payload;return t.path&&(e="__PATH_PAYLOAD__".concat(t.path)),{button:{payload:e,url:t.url,webview:t.webview,title:t.children}}};var Z=function serialize(t){return{type:"carousel",elements:t.children.map((function(t){return t&&t.type&&t.type.serialize&&t.type.serialize(t.props)}))}},Q=function Carousel(t){var e=t.children;return C()&&(e=b.a.createElement("div",{style:{paddingTop:10,marginLeft:-13,display:"flex",flexDirection:"row",overflowX:"auto",maxWidth:"100%"}},b.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"start"}},t.children))),b.a.createElement(gt,j()({style:{maxWidth:"85%",padding:0,backgroundColor:"transparent"},blob:!1,json:Z(t),type:"carousel"},t),e)};Q.serialize=Z;var tt=function Reply(t){var e=Object(m.useContext)(X),r=e.webchatState,n=e.sendText,i=function handleClick(e){if(e.preventDefault(),t.children){var r=t.payload;t.path&&(r="__PATH_PAYLOAD__".concat(t.path)),n(t.children,r)}};return C()?function renderBrowser(){if(r.theme.customReply){var e=r.theme.customReply;return b.a.createElement("div",{onClick:function onClick(t){return i(t)}},b.a.createElement(e,null,t.children))}return b.a.createElement("button",{style:{width:"100%",padding:"4px 8px",border:"1px solid ".concat(r.theme.brandColor),color:r.theme.brandColor,borderRadius:8,cursor:"pointer",outline:0},onClick:function onClick(t){return i(t)}},t.children)}():T()?function renderNode(){if(t.path){var e="__PATH_PAYLOAD__".concat(t.path);return b.a.createElement("reply",{payload:e},t.children)}return b.a.createElement("reply",{payload:t.payload},t.children)}():void 0};tt.serialize=function(t){var e=t.payload;return t.path&&(e="__PATH_PAYLOAD__".concat(t.path)),{reply:{title:t.children,payload:e}}};var et=function serialize(t){return{image:t.src}},rt=function Image(t){var e=t.children;return C()&&(e=b.a.createElement("img",{style:{borderRadius:"8px",maxWidth:"150px",maxHeight:"150px",margin:"10px"},src:t.src})),b.a.createElement(gt,j()({json:et(t)},t,{type:"image"}),e)};rt.serialize=et;var nt=function serialize(t){return{audio:t.src}},it=function Audio(t){var e=t.children;return C()&&(e=b.a.createElement("audio",{style:{maxWidth:"100%"},id:"myAudio",controls:!0},b.a.createElement("source",{src:t.src,type:"audio/mpeg"}),"Your browser does not support this audio format.")),b.a.createElement(gt,j()({json:nt(t)},t,{type:"audio"}),e)};it.serialize=nt;var st=function Pic(t){return C()?function renderBrowser(){return b.a.createElement("div",{style:{borderTopLeftRadius:8,borderTopRightRadius:8,width:222,height:140,background:"#fff url(".concat(t.src,") no-repeat center/cover"),borderBottom:"1px solid #F1F0F0"}})}():T()?function renderNode(){return b.a.createElement("pic",null,t.src)}():void 0};st.serialize=function(t){return{pic:t.src}};var ot=function serialize(t){return{video:t.src}},at=function Video(t){var e=t.children;return C()&&(e=b.a.createElement("video",{style:{backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"8px",maxHeight:"180px",maxWidth:"300px",margin:"10px"},controls:!0},b.a.createElement("source",{src:t.src}))),b.a.createElement(gt,j()({json:ot(t)},t,{type:"video"}),e)};at.serialize=ot;var ct=function serialize(t){return{document:t.src}},ut=function Document(t){var e=t.children;return C()&&(e=b.a.createElement("embed",{style:{borderRadius:"8px",height:"300px",margin:"10px"},src:t.src})),b.a.createElement(gt,j()({json:ct(t)},t,{type:"document"}),e)};ut.serialize=ct;var ht=function serialize(t){return{location:{lat:t.lat,long:t.long}}},lt=function Location(t){return C()?function renderBrowser(){var e=parseFloat(t.lat),r=parseFloat(t.long),n="https://www.google.com/maps/@".concat(e,",").concat(r);return b.a.createElement(gt,j()({json:ht(t)},t,{type:"location"}),b.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"}," ","See Location"))}():T()?function renderNode(){return b.a.createElement("message",{type:"location"},b.a.createElement("lat",null,t.lat),b.a.createElement("long",null,t.long))}():void 0};lt.serialize=ht;var ft=function staticAsset(t){var e=document.querySelector('script[src$="webchat.botonic.js"]').getAttribute("src"),r=e.split("/").pop();return e.replace("/"+r,"/")+t},pt=r(45),dt=r.n(pt);function message_ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function message_objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?message_ownKeys(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):message_ownKeys(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var gt=function Message(t){var e=Object(m.useContext)(Y),r=e.defaultTyping,n=e.defaultDelay,i=t.type,s=void 0===i?"":i,o=t.blob,a=void 0===o||o,c=t.from,u=void 0===c?"bot":c,h=t.delay,l=void 0===h?n:h,f=t.typing,p=void 0===f?r:f,d=t.children,g=t.json,y=t.style,v=q()(t,["type","blob","from","delay","typing","children","json","style"]),S=Object(m.useContext)(X),x=S.webchatState,w=S.addMessage,E=S.updateReplies,_=Object(m.useState)({id:t.id||K()()}),A=F()(_,2),P=A[0],I=(A[1],b.a.Children.toArray(d).filter((function(t){return t.type===tt}))),R=b.a.Children.toArray(d).filter((function(t){return t.type===$})),O=b.a.Children.toArray(d).filter((function(t){return![$,tt].includes(t.type)}));C()&&(Object(m.useEffect)((function(){var t=g,e={id:P.id,type:s,data:t||O,from:u,buttons:R.map((function(t){return{payload:t.props.payload,path:t.props.path,url:t.props.url,title:t.props.children}})),delay:l,typing:p,replies:I.map((function(t){return{payload:t.props.payload,path:t.props.path,url:t.props.url,text:t.props.children}})),display:l+p==0};w(e)}),[]),Object(m.useEffect)((function(){var t=x.messagesJSON.find((function(t){return t.id===P.id}));t&&t.display&&0==x.messagesJSON.filter((function(t){return!t.display})).length&&E(I)}),[x.messagesJSON]));var B=function isFromUser(){return"user"===u},k=function isFromBot(){return"bot"===u},D=function getBgColor(){return a?B()?x.theme.brandColor:"#F1F0F0":"transparent"},H=function getMessageStyle(){return k()?x.theme.botMessageStyle||{}:x.theme.userMessageStyle||{}},N=(t.blob,t.json),L=q()(t,["blob","json"]);return C()?function renderBrowser(){var t=x.messagesJSON.find((function(t){return t.id===P.id}));if(!t||!t.display)return b.a.createElement(b.a.Fragment,null);var e={position:"absolute",top:"50%",width:0,height:0,border:"".concat(6,"px solid transparent"),marginTop:-6},r=dt.a;return"brandImage"in x.theme&&(r=x.theme.brandImage),"botMessageImage"in x.theme&&(r=x.theme.botMessageImage),b.a.createElement("div",{style:{display:"flex",justifyContent:B()?"flex-end":"flex-start",position:"relative",paddingLeft:5}},k()&&r&&b.a.createElement("div",{style:{width:28,padding:4,flex:"none",display:"flex",alignItems:"center",justifyContent:"center"}},b.a.createElement("img",{style:{width:"100%"},src:ft(r)})),b.a.createElement("div",j()({style:message_objectSpread({position:"relative",margin:8,fontFamily:"Arial, Helvetica, sans-serif",borderRadius:8,backgroundColor:D(),color:B()?"#FFF":"#000",border:"1px solid ".concat(D()),maxWidth:a?"60%":"calc(100% - 16px)"},H(),{},y)},v),b.a.createElement("div",{style:{padding:"8px 12px",display:"flex",flexDirection:"column",whiteSpace:"pre-line"}},O),R,B()&&a&&b.a.createElement("div",{style:message_objectSpread({},e,{borderLeftColor:D(),right:0,borderRight:0,marginRight:-6})}),k()&&a&&b.a.createElement("div",{style:message_objectSpread({},e,{borderRightColor:D(),left:0,borderLeft:0,marginLeft:-6})})))}():T()?function renderNode(){return"custom"===s?b.a.createElement("message",j()({json:JSON.stringify(N)},L)):b.a.createElement("message",L,d)}():void 0},yt=function serialize(t){var e=t.children;return"object"==M()(t.children)&&(e=t.children.join(" "),"string"!=typeof t.children[1]&&(e=t.children[0])),{text:e}},vt=function Text(t){return b.a.createElement(gt,j()({json:yt(t)},t,{type:"text"}),t.children)};function react_bot_ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function react_bot_objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?react_bot_ownKeys(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):react_bot_ownKeys(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}vt.serialize=yt;var mt=function(t){function ReactBot(t){var e;return c()(this,ReactBot),e=p()(this,g()(ReactBot).call(this,react_bot_objectSpread({defaultRoutes:[{path:"404",action:function action(){return b.a.createElement(vt,null,"I don't understand you")}}],renderer:function renderer(t){return e.renderReactActions(t)}},t)))}return v()(ReactBot,t),h()(ReactBot,[{key:"renderReactActions",value:function renderReactActions(t){var e,r,n,i,s,a,c,u,h,l,f;return o.a.async((function renderReactActions$(p){for(;;)switch(p.prev=p.next){case 0:e=t.request,r=t.actions,n=[],a=!0,c=!1,u=void 0,p.prev=5,h=r[Symbol.iterator]();case 7:if(a=(l=h.next()).done){p.next=23;break}if(!(f=l.value)){p.next=20;break}if(!f.botonicInit){p.next=16;break}return p.next=13,o.a.awrap(f.botonicInit(e));case 13:p.t0=p.sent,p.next=17;break;case 16:p.t0={};case 17:i=p.t0,s=b.a.createElement(Y.Provider,{value:e},b.a.createElement(f,i)),n.push(s);case 20:a=!0,p.next=7;break;case 23:p.next=29;break;case 25:p.prev=25,p.t1=p.catch(5),c=!0,u=p.t1;case 29:p.prev=29,p.prev=30,a||null==h.return||h.return();case 32:if(p.prev=32,!c){p.next=35;break}throw u;case 35:return p.finish(32);case 36:return p.finish(29);case 37:return p.abrupt("return",n);case 38:case"end":return p.stop()}}),null,null,[[5,25,29,37],[30,,32,36]])}}]),ReactBot}(H);function node_app_ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function node_app_objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?node_app_ownKeys(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):node_app_ownKeys(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var bt,St=function(){function NodeApp(t){var e=this;c()(this,NodeApp),this.bot=new mt(node_app_objectSpread({renderer:function renderer(t){return e.renderNode(t)}},t))}return h()(NodeApp,[{key:"renderNode",value:function renderNode(t){return o.a.async((function renderNode$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(this.bot.renderReactActions(t));case 2:return e.t0=function(t){return Object(l.renderToStaticMarkup)(t)},e.abrupt("return",e.sent.map(e.t0).join("\n"));case 4:case"end":return e.stop()}}),null,this)}},{key:"input",value:function input(t){return this.bot.input(t)}}]),NodeApp}(),xt=function(t){function _default(){return c()(this,_default),p()(this,g()(_default).apply(this,arguments))}return v()(_default,t),h()(_default,[{key:"render",value:function render(){return b.a.createElement(vt,null,"Hello! 👋")}}]),_default}(b.a.Component),wt=function(t){function _default(){return c()(this,_default),p()(this,g()(_default).apply(this,arguments))}return v()(_default,t),h()(_default,[{key:"render",value:function render(){return b.a.createElement(vt,null,"Bye bye! 👋")}}]),_default}(b.a.Component),Et=function(t){function _default(){return c()(this,_default),p()(this,g()(_default).apply(this,arguments))}return v()(_default,t),h()(_default,[{key:"render",value:function render(){return b.a.createElement(vt,null,'Enter the generated JSON key for dialogflowV2 in plugins.js to test the bot. Try typing "hello" to start the bot.')}}]),_default}(b.a.Component),_t=[{path:"hi",intent:"smalltalk.greetings.hello",action:xt},{path:"bye",intent:"smalltalk.greetings.bye",action:wt},{path:"not_found",type:/.*/,action:Et}],Ft={},At=[{id:"dialogflow",resolve:r(88),options:"YOUR_DIALOGFLOW_V2_GENERATED_JSON_KEY"}];r.d(e,"app",(function(){return bt})),bt=new St({routes:_t,locales:Ft,plugins:At})}]).app}));
//# sourceMappingURL=bot.js.map